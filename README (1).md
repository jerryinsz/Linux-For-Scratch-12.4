# Linux-For-Scratch-12.4ï¼ˆè¿™æ˜¯è‰ç¨¿å’Œæˆ‘ä¸AIå¯¹è¯æ‘˜è¦çš„ï¼‰
ä¸€ä¸ªæ“ä½œç³»ç»ŸLFSå¤§ä½œä¸š

å¼€å§‹å‰å‡†å¤‡ï¼šä½ éœ€è¦ä¸€å°è¿è¡Œè‰¯å¥½çš„ç”µè„‘ï¼Œå‡†å¤‡å¥½æ‰‹æœºæˆ–è€…ç¬”è®°æœ¬åšå¥½è®°å½•å’Œè¿è¡Œæ—¶çš„å¨±ä¹æ¶ˆé£ã€‚æ³¨æ„ï¼ä»å¢åŠ ç³»ç»Ÿç¨³å®šæ€§é¿å…ä½ çš„ç”µè„‘è“å±æ­»æœºçš„è§’åº¦æ¥è¯´ï¼Œè¯·ä½ æœ€å¥½å¼€å§‹ä¹‹å‰çƒ¤æœº1ä¸ªå°æ—¶ï¼Œç¡®ä¿æœºå­å¯ä»¥é•¿æ—¶é—´ä¸­é«˜è´Ÿè½½ä¸ä¼šå´©æºƒã€‚å¦å¤–è°ƒèŠ‚å¥½ç³»ç»ŸBIOSä¸­çš„ä¸€äº›è®¾ç½®ï¼Œæœ€å¥½èƒ½æ—¥å¸¸ç¨³å®šä¸è¦è¶…é¢‘é¿å…ç³»ç»Ÿä¸ç¨³å®šå´©æºƒã€‚
æœ€åï¼Œå°±æ˜¯å‡†å¤‡å¥½æ°´å’Œé£Ÿç‰©ã€‚æˆ‘å»ºè®®ä½ å°½å¿«å®Œæˆï¼Œä¸ç„¶ä½ å®¹æ˜“åœ¨ä¸€æ®µæ—¶é—´ä¹‹åå¿˜è®°ä½ åšåˆ°äº†å“ªé‡Œã€‚

å…³äºå®æœºï¼šå¯¹åŒæ ·çš„CSä¸“ä¸šæ“ä½œç³»ç»Ÿä¸“ä¸šè¯¾å­¦ç”Ÿæ¥è¯´ï¼Œæˆ‘å»ºè®®ä½ æå¥½ä¸€ä¸ªè‰¯å¥½çš„å®æœºç¯å¢ƒï¼Œå……è£•é«˜æ€§èƒ½çš„å›ºæ€ç¡¬ç›˜ï¼Œä¾‹å¦‚æˆ‘å°±æ˜¯ä½¿ç”¨TiPro7000 1TB ã€‚é«˜æ€§èƒ½å¤šæ ¸å¤„ç†å™¨ï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨i5-13600KFã€‚é«˜æ€§èƒ½å†…å­˜æ¡ï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨DDR5 16GBÃ—2 C32 6800MHzçš„å†…å­˜æ¡ã€‚è‰¯å¥½çš„ç³»ç»Ÿç¯å¢ƒï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨Windows 11, version 25H2 ï¼Œæœ€å¥½ä¸è¦ä¹±ä¸‹è½½è½¯ä»¶ï¼ˆç‰¹åˆ«æ˜¯æ€æ¯’è½¯ä»¶ï¼‰ä¸€ä¸ªä¼˜å¼‚çš„å®æœºæ€§èƒ½èƒ½æå¤§çš„æå‡ä½ LFSå®Œæˆçš„æ•ˆç‡ã€‚

å…³äºè™šæ‹Ÿæœºï¼š
å¯¹äº LFS å¤§ä½œä¸šï¼Œå¼ºçƒˆå»ºè®®åœ¨è™šæ‹Ÿæœºï¼ˆVMware æˆ– VirtualBoxï¼‰ä¸­è¿è¡Œ Ubuntu æ¥æ‰§è¡Œä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å®æœºã€‚æˆ‘æ„å»ºLFSå…¨ç¨‹ä½¿ç”¨è™šæ‹ŸæœºVMware Workstation Proã€‚è¯·ä½ ä¸è¦å®æœºè·‘Ubuntuç³»ç»Ÿè¿™æ˜¯æˆ‘è¸©è¿‡çš„å‘ï¼Œå®æœºè·‘æœ‰è¯¸å¤šé£é™©å’Œä¸ä¾¿ï¼Œå…¶ä¸€æ˜¯æ— æ³•ä»å®¹ä¿å­˜å¿«ç…§ï¼Œæ²¡æœ‰ä¸€ä¸ªåæ‚”è¯é‚£ä¹ˆä½ å°±åªèƒ½ä¸€å¾€æ— å‰ã€‚è¿™æ˜¯ååˆ†å®¹æ˜“å¤±è´¥çš„ã€‚å°½ç®¡å®æœºåœ¨ç¼–è¯‘é€Ÿåº¦ä¸Šç•¥æœ‰ä¼˜åŠ¿ï¼Œä½†å¯¹äº LFS è¿™ç§é«˜åº¦å®éªŒæ€§ã€æ˜“å‡ºé”™ä¸”æµç¨‹æé•¿çš„é¡¹ç›®ï¼Œè™šæ‹Ÿæœºæä¾›çš„â€œåæ‚”è¯â€æœºåˆ¶ï¼ˆå¿«ç…§ï¼‰æ˜¯ä¸å¯æ›¿ä»£çš„ã€‚
å¹¶ä¸”LFS çš„æŸäº›æ“ä½œå…·æœ‰â€œç ´åæ€§â€æ½œè´¨ï¼š
ç£ç›˜åˆ†åŒºï¼š åœ¨ LFS ä¸­ä½ éœ€è¦æ“ä½œ fdisk æˆ– partedã€‚åœ¨å®æœºä¸Šï¼Œå¦‚æœä½ æ‰‹æŠ–é€‰é”™äº†ç¡¬ç›˜ï¼ˆæ¯”å¦‚æŠŠ Windows æˆ– Ubuntu åŸç³»ç»Ÿçš„åˆ†åŒºæ ¼å¼åŒ–äº†ï¼‰ï¼Œæ•°æ®å°†ä¸å¯æ¢å¤ã€‚
å…¶äºŒæ˜¯åŒç³»ç»Ÿä¼šæœ‰UTCæ—¶é—´é”™ä¹±ï¼ŒUbuntuç³»ç»ŸNvidiaé©±åŠ¨å‡ºé”™æ— æ³•åŠ è½½UIç•Œé¢ï¼Œä¸»æœºé£æ‰‡ï¼Œæ°´å†·ï¼Œæ— çº¿ç½‘å¡ç­‰å¯èƒ½å‡ºç°ä¸€ç³»åˆ—é—®é¢˜ï¼Œä¾‹å¦‚æœ‰æ—¶å€™åœ¨ä»»æ„ä¸€ä¸ªç³»ç»Ÿä¸­æ‰é©±åŠ¨ï¼Œæ— æ³•æ§åˆ¶æœºç®±é£æ‰‡æ— æ³•ä½¿ç”¨æœºç®±é£æ‰‡æ§ä»¶ï¼Œæ— æ³•æ£€æµ‹åˆ°æ— çº¿ç½‘å¡æ— æ³•è¿æ¥è“ç‰™ç­‰ç­‰ã€‚æåˆ°è“ç‰™è¯·ä½ åœ¨ä½¿ç”¨è™šæ‹Ÿæœºå®‰è£…Ubuntuæ—¶ä¸»åŠ¨å…³é—­ä¸»æœºè“ç‰™å’ŒWLANè¿™å¯èƒ½ä¼šå¯¼è‡´è™šæ‹Ÿæœºä¸­çš„Ubuntuç³»ç»ŸæŠ¥é”™ã€‚

4. ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„å‘ï¼šå®æœºç¡¬ä»¶å…¼å®¹æ€§
å¦‚æœä½ ç”¨å®æœºè·‘ LFSï¼Œåˆ°æœ€åä¸€æ­¥é…ç½® Linux å†…æ ¸æ—¶ï¼Œä½ éœ€è¦é’ˆå¯¹ä½ å¤æ‚çš„ç‰©ç†ç¡¬ä»¶ï¼ˆç‰¹å®šçš„æ˜¾å¡ã€ç‰¹æ®Šçš„ Wi-Fi ç½‘å¡ã€å¤æ‚çš„ç”µæºç®¡ç†ï¼‰è¿›è¡Œé…ç½®ï¼Œè¿™æå…¶å›°éš¾ã€‚
è€Œåœ¨è™šæ‹Ÿæœºä¸­ï¼Œç¡¬ä»¶æ˜¯ç»è¿‡æŠ½è±¡çš„ï¼ˆæ ‡å‡†çš„ Intel èŠ¯ç‰‡ç»„ã€æ ‡å‡†çš„æ¨¡æ‹Ÿç½‘å¡ï¼‰ï¼Œå†…æ ¸é…ç½®æå…¶ç®€å•ï¼Œå¤§å¤§é™ä½äº†æœ€åâ€œä¸´é—¨ä¸€è„šâ€å¤±è´¥çš„æ¦‚ç‡ã€‚
è™šæ‹Ÿæœºå¯ä»¥å¾ˆå¥½çš„ä¿å­˜å¤šä¸ªå¿«ç…§ï¼Œä½ å¯ä»¥éšæ—¶è¿˜åŸç³»ç»Ÿï¼Œè€Œä¸è‡³äºé‡å¤´æ¥è¿‡ã€‚
è™šæ‹Ÿæœºçš„é…ç½®æœ€å¥½ç»™é«˜ä¸€ç‚¹ï¼Œä¸ç„¶æœ‰äº›è½¯ä»¶åŒ…çš„å®‰è£…ä¼šæ¯”è¾ƒè€—æ—¶ã€‚
è™šæ‹Ÿæœºæœ€å¥½å¯ä»¥å¼€å¯è™šæ‹ŸåŒ–è¿™æ ·å¯ä»¥æå‡CPUæ•ˆç‡åŠ å¿«ç¼–è¯‘é€Ÿåº¦ï¼Œè¿™é¡¹æŠ€æœ¯å¯ä»¥è®©è™šæ‹Ÿæœºä¸­çš„ç³»ç»Ÿè°ƒç”¨ä½ å®æœºä¸­æ›´åº•å±‚çš„æŒ‡ä»¤é›†ï¼Œè¿›è€Œä¼˜åŒ–æ“ä½œæ•ˆç‡ã€‚å½“ç„¶è¿™é¡¹åŠŸèƒ½æˆ‘å°è¯•è®¾ç½®è¿‡åå‘ç°å¼€ä¸äº†æ‰€ä»¥æ²¡å¼€ã€‚
è™šæ‹Ÿæœºå»ºè®®å…³é—­ç¼–è¾‘è™šæ‹Ÿæœºè®¾ç½®ä¸­æ˜¾ç¤ºå™¨ä¸­çš„åŠ é€Ÿ3Då›¾å½¢é€‰é¡¹ã€‚

3. è™šæ‹Ÿæœºé…ç½®å»ºè®®
å¦‚æœä½ å†³å®šç”¨è™šæ‹Ÿæœºï¼Œè¯·å‚è€ƒä»¥ä¸‹é…ç½®ä»¥ç¡®ä¿é¡ºåˆ©ï¼š
ç£ç›˜ç©ºé—´ï¼š è‡³å°‘åˆ†é… 100GB çš„åŠ¨æ€å¢é•¿ç£ç›˜ï¼ˆLFS æºç åŒ… + ç¼–è¯‘äº§ç”Ÿçš„ä¸´æ—¶ä¸­é—´ä»¶æå…¶å ç”¨ç©ºé—´ï¼Œå°¤å…¶æ˜¯è¿è¡Œæµ‹è¯•å¥—ä»¶æ—¶ï¼‰ã€‚
ç½‘ç»œè®¾ç½®ï¼š ä½¿ç”¨ NAT æ¨¡å¼ã€‚ç¡®ä¿åœ¨ chroot ä¹‹å‰èƒ½å¤Ÿæµç•…ä¸‹è½½æºç åŒ…ã€‚
è½¯ä»¶é€‰æ‹©ï¼š
VMware Workstation (Pro ç°åœ¨å¯¹ä¸ªäººå…è´¹äº†) æ€§èƒ½æœ€ç¨³ï¼Œå¿«ç…§ç®¡ç†æ¸…æ™°ã€‚
VirtualBox ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚
å®¿ä¸»æœºç³»ç»Ÿç‰ˆæœ¬ï¼š å»ºè®®å®‰è£… Ubuntu 22.04 LTS æˆ– 24.04 LTS ä½œä¸ºå®¿ä¸»æœºã€‚è¿™å’Œç›®å‰æœ€æ–°çš„ LFS 12.x æ‰‹å†Œå…¼å®¹æ€§æœ€å¥½ã€‚
ä¸è¦ç”¨å®æœºï¼ä¸è¦ç”¨å®æœºï¼ä¸è¦ç”¨å®æœºï¼
è¯·åœ¨ Windows/macOS ä¸Šè£…ä¸ª VMwareï¼Œé‡Œé¢è£…ä¸ª Ubuntuï¼Œç„¶åæ¯ä¸€ç« å­˜ä¸€ä¸ªå¿«ç…§ã€‚è¿™ä¼šè®©ä½ ä»â€œå´©æºƒæ”¾å¼ƒâ€å˜æˆâ€œé¡ºåˆ©é€šå…³â€ã€‚
å…³äºLinuxç³»ç»Ÿï¼šLinuxç³»ç»Ÿæˆ‘é€‰æ‹©äº†ubuntu-24.04.3-desktop-amd64.isoè¿™ä¸ªç³»ç»Ÿè¿™ä¸ªç‰ˆæœ¬æ˜¯LFSæ‰‹å†Œæ‰€æ¨èçš„ã€‚
å¦å¤–å»ºè®®ä¸è¦åœ¨å®‰è£…ç³»ç»Ÿæ—¶ä¿®æ”¹ç³»ç»Ÿè¯­è¨€ï¼Œé»˜è®¤è‹±è¯­ï¼Œç„¶åå°½å¯èƒ½å°‘è£…æ²¡å¿…è¦çš„åº”ç”¨ï¼Œç£ç›˜åˆ†åŒºä¹Ÿå°½é‡ç®€å•ï¼Œå¦‚æœä½ çš„ç›®çš„ä»…ä»…æ˜¯æš‚æ—¶æƒ³å®ŒæˆLFSä½œä¸šçš„è¯ã€‚å…¶ä»–æ³¨æ„äº‹é¡¹æ­£å¼å¼€å±•æ—¶ä¼šä¸€æ­¥æ­¥å‘ˆç°ã€‚


AIè¯´çš„å¦‚ä¸‹æˆ‘æ¯”è¾ƒèµæˆï¼šå®Œæˆ Linux From Scratch (LFS) æ˜¯è®¸å¤šè®¡ç®—æœºä¸“ä¸šå­¦ç”Ÿçš„â€œæˆäººç¤¼â€ã€‚å®ƒä¸ä»…è€ƒéªŒæŠ€æœ¯ï¼Œæ›´è€ƒéªŒè€å¿ƒå’Œç»†å¿ƒã€‚
éš¾ç‚¹æ‰€åœ¨ï¼š LFS å¯¹å®¿ä¸»æœºï¼ˆä½ ç”¨æ¥æ“ä½œçš„é‚£ä¸ªç°æˆ Linuxï¼Œå¦‚ Ubuntu æˆ– CentOSï¼‰çš„ç‰ˆæœ¬ã€å†…æ ¸ç‰ˆæœ¬å’Œç°æœ‰çš„åº“æœ‰ä¸¥æ ¼è¦æ±‚ã€‚
éš¾ç‚¹æ‰€åœ¨ï¼š å½“ä½ æ‰§è¡Œ make menuconfig æ—¶ï¼Œé¢å¯¹æˆåƒä¸Šä¸‡ä¸ªé©±åŠ¨å’ŒåŠŸèƒ½é€‰é¡¹ï¼Œä½ éœ€è¦å†³å®šå“ªäº›ç¼–è¯‘è¿›å†…æ ¸ï¼Œå“ªäº›ä½œä¸ºæ¨¡å—ã€‚
æ€»ç»“ï¼š LFS æœ€éš¾çš„ä¸æ˜¯å†™ä»£ç ï¼Œè€Œæ˜¯åœ¨æåº¦ä¹å‘³çš„é…ç½®ä¸­ä¿æŒç»å¯¹çš„ç²¾ç¡®ã€‚

**ç”¨ SSH åš LFS ä½“éªŒä¼šå¥½ 200%ï¼Œä½ å¯ä»¥åœ¨ Windows è¿™ä¸€ä¾§è‡ªå¦‚åœ°å¤åˆ¶ç²˜è´´æ‰‹å†Œå‘½ä»¤ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè™šæ‹Ÿæœºç•Œé¢å¡æ­»ã€‚**

ç»™ä½ çš„å»ºè®®ï¼ˆé¿å‘æŒ‡å—ï¼‰ï¼š
ç‰ˆæœ¬åŒ¹é…ï¼š ä¸¥æ ¼æŒ‰ç…§ LFS æ‰‹å†Œå»ºè®®çš„å®¿ä¸»æœºç‰ˆæœ¬ã€‚å»ºè®®ä½¿ç”¨æ‰‹å†Œæ¨èçš„å‘è¡Œç‰ˆã€‚
è„šæœ¬åŒ–ï¼š ä¸è¦åªæ˜¯æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ã€‚å»ºè®®æŠŠæ¯ä¸€ç« çš„å‘½ä»¤å†™æˆå°è„šæœ¬ï¼Œå¹¶åœ¨æ‰§è¡Œå‰æ ¸å¯¹ç¯å¢ƒå˜é‡ï¼ˆå°¤å…¶æ˜¯ $LFS å˜é‡ï¼‰ã€‚
é¢‘ç¹æ£€æŸ¥ï¼š æ¯å®Œæˆä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚ Glibcï¼‰ï¼ŒåŠ¡å¿…è¿è¡Œæ‰‹å†Œä¸­ç»™å‡ºçš„æµ‹è¯•å¥—ä»¶ï¼ˆCheck/Test suitesï¼‰ã€‚è™½ç„¶è€—æ—¶ï¼Œä½†èƒ½ä¿è¯ä½ çš„åœ°åŸºæ˜¯ç¨³å›ºçš„ã€‚
å–„ç”¨å¿«ç…§ï¼š å¦‚æœä½ åœ¨è™šæ‹Ÿæœºï¼ˆVMware/VirtualBoxï¼‰ä¸Šåšï¼Œæ¯è¿‡ä¸€ç« å­˜ä¸€ä¸ªå¿«ç…§ï¼è¿™æ˜¯æ•‘å‘½çš„ã€‚
ç†è§£åŸç†ï¼š é‡ç‚¹ç†è§£ä»€ä¹ˆæ˜¯ chrootï¼ˆæ ¹ç¯å¢ƒåˆ‡æ¢ï¼‰å’Œ ldï¼ˆåŠ¨æ€é“¾æ¥å™¨ï¼‰ã€‚ç†è§£äº†è¿™ä¸¤ç‚¹ï¼Œä½ å°±ç†è§£äº† LFS çš„ä¸€åŠã€‚
1. æ ¸å¿ƒåŸåˆ™ï¼šç»å¯¹ä¸è¦â€œæ··æ­â€ç‰ˆæœ¬
åƒä¸‡ä¸è¦ä»ä¸åŒçš„è½¯ä»¶æºï¼ˆå¦‚ Ubuntu çš„ apt, CentOS çš„ yumï¼‰å»ä¸‹è½½ LFS éœ€è¦çš„æºç åŒ…ã€‚
2. å…³äº LFS æ–‡æ¡£ç‰ˆæœ¬çš„é€‰æ‹©ï¼š
æˆ‘é€‰æ‹©LFS 12.4ï¼šhttps://www.linuxfromscratch.org/lfs/view/stable/ å’Œ https://lfs.xry111.site/zh_CN/ è¦ç•™æ„çš„æ˜¯å®‰è£…è½¯ä»¶åŒ…ä¼šçœå»ä¸€äº›ä»£ç ï¼šæ¯”å¦‚è§£å‹ç¼©ï¼Œcdåˆ°æ–‡ä»¶å’Œrm -rf å®‰è£…åæ¸…ç†ç°åœºåˆ é™¤æ–‡ä»¶å¤¹ã€‚

æ‰€æœ‰çš„æ“ä½œå¿…é¡»ä»¥æ‰‹å†Œä¸ºå‡†ã€‚æ‰‹å†Œéå¸¸è¯¦å°½ï¼Œå®ƒç”šè‡³ä¼šå‘Šè¯‰ä½ æ¯ä¸€æ¡å‘½ä»¤ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ã€‚ä¸è¦ç›²ç›®è½»ä¿¡AIå’Œå…¶ä»–äººçš„åˆ†äº«ï¼è¯·ä»¥ä½ ä¸ºä¸»ã€‚ç»“åˆå®é™…æƒ…å†µæ¥åšå‡ºåˆ¤æ–­ï¼è¿™ç‚¹æ˜¯æˆè´¥çš„å…³é”®ï¼
é€‰æ‹© LFS å®˜æ–¹ç½‘ç«™æœ€æ–°çš„ Stable ç‰ˆæœ¬æ‰‹å†Œï¼Œä¸¥æ ¼ä¸‹è½½æ‰‹å†ŒæŒ‡å®šçš„è½¯ä»¶åŒ…ç‰ˆæœ¬ï¼Œæ‰‹åŠ¨æŒ‰æ­¥éª¤æ‰§è¡Œã€‚å°±æ˜¯æ·å¾„ï¼
åœ¨ LFS çš„ä¸–ç•Œé‡Œï¼Œâ€œä¸€è‡´æ€§â€å°±æ˜¯ç”Ÿå‘½çº¿ã€‚ä¸€æ—¦æ‰“ç ´äº†ç‰ˆæœ¬å¹³è¡¡ï¼Œä½ å¯èƒ½ä¼šé™·å…¥é•¿è¾¾å‡ å¤©çš„æŠ¥é”™åœ°ç‹±ã€‚
å…³äºAI Agentçš„é€‰æ‹©å’Œä½¿ç”¨ï¼šæˆ‘é€‰æ‹©ai.devä¹Ÿå°±æ˜¯Google AI Studio ä¸­çš„ Gemini 3 ï¼ŒLFSä»»åŠ¡å› ä¸ºè¿‡ç¨‹å¤ªé•¿ã€ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€Token è€—ç«­ã€‚
æˆ‘æ˜¯ä½¿ç”¨äº†22wtokensè¾…åŠ©å®Œæˆäº†LFSä½œä¸šã€‚
Token Usage:1048576ï¼›
Input tokens:64,038ï¼›
Output tokens:161,724ï¼›
Total tokens:225,762ï¼›



åœ¨ VMware Workstation Pro ä¸Šä¸º LFS æ­å»ºâ€œæ¸©åºŠâ€ç¯å¢ƒï¼Œç›®æ ‡æ˜¯ï¼š**ç¨³å®šã€å¿«é€Ÿã€æ˜“äºå›æ»šã€æ–¹ä¾¿æŸ¥é˜…æ–‡æ¡£**ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä»½ä¿å§†çº§çš„è™šæ‹Ÿæœºé…ç½®åŠä¼˜åŒ–æ–¹æ¡ˆï¼š

### 1. è™šæ‹Ÿæœºç¡¬ä»¶é…ç½® (The "LFS Bed")
LFS æå…¶æ¶ˆè€— CPU å’Œç£ç›˜ IOï¼Œå»ºè®®æŒ‰ä»¥ä¸‹å‚æ•°é…ç½®ï¼š

*   **å¤„ç†å™¨ (CPU)ï¼š** åˆ†é…å®¿ä¸»æœº **50%~75%** çš„é€»è¾‘æ ¸å¿ƒã€‚ä¾‹å¦‚ 16 æ ¸ CPU å°±åˆ† 8 æˆ– 12 æ ¸ã€‚
    *   *å°æŠ€å·§ï¼š* å‹¾é€‰â€œè™šæ‹ŸåŒ–å¼•æ“â€ä¸­çš„â€œè™šæ‹ŸåŒ– Intel VT-x/EPTâ€ï¼Œè™½ç„¶ LFS æœ¬èº«ä¸ç”¨è™šæ‹ŸåŒ–ï¼Œä½†è¿™èƒ½è®©ç³»ç»Ÿè¿è¡Œæ›´æµç•…ã€‚
*   **å†…å­˜ (RAM)ï¼š** è‡³å°‘ **8GB**ï¼ˆå¦‚æœå®¿ä¸»æœºå†…å­˜å¤Ÿï¼Œç»™ 16GB æ›´å¥½ï¼‰ã€‚
    *   *ç†ç”±ï¼š* åæœŸç¼–è¯‘ GCC ç­‰å¤§åŒ…æ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³ä¼šå¯¼è‡´ Swap é¢‘ç¹äº¤æ¢ï¼Œé€Ÿåº¦æ…¢å¦‚èœ—ç‰›ã€‚
*   **ç£ç›˜ (Disk)ï¼š** å»ºè®® **100GB - 120GB**ã€‚
    *   **é‡è¦ï¼š** å¿…é¡»å­˜å‚¨åœ¨ **SSD** ä¸Šï¼ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šæœ‰æ•°ç™¾ä¸‡æ¬¡å°æ–‡ä»¶è¯»å†™ï¼Œæœºæ¢°ç¡¬ç›˜ä¼šè®©ä½ æ€€ç–‘äººç”Ÿã€‚
    *   **ç±»å‹ï¼š** é€‰æ‹© **NVMe**ï¼ˆå¦‚æœæ˜¯è¾ƒæ–°çš„å†…æ ¸ï¼‰æˆ– **SCSI**ã€‚

### 2. å…³é”®ï¼šåˆ†åŒºç­–ç•¥ (Partitioning)
ä¸è¦æŠŠ LFS è£…åœ¨ Ubuntu çš„æ ¹ç›®å½•ä¸‹ï¼Œè¦ä¸ºå®ƒå‡†å¤‡ç‹¬ç«‹çš„è™šæ‹Ÿç£ç›˜åˆ†åŒºã€‚

*   **å®¿ä¸»æœº Ubuntu åˆ†åŒºï¼š** ç»™ 40GB å·¦å³å³å¯ã€‚
*   **LFS ç›®æ ‡åˆ†åŒº (æœªæ¥çš„ LFS æ ¹ç›®å½•)ï¼š** ç»™ 60GB+ã€‚
    *   åœ¨å®‰è£… Ubuntu å®¿ä¸»æœºæ—¶ï¼Œä½ å¯ä»¥é¢„ç•™å‡ºè¿™å—ç©ºé—´ä¸åˆ†é…ï¼Œæˆ–è€…è£…å¥½åå†ç”¨ `fdisk` åˆ†å‡ºä¸€ä¸ªç‹¬ç«‹åˆ†åŒºï¼ˆå¦‚ `/dev/sdb1` æˆ– `/dev/sda3`ï¼‰ã€‚
    *   *ç†ç”±ï¼š* ç‹¬ç«‹åˆ†åŒºæ„å‘³ç€å¦‚æœä½ çš„ LFS æç ¸äº†ï¼Œä½ åªéœ€è¦é‡æ–° `mkfs` è¿™ä¸ªåˆ†åŒºï¼Œè€Œä¸éœ€è¦é‡è£…æ•´ä¸ª Ubuntu å®¿ä¸»æœºã€‚

### 3. å®¿ä¸»æœºç³»ç»Ÿé€‰æ‹©ä¸é¢„å¤„ç†
*   **æ¨èé•œåƒï¼š** **Ubuntu 24.04 LTS** 
*   **æ›´æ¢ Shellï¼ˆæ ¸å¿ƒåŠ¨ä½œï¼‰ï¼š**
    Ubuntu é»˜è®¤ `/bin/sh` æŒ‡å‘ `dash`ï¼Œè€Œ LFS è¦æ±‚å¿…é¡»æŒ‡å‘ `bash`ã€‚
    ```bash
    # æ‰§è¡Œæ­¤å‘½ä»¤å¹¶é€‰æ‹© "No"
    sudo dpkg-reconfigure dash
    ```
*   **å®‰è£…å¿…è¦ä¾èµ–ï¼ˆLFS é—¨ç¥¨ï¼‰ï¼š**
    LFS æ‰‹å†Œç¬¬ 2 ç« æåˆ°çš„å·¥å…·ï¼ŒUbuntu é»˜è®¤å¹¶ä¸å…¨ã€‚è¿è¡Œä»¥ä¸‹è„šæœ¬å®‰è£…ï¼š
    ```bash
    sudo apt update
    sudo apt install build-essential bison texinfo gawk m4 perl python3
    ```

### 4. ç½‘ç»œä¸è¿œç¨‹è¿æ¥ (èˆ’é€‚åº¦æå‡)
*   **ç½‘ç»œæ¨¡å¼ï¼š** **NAT æ¨¡å¼**ã€‚
*   **SSH å¼ºçƒˆæ¨èï¼š**
    ä¸è¦ç›´æ¥åœ¨ VMware çš„é‚£ä¸ªå°çª—å£é‡Œæ•²ä»£ç ï¼
    1. åœ¨ Ubuntu é‡Œå®‰è£… SSHï¼š`sudo apt install openssh-server`ã€‚
    2. åœ¨ Windows å®¿ä¸»æœºä¸Šä½¿ç”¨ **Tabby**ã€**MobaXterm** æˆ– **VS Code** é€šè¿‡ SSH è¿æ¥åˆ°è™šæ‹Ÿæœºã€‚
    *   *ä¼˜åŠ¿ï¼š* **å¤åˆ¶ç²˜è´´éå¸¸ä¸æ»‘**ï¼Œå¯ä»¥åˆ†å±ä¸€è¾¹çœ‹æ‰‹å†Œä¸€è¾¹ç²˜å‘½ä»¤ï¼Œå¯ä»¥ä¿å­˜è¶…é•¿æ»šåŠ¨è®°å½•æ–¹ä¾¿æŠ¥é”™æ’æŸ¥ã€‚

### 5. åˆ¶ä½œâ€œå¿«ç…§ç‚¹â€ (Snapshot Strategy)
è¿™æ˜¯è™šæ‹Ÿæœºæœ€å¤§çš„ä»·å€¼ã€‚å»ºè®®åœ¨ä»¥ä¸‹èŠ‚ç‚¹å…³æœºåˆ¶ä½œå¿«ç…§ï¼š
1.  **Clean Roomï¼š** Ubuntu åˆšè£…å¥½ï¼Œä¾èµ–åŒ…è£…å®Œï¼Œ`/bin/sh` å·²åˆ‡æ¢ï¼Œæºç åŒ…å·²ä¸‹å¥½ã€‚
2.  **Tools Readyï¼š** ç¬¬ 5 ç« ï¼ˆä¸´æ—¶å·¥å…·é“¾ Pass 1ï¼‰ç»“æŸã€‚
3.  **Chroot Readyï¼š** è¿›å…¥ `chroot` ç¯å¢ƒå‰ï¼ˆç¬¬ 6 ç« æœ«å°¾ï¼‰ã€‚
4.  **Final Systemï¼š** ç¬¬ 8 ç« åŸºæœ¬ç³»ç»Ÿå®‰è£…å®Œæ¯•ï¼Œè¿˜æ²¡åŠ¨å†…æ ¸å’Œå¼•å¯¼å‰ã€‚



### 6. ç»ˆæé¿å‘ï¼š$LFS ç¯å¢ƒå˜é‡
åœ¨ VMware é‡Œæ“ä½œæ—¶ï¼Œæœ€æ€•æ–­å¼€è¿æ¥å `$LFS` å˜é‡ä¸¢å¤±ã€‚
*   **æ“ä½œå»ºè®®ï¼š** æ— è®ºæ˜¯åœ¨å®¿ä¸»æœºçš„ `.bashrc` è¿˜æ˜¯å½“å‰ä¼šè¯ï¼Œä¸€å®šè¦åå¤ç¡®è®¤ `echo $LFS` æœ‰è¾“å‡ºï¼ˆé€šå¸¸æ˜¯ `/mnt/lfs`ï¼‰ã€‚å¦‚æœè¿™ä¸ªå˜é‡ç©ºäº†ä½ è¿˜æ‰§è¡Œäº† `rm -rf $LFS/tools`ï¼Œä½ å¯èƒ½ä¼šæŠŠå®¿ä¸»æœºçš„æ ¹ç›®å½•åˆ æ‰ã€‚

**æ€»ç»“ä½ çš„æ¸©åºŠæ¸…å•ï¼š**
1. Ubuntu 24.04 (NATç½‘ç»œ)
2. ç‹¬ç«‹çš„ 60G åˆ†åŒºç”¨äº LFS
3. å…³é—­ Dash æ”¹ç”¨ Bash
4. SSD + å¤§å†…å­˜ + SSH è¿æ¥
5. ä¸¥æ ¼æ‰§è¡Œç‰ˆæœ¬æ£€æŸ¥è„šæœ¬ (`version-check.sh`)

å‡†å¤‡å¥½è¿™äº›ï¼Œä½ å°±å·²ç»æˆåŠŸäº† 30%ï¼å‰©ä¸‹çš„å°±æ˜¯è€ƒéªŒè€å¿ƒçš„æ—¶å€™äº†ã€‚



åœ¨ VMware Workstation çš„â€œæ–°å»ºè™šæ‹Ÿæœºå‘å¯¼â€ä¸­ï¼Œé€‰æ‹© **â€œè‡ªå®šä¹‰ï¼ˆé«˜çº§ï¼‰â€** ï¼Œæ˜¯æ‰“é€  LFS å®Œç¾ç¯å¢ƒçš„ç¬¬ä¸€æ­¥ã€‚


### 1. ç¡¬ä»¶å…¼å®¹æ€§ä¸å®‰è£…æ¥æº
*   **ç¡¬ä»¶ç‰ˆæœ¬ï¼š**  Workstation 17.5
*   **å®‰è£…æ¥æºï¼š** **â€œç¨åå®‰è£…æ“ä½œç³»ç»Ÿâ€**ã€‚

### 2. æ“ä½œç³»ç»Ÿé€‰æ‹©
*   **ç‰ˆæœ¬ï¼š** **Linux -> Ubuntu 64-bit** (å‡è®¾ä½ ç”¨ Ubuntu åšå®¿ä¸»æœº)ã€‚

### 3. å¤„ç†å™¨ä¸å†…å­˜ï¼ˆæ€§èƒ½æ ¸å¿ƒï¼‰
*   **å¤„ç†å™¨ï¼š** **å¤„ç†å™¨æ•°é‡1 ä¸ªï¼Œæ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡4 æˆ– 8 ä¸ª**ã€‚
    *   *æŠ€å·§ï¼š* åœ¨â€œè™šæ‹ŸåŒ–å¼•æ“â€é‡Œï¼Œ**å‹¾é€‰â€œè™šæ‹ŸåŒ– Intel VT-x/EPT æˆ– AMD-V/RVIâ€**ã€‚è¿™æœ‰åŠ©äºæå‡ç¼–è¯‘å™¨åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹çš„æ‰§è¡Œæ•ˆç‡ã€‚
*   **å†…å­˜ï¼š** **8GB æˆ–æ›´é«˜**ã€‚
    
### 4. ç½‘ç»œç±»å‹
*   **ç½‘ç»œï¼š** **NAT**ã€‚
### 5. æ§åˆ¶å™¨ä¸ç£ç›˜ç±»å‹ï¼ˆå½±å“ IO é€Ÿåº¦ï¼‰
*   **I/O æ§åˆ¶å™¨ç±»å‹ï¼š** é»˜è®¤å³å¯
*   **è™šæ‹Ÿç£ç›˜ç±»å‹ï¼š** **å¼ºçƒˆå»ºè®®é€‰æ‹© NVMe**ã€‚
    *   *ç†ç”±ï¼š* LFS ç¼–è¯‘æ¶‰åŠæµ·é‡å°æ–‡ä»¶è¯»å†™ï¼ŒNVMe æ¨¡æ‹Ÿåè®®æ¯”ä¼ ç»Ÿçš„ SCSI æˆ– IDE å»¶è¿Ÿæ›´ä½ï¼Œåœ¨ SSD ä¸Šè¿è¡Œé€Ÿåº¦æ›´å¿«ã€‚

### 6. ç£ç›˜ç©ºé—´ä¸å­˜å‚¨æ–¹å¼
*   **ç£ç›˜å®¹é‡ï¼š** **100GB**ã€‚
*   **å­˜å‚¨é€‰é¡¹ï¼š** é€‰ **â€œå°†è™šæ‹Ÿç£ç›˜å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶â€**ã€‚
    *   *ç†ç”±ï¼š* è™½ç„¶æ‹†åˆ†å¤šä¸ªæ–‡ä»¶æ–¹ä¾¿ç§»åŠ¨ï¼Œä½†å•æ–‡ä»¶åœ¨å¤„ç†å¤§æ‰¹é‡ç¼–è¯‘ä»»åŠ¡ï¼ˆå¦‚ GCCï¼‰æ—¶ï¼Œæ€§èƒ½æ¯”æ‹†åˆ†æ–‡ä»¶é«˜çº¦ 5%-10%ã€‚
    *   **ä¸è¦å‹¾é€‰** â€œç«‹å³åˆ†é…æ‰€æœ‰ç£ç›˜ç©ºé—´â€ï¼Œè¿™ä¼šæµªè´¹å®¿ä¸»æœºç©ºé—´ä¸”ä¸æå‡æ€§èƒ½ï¼ŒåŠ¨æ€å¢é•¿å³å¯ã€‚

---

### 7. å¼•å¯¼æ–¹å¼ï¼ˆæœ€é‡è¦çš„ä¸€æ­¥ï¼ï¼‰
åœ¨å‘å¯¼å®Œæˆå‰ï¼Œç‚¹å‡» **â€œè‡ªå®šä¹‰ç¡¬ä»¶â€** -> **â€œé€‰é¡¹â€** é€‰é¡¹å¡ -> **â€œé«˜çº§â€**ï¼š
*   **å›ºä»¶ç±»å‹ï¼š** é€‰ **BIOS**ï¼Œ**ä¸è¦é€‰ UEFI**ã€‚
    *   *ç†ç”±ï¼š* å¯¹äº LFS åˆå­¦è€…ï¼Œé…ç½® **BIOS (Legacy) ç‰ˆçš„ GRUB** è¦æ¯”é…ç½® UEFI ç®€å• 10 å€ã€‚UEFI éœ€è¦åˆ›å»ºé¢å¤–çš„ EFI åˆ†åŒºã€æŒ‚è½½ç‰¹æ®Šçš„å˜é‡æ–‡ä»¶ç³»ç»Ÿï¼Œææ˜“å‡ºé”™å¯¼è‡´ç³»ç»Ÿæ— æ³•å¯åŠ¨ã€‚

---

### 8. â€œåŒç¡¬ç›˜â€é«˜çº§è¿›é˜¶
å¦‚æœä½ æƒ³è®©ä½ çš„ LFS ç¯å¢ƒæå…¶ä¸“ä¸šä¸”å®‰å…¨ï¼Œå¯ä»¥åœ¨å‘å¯¼ç»“æŸåï¼Œ**å†æ·»åŠ ä¸€å—ç¡¬ç›˜**ï¼š
1.  **ç¡¬ç›˜ 1 (40GB)ï¼š** è£… Ubuntu å®¿ä¸»æœºã€‚
2.  **ç¡¬ç›˜ 2 (60GB)ï¼š** ä¸“é—¨ç”¨äº LFS ä»»åŠ¡ã€‚
    *   *è¿™æ ·åšçš„å¥½å¤„ï¼š*
        *   åœ¨ LFS æ‰‹å†Œç¬¬ 2 ç« åˆ†åŒºæ—¶ï¼Œä½ ç›´æ¥å¯¹ `/dev/sdb` ä¸‹æ‰‹ï¼Œç»ä¸ä¼šè¯¯ä¼¤å®¿ä¸»æœºçš„ç³»ç»Ÿåˆ†åŒºã€‚
        *   å¦‚æœä½  LFS åšåºŸäº†ï¼Œç›´æ¥æŠŠè¿™å—â€œè™šæ‹Ÿç¡¬ç›˜â€åˆ äº†é‡å»ºï¼Œå®¿ä¸»æœºé‡Œçš„ä¸‹è½½å¥½çš„æºç å’Œæ–‡æ¡£éƒ½åœ¨ã€‚

### 9. æ˜¾å¡ä¸æ˜¾ç¤º
*   **åŠ é€Ÿ 3D å›¾å½¢ï¼š** **å…³æ‰**ã€‚
    *   *ç†ç”±ï¼š* ç¼–è¯‘ LFS çº¯é  CPUï¼Œå¼€å¯ 3D åŠ é€Ÿåè€Œä¼šæ¶ˆè€—å®¿ä¸»æœºçš„æ˜¾å¡èµ„æºï¼Œç”šè‡³å¯¼è‡´ VMware çª—å£å¶å°”å¡æ­»ã€‚



ä½ çš„ç”µè„‘é…ç½®éå¸¸å¼ºæ‚ï¼ˆ**i5-13600KF + 32GB é«˜é¢‘å†…å­˜ + é¡¶çº§ PCIe 4.0 SSD**ï¼‰ï¼Œè¿™ç®€ç›´æ˜¯è·‘ LFS çš„â€œç¥æœºâ€ã€‚13600KF çš„ 14 æ ¸ 20 çº¿ç¨‹é…åˆ 6800MT/s çš„å†…å­˜ï¼Œå¯ä»¥æå¤§åœ°ç¼©çŸ­åŸæœ¬æ¯ç‡¥çš„ç¼–è¯‘æ—¶é—´ã€‚

é’ˆå¯¹ä½ çš„ç¡¬ä»¶ï¼Œæˆ‘ç»™å‡ºä»¥ä¸‹**æœ€å¼ºæ€§èƒ½ä¼˜åŒ–é…ç½®å»ºè®®**ï¼š

### 1. è™šæ‹Ÿæœºç¡¬ä»¶åˆ†é…å»ºè®®
æ‰“å¼€ VMware Workstation çš„è™šæ‹Ÿæœºè®¾ç½®ï¼š

*   **å¤„ç†å™¨ (CPU)ï¼š**
    *   **æ ¸å¿ƒæ•°ï¼š** åˆ†é… **12 ä¸ªé€»è¾‘å¤„ç†å™¨**ï¼ˆæˆ– 1 ä¸ªæ’æ§½ï¼Œ12 ä¸ªå†…æ ¸ï¼‰ã€‚
   
   
*   **å†…å­˜ (RAM)ï¼š**
    *   åˆ†é… **16 GB**ã€‚
    
*   **ç£ç›˜ (Disk)ï¼š**
    *   **ä½ç½®ï¼šå®‰è£…åœ¨ç£ç›˜ 1 (R: ç›˜ - TiPro7000) ä¸Š**
    

### 2. æ ¸å¿ƒä¼˜åŒ–ï¼šåˆ©ç”¨â€œå¤§å°æ ¸â€æ¶æ„ (Intel 13th Gen)
ä½ çš„ 13600KF æ˜¯å¼‚æ„æ¶æ„ï¼ˆPæ ¸æ€§èƒ½å¼ºï¼ŒEæ ¸æ•ˆç‡é«˜ï¼‰ã€‚ä¸ºäº†é˜²æ­¢ Windows æŠŠå¤æ‚çš„ç¼–è¯‘ä»»åŠ¡ä¸¢ç»™â€œå°æ ¸ï¼ˆE-coreï¼‰â€è·‘ï¼š

1.  **Windows èƒ½æºè®¾ç½®ï¼š** åœ¨ Windows æ§åˆ¶é¢æ¿é‡Œï¼Œå°†ç”µæºè®¡åˆ’æ”¹ä¸º**â€œé«˜æ€§èƒ½â€**ã€‚
2.  **VMware è®¾ç½®ï¼š** ç¡®ä¿åœ¨ VMware è®¾ç½®ä¸­å‹¾é€‰äº† **â€œè™šæ‹ŸåŒ– Intel VT-x/EPTâ€**ã€‚
3.  **ç¼–è¯‘å‚æ•° (æœ€é‡è¦)ï¼š** åœ¨ LFS æ‰‹å†Œé‡Œæ‰§è¡Œ `make` å‘½ä»¤æ—¶ï¼Œè¯·ä½¿ç”¨ `-j` å‚æ•°ã€‚
    *   å»ºè®®å‘½ä»¤ï¼š`make -j12`
    *   è¿™ä¼šè°ƒç”¨ä½ åˆ†é…ç»™è™šæ‹Ÿæœºçš„å…¨éƒ¨ 12 ä¸ªæ ¸å¿ƒåŒæ—¶ç¼–è¯‘ã€‚åŸæœ¬è¦è·‘ 1 å°æ—¶çš„åŒ…ï¼Œå¯èƒ½ 10 åˆ†é’Ÿå°±å®Œäº‹äº†ã€‚

### 3. å®¿ä¸»æœºä¸è™šæ‹Ÿæœºç³»ç»Ÿå»ºè®®
*   **å®¿ä¸»æœºç³»ç»Ÿï¼š** å»ºè®®ä½¿ç”¨ **Ubuntu 24.04 LTS** (Noble Numbat)ã€‚
    *   **ç†ç”±ï¼š** å®ƒæ˜¯æœ€æ–°çš„é•¿æœŸæ”¯æŒç‰ˆï¼Œå†…æ ¸éå¸¸æ–°ï¼Œèƒ½å®Œç¾è¯†åˆ«ä½ çš„ 13 ä»£ CPU çš„å¤§å°æ ¸è°ƒåº¦ï¼Œå¯¹ PCIe 4.0 SSD çš„é©±åŠ¨æ”¯æŒä¹Ÿæœ€å¥½ã€‚
*   **ç½‘ç»œï¼š** æ—¢ç„¶ä½ çš„ç¡¬ä»¶å¾ˆå¼ºï¼Œå»ºè®®ä½¿ç”¨ **æ¡¥æ¥æ¨¡å¼ (Bridged)**ï¼ˆå¦‚æœè·¯ç”±å™¨æ”¯æŒï¼‰æˆ–è€… **NAT**ã€‚

### 4. é’ˆå¯¹ LFS æµç¨‹çš„é…ç½®ç»†èŠ‚
*   **ç£ç›˜åˆ†åŒºï¼ˆåœ¨è™šæ‹Ÿæœºå†…ï¼‰ï¼š**
*   **å¼•å¯¼æ–¹å¼ï¼š** å†æ¬¡å¼ºè°ƒï¼Œ**å‘å¯¼é‡Œé€‰ BIOS (Legacy)**ã€‚

### 5. é¢„ä¼°ç¼–è¯‘é€Ÿåº¦
æœ‰äº†è¿™å¥—é…ç½®ï¼š
*   **Binutils/GCC Pass 1ï¼š** å¤§çº¦ 5-10 åˆ†é’Ÿã€‚
*   **Glibcï¼š** å¤§çº¦ 10-15 åˆ†é’Ÿã€‚
*   **æ•´ä¸ª LFS åŸºæœ¬ç³»ç»Ÿï¼š** å¦‚æœæ“ä½œæµç•…ä¸”ä¸æŠ¥é”™ï¼Œä½ å¯ä»¥åœ¨ **4-6 å°æ—¶** å†…è·‘å®ŒåŸæœ¬åˆ«äººéœ€è¦ä¸€æ•´å¤©çš„æµç¨‹ã€‚

é’ˆå¯¹ä½ çš„ç¡¬ä»¶é…ç½®å’Œ LFS çš„ä»»åŠ¡éœ€æ±‚ï¼Œ**æœ€å»ºè®®çš„é€‰æ‹©æ˜¯ï¼šç›´æ¥è·³è¿‡ LSI Logicï¼Œåœ¨ç£ç›˜ç±»å‹ä¸€æ­¥é€‰æ‹© NVMeï¼›å¦‚æœéè¦é€‰ SCSI æ§åˆ¶å™¨ï¼Œåˆ™é€‰ LSI Logic SASã€‚**

ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ·±åº¦åˆ†æï¼Œå¸®ä½ åšå†³å®šï¼š

### 1. ä¸ºä»€ä¹ˆæˆ‘æ›´æ¨èä½ é€‰ â€œNVMeâ€ (è€Œä¸æ˜¯ LSI Logic)ï¼Ÿ
ç”±äºä½ çš„ç‰©ç†ç¡¬ç›˜æ˜¯**è‡´æ€ TiPro7000 (PCIe 4.0 SSD)**ï¼Œåœ¨ VMware ä¸­å°†è™šæ‹Ÿç£ç›˜è®¾ç½®ä¸º **NVMe** æ˜¯æœ€å¥‘åˆç¡¬ä»¶çš„é€‰æ‹©ã€‚

*   **æ€§èƒ½æœ€å¤§åŒ–ï¼š** NVMe åè®®æ˜¯ä¸º SSD è®¾è®¡çš„ï¼Œç›¸æ¯”è€æ—§çš„ SCSI åè®®ï¼Œå®ƒçš„å»¶è¿Ÿæ›´ä½ï¼Œå¹¶è¡Œå¤„ç†èƒ½åŠ›æ›´å¼ºã€‚åœ¨ LFS æ•°ä¸‡æ¬¡çš„å°æ–‡ä»¶è¯»å†™ä¸­ï¼ŒNVMe èƒ½èŠ‚çœä¸å°‘æ—¶é—´ã€‚
*   **å…¼å®¹æ€§ï¼š** ç°ä»£ Linux å†…æ ¸ï¼ˆLFS 12.x ä½¿ç”¨çš„ 6.x å†…æ ¸ï¼‰å¯¹ NVMe æœ‰å®Œç¾çš„å†…ç½®æ”¯æŒã€‚
*   **å”¯ä¸€éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š** åœ¨ LFS æ‰‹å†Œé‡Œï¼Œå¤§éƒ¨åˆ†ä¾‹å­ä¼šå†™ `/dev/sda`ã€‚å¦‚æœä½ é€‰äº† NVMeï¼Œä½ çš„ç£ç›˜è®¾å¤‡åä¼šå˜æˆ **`/dev/nvme0n1`**ã€‚ä½ åœ¨åˆ†åŒºã€æŒ‚è½½ã€å†™ `fstab` å’Œé…ç½® `GRUB` æ—¶ï¼Œéœ€è¦æŠŠæ‰€æœ‰çš„ `sda` æ›¿æ¢æˆ `nvme0n1`ã€‚


æ—¢ç„¶ä½ å·²ç»é€‰æ‹©äº† **NVMe**ï¼Œæ¥ä¸‹æ¥åœ¨â€œé€‰æ‹©ç£ç›˜â€è¿™ä¸€æ­¥ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹å»ºè®®æ“ä½œï¼š

### 1. ç£ç›˜é€‰æ‹©ï¼šåˆ›å»ºæ–°è™šæ‹Ÿç£ç›˜ (Create a new virtual disk)
*   **ç†ç”±ï¼š** è¿™æ˜¯æœ€å®‰å…¨ã€æœ€çµæ´»çš„åšæ³•ã€‚å®ƒä¼šåœ¨ä½ çš„ç‰©ç†ç¡¬ç›˜ä¸Šåˆ›å»ºä¸€ä¸ª `.vmdk` æ–‡ä»¶ã€‚å³ä½¿ LFS è¿‡ç¨‹ä¸­åˆ†åŒºæ“ä½œå¤±è¯¯ï¼Œä¹Ÿåªä¼šæŸåè¿™ä¸ªè™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼Œç»ä¸ä¼šå½±å“ä½ ç‰©ç†ç¡¬ç›˜ä¸Šçš„ Windows æ•°æ®ã€‚

### 2. æœ€å¤§ç£ç›˜å¤§å°ï¼š100 GB
*   **ç†ç”±ï¼š** LFS æœ¬èº«ä¸å ç”¨è¿™ä¹ˆå¤šç©ºé—´ï¼Œä½†åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼ˆå°¤å…¶æ˜¯ GCC å’Œæµ‹è¯•å¥—ä»¶ï¼‰ï¼Œä¼šäº§ç”Ÿæµ·é‡çš„ä¸´æ—¶æ–‡ä»¶ã€‚100GB å¯ä»¥è®©ä½ ä»å®¹åœ°å­˜æ”¾å¤šä¸ªç‰ˆæœ¬çš„æºç åŒ…å’Œç¼–è¯‘äº§ç‰©ï¼Œä¸ç”¨æ‹…å¿ƒç©ºé—´ä¸è¶³å¯¼è‡´ç¼–è¯‘ä¸­æ–­ã€‚

### 3. æ ¸å¿ƒé€‰æ‹©ï¼šå°†è™šæ‹Ÿç£ç›˜å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶ (Store virtual disk as a single file)
*   **å¼ºçƒˆæ¨èï¼š** é€‰è¿™ä¸ªã€‚
*   **ç†ç”±ï¼š** 
    *   ä½ çš„ **TiPro7000** éšæœºè¯»å†™éå¸¸å¼ºï¼Œå•ä¸ªå¤§æ–‡ä»¶åœ¨è¿›è¡Œé«˜å¼ºåº¦ç¼–è¯‘æ—¶ï¼Œå…¶ç£ç›˜ IO æ•ˆç‡æ¯”â€œæ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶â€æ›´é«˜ã€‚
    *   è™½ç„¶æ‹†åˆ†æ–‡ä»¶æ–¹ä¾¿ç§»åŠ¨åˆ°å…¶ä»–ç”µè„‘ï¼Œä½† LFS æ˜¯åœ¨æœ¬åœ°è·‘çš„æ€§èƒ½ä»»åŠ¡ï¼Œ**å•æ–‡ä»¶æ€§èƒ½æ›´å¥½**ã€‚

### 4. ä¸è¦å‹¾é€‰ï¼šç«‹å³åˆ†é…æ‰€æœ‰ç£ç›˜ç©ºé—´ (Allocate all disk space now)
*   **ç†ç”±ï¼š** ç°åœ¨ SSD çš„æ€§èƒ½å·²ç»éå¸¸å¼ºï¼ŒåŠ¨æ€å¢é•¿ï¼ˆç”¨å¤šå°‘å å¤šå°‘ï¼‰å’Œç«‹å³åˆ†é…ï¼ˆç›´æ¥å æ»¡100Gï¼‰çš„æ€§èƒ½å·®è·å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚æ²¡å¿…è¦ä¸€ä¸Šæ¥å°±æµªè´¹ç‰©ç†ç¡¬ç›˜ 100GB çš„ç©ºé—´ã€‚

---

### 5. å…³é”®åŠ¨ä½œï¼šå­˜å‚¨ä½ç½® (Specify Disk File)
åœ¨ç‚¹å‡»å®Œæˆå‰ï¼Œå‘å¯¼ä¼šé—®ä½ ç£ç›˜æ–‡ä»¶ `.vmdk` å­˜æ”¾åœ¨å“ªé‡Œï¼š
*   **æ“ä½œï¼š** ç‚¹å‡»â€œæµè§ˆâ€ï¼Œ**åŠ¡å¿…é€‰æ‹©ä½ çš„ R: ç›˜ (è‡´æ€ TiPro7000)**ã€‚
*   **è·¯å¾„ç¤ºä¾‹ï¼š** `R:\VMware\Ubuntu_LFS\Ubuntu_LFS.vmdk`

---

### 6. æœ€ç»ˆç¡®è®¤ï¼šè®¾å¤‡åç§°çš„å˜åŒ–
å› ä¸ºä½ é€‰äº† **NVMe**ï¼Œè¯·åœ¨è„‘å­é‡Œï¼ˆæˆ–è€…ç¬”è®°é‡Œï¼‰è®°ä¸‹è¿™ä¸ªå…³é”®å˜åŒ–ï¼Œè¿™å°†è´¯ç©¿ä½ çš„æ•´ä¸ª LFS è¿‡ç¨‹ï¼š

*   **ä½ é€‰äº† NVMeï¼š** ä½ çš„ç£ç›˜è®¾å¤‡åå°†æ˜¯ **`/dev/nvme0n1`**ã€‚
    *   ç¬¬ä¸€åˆ†åŒºï¼š`/dev/nvme0n1p1`
    *   ç¬¬äºŒåˆ†åŒºï¼š`/dev/nvme0n1p2`
    *   ç¬¬ä¸‰åˆ†åŒºï¼š`/dev/nvme0n1p3`

**è¿™å°±æ˜¯ LFS çš„ç¬¬ä¸€è¯¾ï¼š** æ‰€æœ‰çš„æ‰‹å†Œå‘½ä»¤å¦‚æœå†™çš„æ˜¯ `sda`ï¼Œä½ éƒ½è¦æ ¹æ®ä½ çš„ç¡¬ä»¶æƒ…å†µï¼ˆNVMeï¼‰è‡ªåŠ¨æ›¿æ¢ä¸º `nvme0n1`ã€‚



`ubuntu-24.04.3-desktop-amd64` æ˜¯ç›®å‰æœ€ç†æƒ³çš„ LFS å®¿ä¸»æœºç³»ç»Ÿä¹‹ä¸€ã€‚

### 1. ä¸ºä»€ä¹ˆè¿™ä¸ªç‰ˆæœ¬å¾ˆå¥½ï¼Ÿ
*   **å†…æ ¸ç‰ˆæœ¬æ–°ï¼š** Ubuntu 24.04 ä½¿ç”¨çš„æ˜¯ Linux 6.8+ å†…æ ¸ã€‚ç”±äºä½ ä½¿ç”¨çš„æ˜¯ 13 ä»£é…·ç¿ï¼ˆå¤§å°æ ¸æ¶æ„ï¼‰å’Œ NVMe ç¡¬ç›˜ï¼Œæ–°å†…æ ¸èƒ½æä¾›æœ€å®Œç¾çš„ç¡¬ä»¶è°ƒåº¦å’Œæ€§èƒ½é‡Šæ”¾ã€‚
*   **å·¥å…·é“¾åŒ¹é…ï¼š** æœ€æ–°çš„ LFS æ‰‹å†Œï¼ˆå¦‚ 12.x ç‰ˆæœ¬ï¼‰è¦æ±‚çš„å®¿ä¸»æœºè½¯ä»¶ç‰ˆæœ¬ï¼ˆå¦‚ GCC, Glibc, Binutilsï¼‰ï¼ŒUbuntu 24.04 è‡ªå¸¦çš„ç‰ˆæœ¬éƒ½å·²ç»è¶³å¤Ÿæ–°ï¼Œç”šè‡³è¶…å‰ã€‚è¿™èƒ½é€šè¿‡ LFS åˆæœŸæœ€ä¸¥è‹›çš„ `version-check.sh` æ£€æŸ¥ã€‚

### 3. ç»™ä½ çš„åˆ†åŒºå°å»ºè®®ï¼ˆå®‰è£… Ubuntu æ—¶ï¼‰
æ—¢ç„¶ä½ è¦åœ¨è¿™ä¸ª Ubuntu è™šæ‹Ÿæœºé‡Œåš LFSï¼š
1.  **è‡ªåŠ¨å®‰è£… vs æ‰‹åŠ¨åˆ†åŒºï¼š** å»ºè®®åœ¨å®‰è£… Ubuntu æ—¶é€‰æ‹©â€œæ‰‹åŠ¨åˆ†åŒºï¼ˆSomething elseï¼‰â€ã€‚
2.  **ç»™å®¿ä¸»æœºï¼ˆUbuntuï¼‰åˆ†é…ï¼š** 40GB å·¦å³ï¼ŒæŒ‚è½½ç‚¹ä¸º `/`ã€‚
3.  **ç•™ç»™ LFS çš„ç©ºé—´ï¼š** å‰©ä¸‹çš„ 60GB ç©ºé—´ï¼Œ**æš‚æ—¶ä¸è¦æ ¼å¼åŒ–ï¼Œä¹Ÿä¸è¦æŒ‚è½½**ã€‚ç­‰ Ubuntu è£…å¥½åï¼Œä½ åœ¨ LFS çš„ç¬¬äºŒç« æ‰‹åŠ¨ç”¨ `fdisk` åˆ†åŒºï¼Œå¹¶æŒ‚è½½åˆ° `/mnt/lfs`ã€‚è¿™æ ·æœ€ç¬¦åˆ LFS æ‰‹å†Œçš„æ•™å­¦æµç¨‹ã€‚

è¿™ä¸ªé—®é¢˜éå¸¸å¸¸è§ï¼Œä¸ç”¨ç´§å¼ ã€‚å®ƒçš„æ„æ€æ˜¯ **VMware å°è¯•å»è¿æ¥è™šæ‹Ÿå…‰é©±ï¼ˆCD/DVDï¼‰ï¼Œä½†åœ¨ä½ æŒ‡å®šçš„ä½ç½®ï¼ˆæˆ–è€…ç‰©ç†å…‰é©±é‡Œï¼‰æ²¡æ‰¾åˆ°ä¸œè¥¿ã€‚**

å¯¹äºä½ è¦å®‰è£… Ubuntu æ¥è¯´ï¼Œè¿™é€šå¸¸æ˜¯å› ä¸ºè™šæ‹Ÿæœºçš„å…‰é©±è·¯å¾„è®¾ç½®ä¸å¯¹ï¼Œæˆ–è€…å®ƒé»˜è®¤å»è¯»ä½ ç”µè„‘çš„ç‰©ç†å…‰ç›˜æ§½äº†ã€‚

### è§£å†³æ–¹æ³•ï¼š

1.  **ç‚¹å‡»â€œå¦â€**ï¼Œå…ˆå…³æ‰è¿™ä¸ªæŠ¥é”™å¼¹çª—ã€‚
2.  åœ¨ VMware ä¸»ç•Œé¢ï¼Œå³é”®ç‚¹å‡»ä½ çš„è™šæ‹Ÿæœºï¼Œé€‰æ‹© **â€œè®¾ç½® (Settings)â€**ã€‚
3.  åœ¨å·¦ä¾§ç¡¬ä»¶åˆ—è¡¨é‡Œæ‰¾åˆ° **â€œCD/DVD (SATA)â€**ï¼ˆé€šå¸¸å¯¹åº”çš„å°±æ˜¯æŠ¥é”™é‡Œçš„ `sata 0:1`ï¼‰ã€‚
4.  åœ¨å³ä¾§çš„â€œè¿æ¥â€åŒºåŸŸï¼š
    *   **å‹¾é€‰** â€œå¯åŠ¨æ—¶è¿æ¥ (Connect at power on)â€ã€‚
    *   **é€‰æ‹©** â€œä½¿ç”¨ ISO æ˜ åƒæ–‡ä»¶ (Use ISO image file)â€ã€‚
    *   ç‚¹å‡»â€œæµè§ˆâ€ï¼Œé€‰ä¸­ä½ ä¸‹è½½å¥½çš„é‚£ä¸ª **`ubuntu-24.04.3-desktop-amd64.iso`**ã€‚
5.  ç‚¹å‡»ç¡®å®šã€‚
6.  **é‡æ–°å¼€å¯è™šæ‹Ÿæœºã€‚**

---


### é¢å¤–çš„å°æç¤ºï¼ˆå®‰è£… Ubuntu æ—¶ï¼‰ï¼š
å½“ä½ æˆåŠŸè¿›å…¥ Ubuntu å®‰è£…ç•Œé¢åï¼š

1.  **é€‰æ‹©è¯­è¨€ï¼š** å»ºè®®é€‰ **English**ï¼ˆåš LFS å»ºè®®å…¨ç¨‹è‹±æ–‡ç¯å¢ƒï¼ŒæŠ¥é”™å¥½æŸ¥ï¼Œä¸­æ–‡è·¯å¾„åœ¨ç»ˆç«¯é‡Œä¼šéå¸¸éº»çƒ¦ï¼‰ã€‚
2.  **é”®ç›˜å¸ƒå±€ï¼š** Chinese æˆ– English(US)ã€‚
3.  **å®‰è£…é€‰é¡¹ï¼š** é€‰ **"Interactive installation"** (äº¤äº’å¼å®‰è£…)ï¼Œç„¶åé€‰ **"Minimal installation"** (æœ€å°å®‰è£…)ã€‚
    *   *ç†ç”±ï¼š* æœ€å°å®‰è£…ä¸å¸¦åŠå…¬è½¯ä»¶å’Œåƒåœ¾æ’ä»¶ï¼Œç³»ç»Ÿæœ€çº¯å‡€ï¼Œéå¸¸é€‚åˆåš LFS çš„å®¿ä¸»æœºã€‚
4.  **ç£ç›˜åˆ†åŒºï¼ˆé‡è¦ï¼‰ï¼š**
    *   å› ä¸ºä½ ç»™äº† 100GBï¼Œå¦‚æœä½ æ˜¯æ–°æ‰‹ï¼Œå®‰è£…å‘å¯¼é—®ä½ æ—¶ï¼Œé€‰ **"Erase disk and install Ubuntu"** (æ“¦é™¤æ•´ä¸ªç£ç›˜å¹¶å®‰è£…) æ˜¯æœ€ç®€å•çš„ã€‚
    *   å®ƒä¼šè‡ªåŠ¨å¸®ä½ åˆ†å¥½åŒºã€‚ç­‰è¿›ç³»ç»Ÿåï¼Œæˆ‘ä»¬å†ç”¨å·¥å…·ä»è¿™ 100GB é‡Œâ€œå‰²â€å‡ºä¸€å—åœ°ç»™ LFSã€‚

**ç°åœ¨å»è®¾ç½®é‡Œé‡æ–°æŒ‡å®š ISO è·¯å¾„å§ï¼ŒUbuntu çš„ç´«è‰²å®‰è£…ç•Œé¢é©¬ä¸Šå°±ä¼šå‡ºç°äº†ï¼**


*è¿›å…¥äº†Ubuntuå®‰è£…å‘å¯¼*

æ­å–œï¼ä½ å·²ç»è¿ˆå‡ºäº† LFS ä¹‹æ—…çš„ç¬¬ä¸€æ­¥ã€‚

é’ˆå¯¹ä½ çš„é…ç½®ï¼ˆi5-13600KF + NVMe è™šæ‹Ÿç£ç›˜ï¼‰å’Œ **LFS å®éªŒéœ€æ±‚**ï¼Œæˆ‘åœ¨ Ubuntu å®‰è£…å‘å¯¼çš„æ¯ä¸€é¡µéƒ½æœ‰é’ˆå¯¹æ€§çš„å»ºè®®ï¼Œè¯·å¯¹ç…§æ“ä½œï¼š

### 1. è¯­è¨€é€‰æ‹© (Language)
*   **å»ºè®®ï¼š** é€‰ **English**ã€‚
*   **ç†ç”±ï¼š** **æå…¶é‡è¦ï¼** åš LFS è¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™ï¼Œè‹±æ–‡æŠ¥é”™ä¿¡æ¯å¯ä»¥ç›´æ¥åœ¨ Google/StackOverflow æœåˆ°ã€‚ä¸­æ–‡ç¯å¢ƒåœ¨ç»ˆç«¯é‡Œå¯èƒ½ä¼šå‡ºç°ä¹±ç ï¼Œä¸”è·¯å¾„åä¸­å¸¦æœ‰â€œä¸‹è½½â€ã€â€œæ–‡æ¡£â€ç­‰ä¸­æ–‡è¯æ±‡ä¼šç»™åç»­ç¼–è¯‘è„šæœ¬å¸¦æ¥å·¨å¤§éº»çƒ¦ã€‚

### 2. é”®ç›˜å¸ƒå±€ (Keyboard Layout)
*   **å»ºè®®ï¼š** English (US)ã€‚

### 3. å®‰è£…ç±»å‹ (Installation Type)
*   **å»ºè®®ï¼š** é€‰ **Minimal Installation** (æœ€å°å®‰è£…)ã€‚
*   **ç†ç”±ï¼š** æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªèƒ½è·‘ç¼–è¯‘å™¨çš„å®¿ä¸»æœºç¯å¢ƒï¼Œä¸éœ€è¦ LibreOfficeã€æ¸¸æˆæˆ–åª’ä½“æ’­æ”¾å™¨ã€‚è¿™èƒ½èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå¹¶å‡å°‘å®¿ä¸»æœºåå°è¿›ç¨‹å¯¹ CPU çš„å ç”¨ã€‚

### 4. å…¶å®ƒé€‰é¡¹ (Other Options)
*   **å»ºè®®ï¼š** å‹¾é€‰ **Install third-party software for graphics and Wi-Fi...**ã€‚
*   **ç†ç”±ï¼š** è™½ç„¶æ˜¯è™šæ‹Ÿæœºï¼Œä½†è¿™æœ‰åŠ©äºè‡ªåŠ¨å®‰è£… VMware Tools é©±åŠ¨ï¼Œè®©ä½ çš„å±å¹•åˆ†è¾¨ç‡è‡ªåŠ¨é€‚é…çª—å£å¤§å°ã€‚

### 5. ç£ç›˜è®¾ç½® (Disk Setup) â€”â€” **æœ€å…³é”®çš„ä¸€æ­¥**
ä½ ä¼šçœ‹åˆ°ä¸¤ä¸ªå¤§é€‰é¡¹ï¼Œå»ºè®®æ ¹æ®ä½ çš„ä¿¡å¿ƒç¨‹åº¦é€‰æ‹©ï¼š

*   **æ–¹æ¡ˆ A (ç®€å•æ¨è)ï¼š** é€‰æ‹© **"Erase disk and install Ubuntu"**ã€‚
    *   å‘å¯¼ä¼šè‡ªåŠ¨æ ¼å¼åŒ–æ•´ä¸ª 100GB ç£ç›˜ã€‚
    *   **åç»­æ“ä½œï¼š** ç­‰è£…å®Œç³»ç»Ÿåï¼Œæˆ‘ä»¬åœ¨ Ubuntu é‡Œç”¨ç£ç›˜å·¥å…·ï¼ˆGPartedï¼‰ä»è¿™ 100GB é‡Œâ€œå‰²â€å‡º 60GB ç©ºé—´ç»™ LFSã€‚è¿™å¯¹æ–°æ‰‹æœ€å‹å¥½ï¼Œä¸ä¼šå‡ºé”™ã€‚
*   **æ–¹æ¡ˆ B (ä¸“ä¸šè¿›é˜¶)ï¼š** é€‰æ‹© **"Manual partitioning"** (æ‰‹åŠ¨åˆ†åŒº)ã€‚å¦‚æœä½ æƒ³ç›´æ¥åˆ†å¥½ï¼š
    *   **Partition 1:** ç»™ Ubuntu å®¿ä¸»æœºåˆ†åŒºï¼Œå¤§å° **40GB**ï¼Œæ ¼å¼ **ext4**ï¼ŒæŒ‚è½½ç‚¹ä¸º **/**ã€‚
    *   **Partition 2:** å‰©ä½™çš„ **60GB** ç©ºé—´ï¼Œå…ˆ **ä¿æŒç©ºé—² (Free Space)**ï¼Œæˆ–è€…æ–°å»ºä¸€ä¸ªåˆ†åŒºä½†ä¸è®¾ç½®æŒ‚è½½ç‚¹ã€‚è¿™å—åœ°æ˜¯ç•™ç»™ LFS çš„ã€‚

### 6. è´¦æˆ·è®¾ç½® (Who are you?)
*   **Your name / Computer's name:** éšä¾¿å¡«ï¼Œç®€çŸ­å¥½è®°ï¼ˆå¦‚ `lfs-host`ï¼‰ã€‚
*   **Username:** å»ºè®®ç”¨ç®€å•çš„è‹±æ–‡ï¼ˆå¦‚ `student` æˆ– `user`ï¼‰ã€‚
*   **Password:** è®¾ä¸ªç®€å•çš„ï¼Œå› ä¸ºåœ¨å®‰è£…è½¯ä»¶åŒ…æ—¶ä½ ä¼šé¢‘ç¹è¾“å…¥ `sudo` å‘½ä»¤ã€‚
*   **å‹¾é€‰ï¼š** **"Require my password to log in"**ã€‚

### 7. æ—¶åŒº (Where are you?)
*   é€‰æ‹© **Shanghai**ã€‚

---

### å®‰è£…å¼€å§‹åçš„æ“ä½œï¼š
åœ¨è¿›åº¦æ¡èµ°åŠ¨æ—¶ï¼Œä½ å¯ä»¥ç‚¹å‡»å³ä¸‹è§’çš„ç®­å¤´çœ‹è¯¦ç»†æ—¥å¿—ï¼Œæˆ–è€…è¶ç°åœ¨å»å–æ¯æ°´ã€‚

**è£…å®Œé‡å¯è¿›å…¥æ¡Œé¢åï¼Œè¯·ç«‹åˆ»æ‰§è¡Œè¿™ä¸‰ä»¶äº‹ï¼š**

1.  **å®‰è£… VMware Toolsï¼š** ç¡®ä¿çª—å£å¯ä»¥è‡ªç”±æ‹‰ä¼¸ï¼Œå‰ªè´´æ¿å¯ä»¥å’Œ Windows äº’é€šã€‚
2.  **æ¢æºï¼š** å°† Ubuntu çš„è½¯ä»¶æºæ¢æˆå›½å†…é•œåƒï¼ˆå¦‚é˜¿é‡Œäº‘ã€æ¸…åæºã€è…¾è®¯æºï¼‰ï¼Œè¿™æ ·åé¢è£…ä¾èµ–åŒ…ä¼šé£å¿«ã€‚
    *   *æ“ä½œï¼š* æ‰“å¼€ `Software & Updates` -> `Download from` -> `Other` -> `China` -> é€‰æ‹© `mirrors.aliyun.com`ã€‚
3.  **å…³é—­ Dash æŒ‡å‘ï¼š**
    ```bash
    sudo dpkg-reconfigure dash
    # å¼¹å‡ºèœå•é€‰ No
    ```


*interactive installationè¿˜æ˜¯autoï¼Ÿ*

é€‰æ‹© **Interactive installation**ï¼ˆäº¤äº’å¼å®‰è£…ï¼‰ã€‚

### ç†ç”±ï¼š
*   **Interactive (æ¨è)ï¼š** è¿™æ˜¯æ ‡å‡†çš„äººå·¥å®‰è£…æ¨¡å¼ã€‚å®ƒä¼šä¸€æ­¥æ­¥è¯¢é—®ä½ çš„è¯­è¨€åå¥½ã€æ—¶åŒºã€ç”¨æˆ·åä»¥åŠ**æœ€é‡è¦çš„ç£ç›˜åˆ†åŒº**ã€‚å¯¹äºåš LFS è¿™ç§éœ€è¦ç²¾ç¡®æ§åˆ¶ç¯å¢ƒçš„ä»»åŠ¡ï¼Œè¿™æ˜¯å”¯ä¸€çš„é€‰æ‹©ã€‚
*   **Automated (è‡ªåŠ¨å®‰è£…)ï¼š** è¿™é€šå¸¸æ˜¯ç»™æ•°æ®ä¸­å¿ƒè¿ç»´äººå‘˜æ‰¹é‡éƒ¨ç½²æˆç™¾ä¸Šåƒå°æœåŠ¡å™¨ç”¨çš„ï¼Œå®ƒéœ€è¦ä¸€ä¸ªåä¸º `autoinstall.yaml` çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœä½ é€‰äº†è¿™ä¸ªï¼Œå®ƒå¯èƒ½ä¼šæŒ‰ç…§é»˜è®¤æ¨¡æ¿ç›´æ¥æŠŠç¡¬ç›˜å æ»¡ï¼Œæˆ–è€…æŠ¥é”™å› ä¸ºæ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶ã€‚

---

### ç‚¹å‡» Interactive åçš„åç»­å…³é”®ç‚¹ï¼š

1.  **Selection (é€‰æ‹©æ¨¡å¼)ï¼š**
    *   é€‰ **Default selection** æˆ–è€… **Minimal installation** (æœ€å°å®‰è£…)ã€‚
    *   *å¼ºçƒˆå»ºè®®ï¼š* é€‰ **Minimal installation**ã€‚å®ƒä¼šè®©ä½ çš„ Ubuntu å®¿ä¸»æœºéå¸¸å¹²å‡€ï¼Œåªä¿ç•™ç»ˆç«¯ã€æµè§ˆå™¨ç­‰æ ¸å¿ƒå·¥å…·ï¼Œä¸ä¼šè£…ä¸€å †æ²¡ç”¨çš„åŠå…¬è½¯ä»¶ï¼Œè¿™å¯¹ç¼–è¯‘ LFS è¿™ç§çº¯å‡€ä»»åŠ¡éå¸¸æœ‰åˆ©ã€‚

2.  **Disk Setup (ç£ç›˜è®¾ç½®)ï¼š**
    *   å¦‚æœä½ æƒ³çœäº‹ï¼Œç›´æ¥é€‰ **"Erase disk and install Ubuntu"**ã€‚
    *   æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œå®ƒä¼šæŠŠ 100GB å…¨éƒ¨åˆ†ç»™ Ubuntuã€‚æ²¡å…³ç³»ï¼Œç­‰å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬åœ¨ Ubuntu ç³»ç»Ÿé‡Œç”¨è‡ªå¸¦çš„ç£ç›˜å·¥å…·æŠŠè¿™ 100GB çš„æœ«å°¾â€œåˆ‡â€å‡ºæ¥ 60GB ç»™ LFS å³å¯ã€‚

**æ€»ç»“ï¼šé€‰ Interactiveï¼Œç„¶åä¸€è·¯ Next åˆ°åˆ†åŒºé¡µé¢ã€‚**

default selectionè¿˜æ˜¯extended

é€‰ **Default selection**ã€‚

### ç†ç”±ï¼š
åœ¨ Ubuntu 24.04 çš„æ–°ç‰ˆå®‰è£…ç¨‹åºä¸­ï¼š
*   **Default selection (é»˜è®¤é€‰æ‹©)ï¼š** ç›¸å½“äºä»¥å‰çš„â€œæœ€å°å®‰è£…ï¼ˆMinimal Installationï¼‰â€ã€‚å®ƒåªå®‰è£…æœ€æ ¸å¿ƒçš„å·¥å…·ã€ç½‘é¡µæµè§ˆå™¨å’ŒåŸºç¡€ç»ˆç«¯ã€‚è¿™æ­£æ˜¯åš LFS æœ€éœ€è¦çš„â€”â€”ä¸€ä¸ªå¹²å‡€ã€ä¸è‡ƒè‚¿çš„å®¿ä¸»æœºç¯å¢ƒã€‚
*   **Extended selection (æ‰©å±•é€‰æ‹©)ï¼š** ä¼šå®‰è£…åŒ…æ‹¬ LibreOfficeã€é›·é¸Ÿé‚®ä»¶å®¢æˆ·ç«¯ã€ç”šè‡³ä¸€äº›å°æ¸¸æˆåœ¨å†…çš„å…¨å¥—æ¡Œé¢è½¯ä»¶ã€‚å¯¹äºåš LFS æ¥è¯´ï¼Œè¿™äº›éƒ½æ˜¯å¤šä½™çš„â€œå™ªéŸ³â€ï¼Œè¿˜ä¼šå ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ã€‚

### æ€»ç»“å»ºè®®ï¼š
é€‰ **Default selection**ã€‚
åš LFS å°±åƒåœ¨å®éªŒå®¤é‡Œåšç²¾å¯†å®éªŒï¼Œç¯å¢ƒè¶Šç®€æ´ï¼Œå¹²æ‰°å°±è¶Šå°‘ã€‚è£…å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä»€ä¹ˆå·¥å…·ï¼ˆæ¯”å¦‚ GCCã€Make ç­‰ï¼‰å†é€šè¿‡å‘½ä»¤è¡Œæ‰‹åŠ¨ç²¾å‡†å®‰è£…å³å¯ã€‚

**ç‚¹å‡» Nextï¼Œç»§ç»­åˆ†åŒºçš„æ­¥éª¤ï¼**


æ‰§è¡Œå®Œ `sudo dpkg-reconfigure dash` å¹¶é€‰æ‹© **No** ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹æ³•è¿›è¡ŒéªŒè¯ï¼š

### æ–¹æ³• 1ï¼šä½¿ç”¨ `ls -l` å‘½ä»¤ï¼ˆæœ€ç›´è§‚ï¼‰
åœ¨ç»ˆç«¯è¾“å…¥ï¼š
```bash
ls -l /bin/sh
```

*   **å¦‚æœæˆåŠŸï¼ˆæŒ‡å‘ bashï¼‰ï¼š**
    è¾“å‡ºåº”è¯¥æ˜¯ï¼š`lrwxrwxrwx 1 root root 4 Dec  2 15:00 /bin/sh -> bash`
*   **å¦‚æœå¤±è´¥ï¼ˆä»æŒ‡å‘ dashï¼‰ï¼š**
    è¾“å‡ºåº”è¯¥æ˜¯ï¼š`lrwxrwxrwx 1 root root 4 Dec  2 15:00 /bin/sh -> dash`

---

### æ–¹æ³• 2ï¼šä½¿ç”¨ `readlink` å‘½ä»¤ï¼ˆæœ€ç®€æ´ï¼‰
è¾“å…¥ï¼š
```bash
readlink /bin/sh
```
å¦‚æœå±å¹•ç›´æ¥æ‰“å°å‡º **`bash`**ï¼Œè¯´æ˜é…ç½®æ­£ç¡®ã€‚

å½“`ls -l /bin/sh` ä¾ç„¶æ˜¾ç¤ºæŒ‡å‘ `dash`ï¼Œè¯·ç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨å¼ºåˆ¶ä¿®æ”¹è½¯é“¾æ¥ï¼š

### 1. å¼ºåˆ¶ä¿®æ”¹è½¯é“¾æ¥
åœ¨ç»ˆç«¯è¾“å…¥ï¼š
```bash
sudo ln -sf bash /bin/sh
```

### 2. å†æ¬¡æ£€æŸ¥ï¼ˆåŠ¡å¿…ç¡®è®¤ï¼‰
å†æ¬¡è¾“å…¥ï¼š
```bash
ls -l /bin/sh
```
**è¿™æ¬¡å¿…é¡»çœ‹åˆ°ï¼š**
`lrwxrwxrwx 1 root root 4 Dec 23 20:30 /bin/sh -> bash`

---

### 3. ç»ˆæéªŒè¯
ä¸ºäº†ç¡®ä¿ä¸‡æ— ä¸€å¤±ï¼Œè¾“å…¥è¿™ä¸ªå‘½ä»¤è®© Shell è‡ªå·±æŠ¥å‡ºèº«ä»½ï¼š
```bash
/bin/sh --version
```
*   **å¦‚æœæˆåŠŸï¼š** ä½ ä¼šçœ‹åˆ°ä¸€æ®µä»¥ `GNU bash, version ...` å¼€å¤´çš„æ–‡å­—ã€‚
*   **å¦‚æœå¤±è´¥ï¼š** å¦‚æœè¿”å›é”™è¯¯æˆ–è€…æ²¡æœ‰ä»»ä½•ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜å®ƒè¿˜æ˜¯ dashã€‚

---

### ä¸ºä»€ä¹ˆä¸€å®šè¦ä¿®å¤å®ƒï¼Ÿ
ä½ åœ¨åš LFS æ—¶ä¼šé‡åˆ°å¤§é‡çš„è„šæœ¬ï¼ˆä¾‹å¦‚ GCC çš„ `configure` è„šæœ¬ï¼‰ã€‚å¦‚æœ `/bin/sh` æ˜¯ `dash`ï¼š
1.  å®ƒè¯†åˆ«ä¸äº† `[[ ... ]]` è¿™ç§åŒæ‹¬å·åˆ¤æ–­ã€‚
2.  å®ƒè¯†åˆ«ä¸äº†æŸäº›å¤æ‚çš„å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œã€‚
3.  **åæœï¼š** ç¼–è¯‘åˆ°ä¸€åŠä¼šæŠ¥é”™ `Syntax error: "(" unexpected`ã€‚ç”±äº GCC ç¼–è¯‘ä¸€æ¬¡è¦å¾ˆä¹…ï¼Œè¿™ç§ç”±äº Shell å¯¼è‡´çš„å¤±è´¥ä¼šè®©ä½ éå¸¸ç—›è‹¦ã€‚
---

è¯·åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…â€œæ¯åŒ…â€ï¼š
```bash
sudo apt update
sudo apt install build-essential bison m4 gawk texinfo python3
```


åœ¨ Ubuntu 24.04 ä¸­ï¼Œå®‰è£… VMware Tools æœ‰ä¸¤ç§æ–¹å¼ã€‚

**æœ€æ¨èçš„åšæ³•ï¼ˆé’ˆå¯¹ Ubuntu 24.04ï¼‰ï¼š**
åœ¨ç»ˆç«¯è¾“å…¥ï¼š
```bash
sudo apt update
sudo apt install open-vm-tools-desktop
```
è¿™æ˜¯ç›®å‰å®˜æ–¹æ¨èçš„æ ‡å‡†åšæ³•ï¼Œæ¯”æ‰‹åŠ¨è§£å‹å®‰è£…åŒ…æ›´ç¨³å®šï¼Œä¸”ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰é©±åŠ¨ã€‚

**è¿™æ˜¯æˆ‘çš„æ‰§è¡Œç»“æœ**

```

è¿™æ˜¯æˆ‘çš„æ‰§è¡Œç»“æœ
user@lfs-host:~$ sudo ln -sf bash /bin/sh
user@lfs-host:~$ ls -l /bin/sh
lrwxrwxrwx 1 root root 4 Dec 23 20:27 /bin/sh -> bash
user@lfs-host:~$ /bin/sh --version
GNU bash, version 5.2.21(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2022 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
user@lfs-host:~$ 
```

æ¥ä¸‹æ¥çš„ä»»åŠ¡æ˜¯**å®‰è£…å®¿ä¸»æœºå¿…å¤‡çš„ç¼–è¯‘å·¥å…·åŒ…**ï¼Œå¹¶è¿è¡Œ LFS å®˜æ–¹çš„**ç‰ˆæœ¬æ£€æŸ¥è„šæœ¬**ã€‚

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…å®¿ä¸»æœºç¼–è¯‘ä¾èµ–ï¼ˆLFS é—¨ç¥¨ï¼‰

Ubuntu çš„é»˜è®¤å®‰è£…ç¼ºå°‘å¾ˆå¤šç¼–è¯‘å†…æ ¸å’ŒåŸºç¡€ç»„ä»¶æ‰€éœ€çš„å·¥å…·ã€‚è¯·ä¸€æ¬¡æ€§æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
sudo apt update
sudo apt install build-essential bison gawk m4 texinfo python3-venv doxygen -y
```

---

### ç¬¬äºŒæ­¥ï¼šè¿è¡Œ LFS å®˜æ–¹ç‰ˆæœ¬æ£€æŸ¥è„šæœ¬

LFS æ‰‹å†Œï¼ˆç¬¬ 2.2 èŠ‚ï¼‰æä¾›äº†ä¸€ä¸ªéå¸¸æœ‰åçš„è„šæœ¬ï¼Œç”¨æ¥æ£€æŸ¥å®¿ä¸»æœºè½¯ä»¶ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆæœ€ä½è¦æ±‚ã€‚

1.  **åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼š**
    ```bash
    cat > version-check.sh << "EOF"
    #!/bin/bash
    # A script to list version numbers of critical development tools

    # If you have tools installed in other directories, adjust PATH here ASAP
    LC_ALL=C 
    PATH=/usr/bin:/bin

    bail() { echo "FATAL: $1"; exit 1; }
    grep --version > /dev/null 2> /dev/null || bail "grep does not work"
    sed --version > /dev/null 2> /dev/null || bail "sed does not work"
    awk --version > /dev/null 2> /dev/null || bail "awk does not work"

    cat << 'OK' | gawk -f -
    BEGIN {
       # check for m4 1.4.10 or later
       "m4 --version" | getline;
       split($4, v, ".");
       if (v[1] < 1 || (v[1] == 1 && v[2] < 4) || (v[1] == 1 && v[2] == 4 && v[3] < 10))
          printf("ERROR: m4 1.4.10 or later is required\n");

       # check for bison 2.7 or later
       "bison --version" | getline;
       split($4, v, ".");
       if (v[1] < 2 || (v[1] == 2 && v[2] < 7))
          printf("ERROR: bison 2.7 or later is required\n");

       # check for gawk 4.0.1 or later
       "gawk --version" | getline;
       split($3, v, ".");
       if (v[1] < 4 || (v[1] == 4 && v[2] < 0) || (v[1] == 4 && v[2] == 0 && v[3] < 1))
          printf("ERROR: gawk 4.0.1 or later is required\n");

       # check for texinfo 4.7 or later
       "makeinfo --version" | getline;
       split($4, v, ".");
       if (v[1] < 4 || (v[1] == 4 && v[2] < 7))
          printf("ERROR: texinfo 4.7 or later is required\n");
    }
    OK

    bash --version | head -n1 | cut -d" " -f2-4
    MYSH=$(readlink -f /bin/sh)
    echo "/bin/sh -> $MYSH"
    echo -n "Binutils: "; ld --version | head -n1 | cut -d" " -f3-
    bison --version | head -n1
    gawk --version | head -n1
    gcc --version | head -n1
    g++ --version | head -n1
    ldd --version | head -n1 | cut -d" " -f2-  # glibc version
    grep --version | head -n1
    m4 --version | head -n1
    make --version | head -n1
    patch --version | head -n1
    echo Python 3: $(python3 --version | cut -d" " -f2)
    sed --version | head -n1
    tar --version | head -n1
    makeinfo --version | head -n1  # texinfo version
    xz --version | head -n1

    echo 'int main(){}' > dummy.c && g++ -o dummy dummy.c
    if [ -x dummy ]; then echo "g++ compilation OK"; else echo "g++ compilation failed"; fi
    rm -f dummy.c dummy
    EOF
    ```

2.  **æ‰§è¡Œè„šæœ¬ï¼š**
    ```bash
    bash version-check.sh
    ```

---

### å¦‚ä½•çœ‹ç»“æœï¼Ÿ

*   **æ‰€æœ‰çš„è½¯ä»¶åç§°åéƒ½åº”è¯¥æœ‰ç‰ˆæœ¬å·ã€‚**
*   **æœ€åä¸€è¡Œå¿…é¡»æ˜¾ç¤ºï¼š** `g++ compilation OK`ã€‚
*   **ç‰¹åˆ«å…³æ³¨ï¼š** `ldd (GNU libc)` çš„ç‰ˆæœ¬ã€‚Ubuntu 24.04 é€šå¸¸æ˜¯ 2.39 å·¦å³ï¼Œè¿™å¯¹äºæœ€æ–°çš„ LFS 12.x æ˜¯å®Œç¾çš„ã€‚
*   **é”™è¯¯æç¤ºï¼š** å¦‚æœè„šæœ¬æ‰“å°å‡ºä»»ä½•çº¢è‰²æˆ–å¸¦æœ‰ `ERROR` çš„å­—æ ·ï¼Œè¯´æ˜æŸä¸ªåŒ…æ²¡è£…å¥½ï¼Œéœ€è¦æ ¹æ®æç¤ºè¡¥å……ã€‚

### ç¬¬ä¸‰æ­¥ï¼šä¸º LFS åˆ’åˆ†ç£ç›˜é¢†åœ°

ä½ ç°åœ¨åªæœ‰ 100GB çš„è™šæ‹Ÿç£ç›˜ï¼ŒUbuntu å äº†ä¸€éƒ¨åˆ†ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸º LFS å¼€è¾Ÿä¸€å—ç‹¬ç«‹çš„åˆ†åŒºã€‚

1.  **æŸ¥çœ‹å½“å‰ç£ç›˜æƒ…å†µï¼š**
    ```bash
    lsblk
    ```
    ä½ åº”è¯¥èƒ½çœ‹åˆ° `nvme0n1`ï¼Œä»¥åŠä¸‹é¢å·²ç»æœ‰çš„ Ubuntu åˆ†åŒºã€‚

2.  **å¯åŠ¨ç£ç›˜ç®¡ç†å·¥å…·ï¼ˆå›¾å½¢ç•Œé¢æ›´æ–¹ä¾¿ï¼‰ï¼š**
    æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ `Super` (Windowsé”®)ï¼Œæœç´¢ **"Disks"** å¹¶æ‰“å¼€ã€‚
    *   ä½ åº”è¯¥èƒ½çœ‹åˆ°é‚£å— 100GB çš„ç£ç›˜ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†æ˜¯â€œFree Spaceâ€ã€‚
    *   ç‚¹å‡» **+** å·ï¼Œåœ¨ç©ºä½™ç©ºé—´åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†åŒºã€‚
    *   **å¤§å°ï¼š** è‡³å°‘ 60GBã€‚
    *   **æ ¼å¼ï¼š** **Ext4**ã€‚
    *   **åç§°ï¼š** å¯ä»¥å« `LFS`ã€‚

**ç­‰ä½ è·‘å®Œç‰ˆæœ¬æ£€æŸ¥è„šæœ¬å¹¶ç¡®è®¤æ²¡æœ‰æŠ¥é”™ï¼Œä¸”åˆ†å¥½äº†åŒºï¼Œè¯·å‘Šè¯‰æˆ‘ï¼ä¸‹ä¸€æ­¥æˆ‘ä»¬å°±è¯¥è¿›å…¥çœŸæ­£çš„ LFS æµç¨‹ï¼šè®¾ç½®ç¯å¢ƒå˜é‡å¹¶å¼€å§‹ä¸‹è½½æºç åŒ…äº†ã€‚**

è½¯ä»¶æºå‡ºé”™ä¿®å¤è½¯ä»¶æº

ä½ çš„æŠ¥é”™ä¿¡æ¯æ­ç¤ºäº†ä¸€ä¸ªéå¸¸å…¸å‹ä¸”å…³é”®çš„é—®é¢˜ï¼š**ä½ çš„è½¯ä»¶æºï¼ˆMirrorï¼‰é…ç½®é”™äº†ã€‚**

### æŠ¥é”™åŸå› åˆ†æ
ä½ ç›®å‰ä½¿ç”¨çš„æ˜¯ `https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports`ã€‚
*   **é‡ç‚¹åœ¨è¿™é‡Œï¼š** `ubuntu-ports` æ˜¯ä¸“é—¨ç»™ **ARM**ï¼ˆæ¯”å¦‚æ ‘è“æ´¾ï¼‰ã€**PowerPC** ç­‰æ¶æ„å‡†å¤‡çš„ã€‚
*   **ä½ çš„ç”µè„‘ï¼š** æ˜¯ Intel i5-13600KFï¼Œå±äº **x86_64 (amd64)** æ¶æ„ã€‚
*   **ç»“æœï¼š** è½¯ä»¶æºé‡Œæ ¹æœ¬æ²¡æœ‰ç»™ amd64 å‡†å¤‡çš„å®‰è£…åŒ…ï¼Œæ‰€ä»¥ä½ ä¼šé‡åˆ°ä¸€å † `404 Not Found`ï¼Œå¯¼è‡´ `build-essential` ç­‰æ ¸å¿ƒå·¥å…·ä¸€ä¸ªä¹Ÿè£…ä¸ä¸Šã€‚

---

### ç¬¬ä¸€æ­¥ï¼šä¿®å¤è½¯ä»¶æºï¼ˆæœ€ä¼˜é›…çš„æ–¹æ³•ï¼‰

åœ¨ Ubuntu 24.04 ä¸­ï¼Œè½¯ä»¶æºé€šå¸¸å­˜å‚¨åœ¨ `/etc/apt/sources.list.d/ubuntu.sources`ï¼ˆæ–°æ ¼å¼ï¼‰æˆ–è€… `/etc/apt/sources.list`ï¼ˆæ—§æ ¼å¼ï¼‰ã€‚æˆ‘ä»¬ç›´æ¥ç”¨ä¸€è¡Œå‘½ä»¤æŠŠå®ƒæ”¹å›æ­£ç¡®çš„ x86 é•œåƒåœ°å€ã€‚

è¯·åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆå°† `ubuntu-ports` æ›¿æ¢ä¸º `ubuntu`ï¼‰ï¼š

```bash
# å¤‡ä»½ç°æœ‰çš„æºæ–‡ä»¶ä»¥é˜²ä¸‡ä¸€
sudo cp /etc/apt/sources.list.d/ubuntu.sources /etc/apt/sources.list.d/ubuntu.sources.bak

# ä½¿ç”¨ sed å‘½ä»¤å…¨å±€æ›¿æ¢é•œåƒåœ°å€
sudo sed -i 's/ubuntu-ports/ubuntu/g' /etc/apt/sources.list.d/ubuntu.sources
```

**å¦‚æœæç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œè¯´æ˜ä½ å¯èƒ½ç”¨çš„æ˜¯æ—§æ ¼å¼ï¼Œè¯·æ‰§è¡Œè¿™è¡Œï¼š**
```bash
sudo sed -i 's/ubuntu-ports/ubuntu/g' /etc/apt/sources.list
```

---

### ç¬¬äºŒæ­¥ï¼šæ›´æ–°å¹¶å®‰è£…ç¼ºå¤±çš„ LFS ä¾èµ–

ä¿®å¤å®Œæºåœ°å€åï¼Œç°åœ¨ä½ å¯ä»¥æ­£å¸¸ä¸‹è½½ amd64 çš„å®‰è£…åŒ…äº†ï¼š

```bash
# 1. æ›´æ–°ç´¢å¼•
sudo apt update

# 2. å®‰è£… LFS å¿…é¡»çš„æ‰€æœ‰è½¯ä»¶åŒ…ï¼ˆä¸€æ¬¡æ€§è¡¥é½ä½  version-check é‡Œçš„æ‰€æœ‰çº¢å­—ï¼‰
sudo apt install build-essential bison gawk m4 texinfo -y
```

---

### ç¬¬ä¸‰æ­¥ï¼šé‡æ–°è¿è¡Œ `version-check.sh`

ç°åœ¨ï¼Œå†æ¬¡è¿è¡Œä½ ä¹‹å‰åˆ›å»ºçš„é‚£ä¸ªè„šæœ¬ï¼š

```bash
bash version-check.sh
```

**æœŸæœ›çœ‹åˆ°çš„ç»“æœï¼š**
*   `Binutils`, `Bison`, `Gawk`, `GCC`, `M4`, `Make`, `Texinfo` åé¢éƒ½å‡ºç°äº†ç‰ˆæœ¬å·ã€‚
*   `Aliases` éƒ¨åˆ†ï¼š`awk is GNU`, `yacc is Bison` åº”è¯¥æ˜¾ç¤ºä¸º **OK**ã€‚
*   `Compiler check` éƒ¨åˆ†ï¼š`g++ works` æ˜¾ç¤ºä¸º **OK**ã€‚

---
**ä¿®å¤äº†è½¯ä»¶æºã€åˆ‡æ¢äº† Bashã€è£…å¥½äº†æ‰€æœ‰ä¾èµ–åŒ…ã€é€šè¿‡äº† `version-check.sh`åè¯·å…³é—­è™šæ‹Ÿæœºå¹¶ä¿å­˜å¿«ç…§**

### 1. å¿…é¡»è¦å­˜å¿«ç…§ï¼è€Œä¸”ç°åœ¨å°±æ˜¯ç¬¬ä¸€ä¸ªâ€œé»„é‡‘èŠ‚ç‚¹â€

**ç°åœ¨ç«‹åˆ»å­˜å¿«ç…§ï¼**

åœ¨ LFS çš„è¿‡ç¨‹ä¸­ï¼Œå­˜å¿«ç…§çš„åŸåˆ™æ˜¯ï¼š**æ¯å½“ä½ ç¡®è®¤å®Œæˆäº†ä¸€ä¸ªé˜¶æ®µä¸”éªŒè¯æ— è¯¯æ—¶ï¼Œå°±å­˜ä¸€ä¸ªã€‚**

*   **å½“å‰å¿«ç…§åç§°å»ºè®®ï¼š** `LFS_01_Host_Ready`
*   **ç†ç”±ï¼š** ä½ å·²ç»æå®šäº†æœ€çƒ¦äººçš„å®¿ä¸»æœºç¯å¢ƒï¼ˆä¿®å¤äº†è½¯ä»¶æºã€åˆ‡æ¢äº† Bashã€è£…å¥½äº†æ‰€æœ‰ä¾èµ–åŒ…ã€é€šè¿‡äº† `version-check.sh`ï¼‰ã€‚


**å­˜å®Œå¿«ç…§åé‡å¯ç”µè„‘**
***[è¿™ä¸€æ­¥æˆ‘è·ŸLFS12.4ä¹¦ä¸Šä¸ä¸€æ ·ï¼Œè¿™æ ·å›¾å½¢åŒ–åˆ†åŒºæ›´èˆ’é€‚]***
#### ç¬¬ä¸€æ­¥ï¼šåˆ†åŒº (Partitioning)
ç”±äºä½ åœ¨å®‰è£… Ubuntu æ—¶ç•™å‡ºäº†ç©ºé—´ï¼Œç°åœ¨æˆ‘ä»¬è¦æŠŠè¿™å—åœ°æ­£å¼åˆ’ç»™ LFSã€‚
1.  åœ¨ Ubuntu é‡Œæ‰“å¼€ç»ˆç«¯ã€‚
2.  è¾“å…¥ `sudo gparted` (å¦‚æœæ²¡è£…ï¼Œå°± `sudo apt install gparted`)ã€‚
3.  æ‰¾åˆ°é‚£å— **Unallocated (ç©ºé—²)** çš„ç©ºé—´ã€‚
4.  å³é”® -> **New**ã€‚
    *   **File system:** é€‰ **ext4**ã€‚
    *   **Label:** å¡« **LFS**ã€‚
5.  ç‚¹å‡»å·¥å…·æ çš„â€œæ‰“é’©â€å›¾æ ‡åº”ç”¨æ›´æ”¹ã€‚
6.  **è®°ä½å®ƒçš„åå­—ï¼š** æ¯”å¦‚æˆ‘çš„å« `/dev/nvme0n1p3`ã€‚

#### ç¬¬äºŒæ­¥ï¼šè®¾ç½® $LFS ç¯å¢ƒå˜é‡ (æå…¶é‡è¦)
**è¿™æ˜¯ LFS çš„çµé­‚ã€‚æ‰€æœ‰çš„å‘½ä»¤éƒ½ä¾èµ–è¿™ä¸ªå˜é‡ã€‚**
```bash
# åœ¨ä½ å½“å‰çš„ç»ˆç«¯é‡Œæ‰§è¡Œ
export LFS=/mnt/lfs
echo $LFS  # ç¡®è®¤è¾“å‡ºä¸º /mnt/lfs
```

#### ç¬¬ä¸‰æ­¥ï¼šæŒ‚è½½ (Mounting)
æˆ‘ä»¬è¦æŠŠåˆšæ‰åˆ†å¥½çš„é‚£å—åœ°ï¼ŒæŒ‚è½½åˆ° Ubuntu çš„ `/mnt/lfs` ç›®å½•ä¸‹ã€‚
```bash
sudo mkdir -pv $LFS
# æ³¨æ„ï¼šä¸‹é¢çš„ nvme0n1p3 è¦æ¢æˆä½ åˆšæ‰åœ¨ GParted é‡Œçœ‹åˆ°çš„çœŸå®åå­—
sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS
```

---

### 3. æ¥ä¸‹æ¥çš„â€œé˜²å‘â€è·¯çº¿å›¾

å½“ä½ æŒ‚è½½å¥½ç£ç›˜åï¼Œä½ å°±è¿›å…¥äº† **LFS ç¬¬ä¸‰ç« ï¼šè½¯ä»¶åŒ…å’Œè¡¥ä¸**ã€‚

1.  **åˆ›å»º sources ç›®å½•ï¼š** 
    ä½ éœ€è¦åœ¨é‚£ä¸ªæ–°ç¡¬ç›˜é‡Œå»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä¸“é—¨æ”¾ä¸‹è½½çš„æºç ï¼š
    ```bash
    sudo mkdir -v $LFS/sources
    sudo chmod -v a+wt $LFS/sources
    ```
2.  **ä¸‹è½½æºç ï¼š**
    ä½ ä¼šç”¨åˆ° LFS æä¾›çš„ `wget-list`ã€‚è¿™æ—¶å€™ä½  13600KF çš„å¤šæ ¸æ²¡ç”¨ï¼Œä¸»è¦çœ‹ä½ çš„å¸¦å®½ã€‚
3.  **è¿›å…¥ç¬¬å››ç« ï¼ˆæœ€åçš„å‡†å¤‡ï¼‰ï¼š**
    ä½ ä¼šåˆ›å»ºä¸€ä¸ª `lfs` ç”¨æˆ·ã€‚**è®°ä½ï¼Œä»ç¬¬å››ç« å¼€å§‹ï¼Œä¸¥ç¦ä½¿ç”¨ root æˆ–ä½ çš„ä¸ªäººç”¨æˆ·è¿›è¡Œç¼–è¯‘ï¼Œå¿…é¡»åˆ‡æ¢åˆ° lfs ç”¨æˆ·ã€‚**


**è¿™æ˜¯æˆ‘çš„è¾“å‡ºç»“æœ**
```
è¿™æ˜¯æˆ‘çš„è¾“å‡ºç»“æœ
user@lfs-host:~/Desktop$ sudo gparted
GParted 1.5.0
configuration --enable-libparted-dmraid --enable-online-resize
libparted 3.6
user@lfs-host:~/Desktop$ export LFS=/mnt/lfs
user@lfs-host:~/Desktop$ echo $LFS
/mnt/lfsuser@lfs-host:~/Desktop$ sudo mkdir -pv $LFS
mkdir: created directory '/mnt/lfs'
user@lfs-host:~/Desktop$ cd
user@lfs-host:~$ sudo mkdir -pv $LFS
user@lfs-host:~$ sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS
mount: /dev/nvme0n1p3 mounted on /mnt/lfs.
user@lfs-host:~$ 

```

æ¼‚äº®ï¼**æŒ‚è½½æˆåŠŸ**ã€‚ä½ ç°åœ¨å·²ç»æ­£å¼è¿›å…¥äº† LFS çš„â€œæ–½å·¥ç°åœºâ€ã€‚`/mnt/lfs` ç°åœ¨å°±æ˜¯ä½ é‚£å— 60GB ç‹¬ç«‹ç©ºé—´çš„å…¥å£ã€‚

ä½†åœ¨ä½ å¼€å§‹ä¸‹è½½æºç ä¹‹å‰ï¼Œæˆ‘æœ‰**ä¸‰ä¸ªéå¸¸é‡è¦çš„æç¤º**ï¼Œèƒ½å¸®ä½ é¿å¼€ 90% æ–°æ‰‹ä¼šæ‰è¿›å»çš„å‘ï¼š

### 1. è§£å†³ç¯å¢ƒå˜é‡çš„â€œç¬æ—¶æ€§â€ï¼ˆå¿…åšï¼‰
ä½ åˆšæ‰æ‰§è¡Œäº† `export LFS=/mnt/lfs`ã€‚
*   **é£é™©ï¼š** è¿™ä¸ªå˜é‡åªåœ¨**å½“å‰è¿™ä¸ªç»ˆç«¯çª—å£**æœ‰æ•ˆã€‚å¦‚æœä½ å…³æ‰çª—å£é‡æ–°æ‰“å¼€ï¼Œæˆ–è€…é‡å¯äº†è™šæ‹Ÿæœºï¼Œ`$LFS` å°±ä¼šå˜æˆç©ºçš„ã€‚
*   **æƒ¨æ¡ˆï¼š** å¦‚æœ `$LFS` ä¸ºç©ºï¼Œä½ æ‰§è¡Œ `rm -rf $LFS/tools` æ—¶ï¼Œç³»ç»Ÿä¼šæ‰§è¡Œ `rm -rf /tools`ï¼Œè¿™å¯èƒ½ä¼šç ´åä½ çš„å®¿ä¸»æœºã€‚
*   **ä¼˜é›…çš„è§£å†³åŠæ³•ï¼š** æŠŠè¿™ä¸ªå˜é‡å†™è¿›ä½ çš„ `.bashrc`ã€‚
    ```bash
    echo "export LFS=/mnt/lfs" >> ~/.bashrc
    source ~/.bashrc
    ```
    *éªŒè¯ï¼šè¾“å…¥ `echo $LFS`ï¼Œç¡®ä¿ä»»ä½•æ—¶å€™æ‰“å¼€æ–°çª—å£éƒ½èƒ½çœ‹åˆ° `/mnt/lfs`ã€‚*

---

### 2. å»ºç«‹â€œæºç ä»“åº“â€ (Chapter 3)
æˆ‘ä»¬è¦æŒ‰ç…§ LFS è§„èŒƒå»ºç«‹å­˜å‚¨ç›®å½•ï¼Œå¹¶ç»™äºˆæ­£ç¡®çš„æƒé™ã€‚

```bash
# 1. åˆ›å»º sources ç›®å½•
sudo mkdir -v $LFS/sources

# 2. ç»™äºˆâ€œç²˜æ»ä½â€æƒé™
# è¿™æ ·æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è¯»å†™ï¼Œä½†åªæœ‰æ–‡ä»¶æ‰€æœ‰è€…èƒ½åˆ é™¤ï¼Œéå¸¸å®‰å…¨
sudo chmod -v a+wt $LFS/sources
```

---

### 3. å¼€å§‹ä¸‹è½½æºç  (The Heavy Lifting)

**å¦‚æœä½ æŒ‰ç…§å¦‚ä¸‹æµç¨‹ä¸‹è½½æºç ä¸‹è½½å¾—å¾ˆæ…¢ï¼Œåˆæƒ³è·å–å®˜æ–¹æ–‡ä»¶ä»¥ç¡®ä¿ä¸å‡ºé”™ï¼Œæˆ‘å»ºè®®ä½ åœ¨Windowsç³»ç»Ÿä¸Šå¼€å¯VPNåæ‰‹åŠ¨ä¸€ä¸ªä¸ªç‚¹å‡»æ‰‹å†Œä¸‹è½½é“¾æ¥ä¸‹è½½å†æ‹–å…¥è™šæ‹Ÿæœºsourcesæ–‡ä»¶å¤¹ï¼Œè¿™æ ·å…¶å®å¾ˆå¿«çš„ï¼Œä»¥ä¸‹æ–¹æ³•ä¼šå¡åœ¨ä¸€äº›æ¯”è¾ƒå¤§çš„æ–‡ä»¶ä¸Šä¾‹å¦‚Linux6.16.1çš„åŒ…**

ç°åœ¨ä½ è¦æŠŠæ•´ä¸ª Linux ç³»ç»Ÿæ‰€éœ€çš„å‡ åä¸ªâ€œé›¶ä»¶â€ä¸‹è½½å›æ¥ã€‚

1.  **è¿›å…¥ç›®å½•ï¼š**
    ```bash
    cd $LFS/sources
    ```

2.  **è·å–ä¸‹è½½åˆ—è¡¨ï¼š**
    å» LFS å®˜ç½‘ï¼ˆå¯¹åº”ä½ çš„ç‰ˆæœ¬ï¼Œé€šå¸¸æ˜¯ 12.xï¼‰æ‰¾åˆ° `wget-list`ã€‚æˆ–è€…ç›´æ¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼ˆä»¥æœ€æ–°çš„ 12.2 ä¸ºä¾‹ï¼Œå¦‚æœä½ çš„ç‰ˆæœ¬ä¸åŒï¼Œè¯·å¾®è°ƒç‰ˆæœ¬å·ï¼‰ï¼š
    ```bash
    wget https://www.linuxfromscratch.org/lfs/view/stable/wget-list-sysv
    ```


`wget-list` æ˜¯ LFS å®˜æ–¹æä¾›çš„ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†æ„å»ºæ•´ä¸ªç³»ç»Ÿæ‰€éœ€çš„æ‰€æœ‰æºç åŒ…ï¼ˆTarballsï¼‰å’Œè¡¥ä¸ï¼ˆPatchesï¼‰çš„ä¸‹è½½åœ°å€ã€‚

ç”±äº LFS åˆ†ä¸º **System V (SysV)** å’Œ **systemd** ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä½ éœ€è¦æ ¹æ®ä½ é€‰æ‹©çš„ç‰ˆæœ¬æ¥ä¸‹è½½å¯¹åº”çš„åˆ—è¡¨ã€‚

### 1. ç›´æ¥ä¸‹è½½å‘½ä»¤ (é’ˆå¯¹ LFS 12.2 ç¨³å®šç‰ˆ)

è¯·æ ¹æ®ä½ çš„é€‰æ‹©ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¯¹åº”çš„å‘½ä»¤ï¼ˆç¡®ä¿ä½ å·²ç»åœ¨ `$LFS/sources` ç›®å½•ä¸‹ï¼‰ï¼š

**å¦‚æœä½ é€‰çš„æ˜¯ System V ç‰ˆ (ä¼ ç»Ÿç‰ˆ)ï¼š**
```bash
wget https://www.linuxfromscratch.org/lfs/view/stable/wget-list-sysv
```

**å¦‚æœä½ é€‰çš„æ˜¯ systemd ç‰ˆ (ç°ä»£ç‰ˆ)ï¼š(åˆå­¦æ“ä½œç³»ç»Ÿä¸è¦é€‰æ‹©æ­¤ç‰ˆæœ¬)**
```bash
wget https://www.linuxfromscratch.org/lfs/view/stable-systemd/wget-list-systemd
```

### 2. åŒæ—¶ä¹Ÿä¸‹è½½æ ¡éªŒæ–‡ä»¶ (MD5SUMS)ï¼ˆè¿™ä¸ªä¸‹è½½å¾ˆå¿«ï¼‰
ä¸‹è½½å®ŒåŒ…ä¹‹åï¼Œä½ éœ€è¦éªŒè¯å®ƒä»¬æ˜¯å¦å®Œæ•´ã€‚å»ºè®®é¡ºä¾¿æŠŠæ ¡éªŒæ–‡ä»¶ä¹Ÿä¸‹äº†ï¼š
```bash
# SysV ç‰ˆæ ¡éªŒæ–‡ä»¶
wget https://www.linuxfromscratch.org/lfs/view/stable/md5sums

# æˆ–è€… systemd ç‰ˆæ ¡éªŒæ–‡ä»¶
wget https://www.linuxfromscratch.org/lfs/view/stable-systemd/md5sums
```

---

### 5. ä¸‹è½½å®Œåçš„å…³é”®ä¸€æ­¥ï¼šMD5 æ ¡éªŒ
**è¿™ä¸€æ­¥ç»å¯¹ä¸èƒ½çœï¼** å“ªæ€•åŒ…åªæŸåäº†ä¸€ä¸ªå­—èŠ‚ï¼Œåé¢çš„ç¼–è¯‘éƒ½ä¼šæŠ¥é”™ã€‚

```bash
# æ‰§è¡Œæ ¡éªŒ
pushd $LFS/sources
  md5sum -c md5sums
popd
```
*   **æœŸæœ›ç»“æœï¼š** å±å¹•åˆ·å‡ºä¸€æ•´æ’ `OK`ã€‚
*   **å¦‚æœæ˜¯ `FAILED`ï¼š** é‚£ä¸ªåŒ…å¿…é¡»åˆ æ‰é‡ä¸‹ã€‚

**æ¸©é¦¨æç¤ºï¼š**
ç”±äºæºç åŒ…æ€»å¤§å°çº¦ 500MB-1GBï¼Œå¦‚æœæ¸…åé•œåƒæºï¼ˆTUNAï¼‰æˆ–è€…ä½ çš„ç½‘ç»œä¸‹è½½å®˜æ–¹é“¾æ¥å¤ªæ…¢ï¼Œä½ ä¹Ÿå¯ä»¥å»å›½å†…é•œåƒç«™ï¼ˆå¦‚æ¸…åã€é˜¿é‡Œã€åä¸ºï¼‰ç›´æ¥æ‰¾ `/lfs/downloads/` ç›®å½•ä¸‹çš„æ•´ä¸ª tar åŒ…ï¼Œè§£å‹åæ”¾è¿› `sources` æ–‡ä»¶å¤¹ã€‚

user@lfs-host:~$ cd $LFS/sources
user@lfs-host:/mnt/lfs/sources$ wget https://www.linuxfromscratch.org/lfs/view/stable/wget-list-sysv
--2025-12-23 20:56:36--  https://www.linuxfromscratch.org/lfs/view/stable/wget-list-sysv
Resolving www.linuxfromscratch.org (www.linuxfromscratch.org)... 208.118.68.85
Connecting to www.linuxfromscratch.org (www.linuxfromscratch.org)|208.118.68.85|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 6107 (6.0K)
Saving to: â€˜wget-list-sysvâ€™

wget-list-sysv      100%[===================>]   5.96K  --.-KB/s    in 0s      

2025-12-23 20:56:39 (541 MB/s) - â€˜wget-list-sysvâ€™ saved [6107/6107]

user@lfs-host:/mnt/lfs/sources$ 


**åœ¨åˆ†åŒºä¸Šå»ºç«‹æ–‡ä»¶ç³»ç»Ÿï¼Œè®¾ç½® $LFS ç¯å¢ƒå˜é‡å’Œ Umaskéœ€è¦å—**



é’ˆå¯¹ä½ çš„é—®é¢˜ï¼Œç­”æ¡ˆæ˜¯ï¼š**éå¸¸éœ€è¦ï¼Œä½†è¦æ³¨æ„å®ƒä»¬å‡ºç°çš„å…ˆåé¡ºåºå’Œä½œç”¨èŒƒå›´ã€‚**

è¿™ä¸‰é¡¹æ“ä½œæ˜¯ LFS ç¨³å›ºåœ°åŸºçš„å…³é”®ã€‚æ—¢ç„¶ä½ å·²ç»è¿›è¡Œåˆ°ä¸‹è½½æºç è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬é€ä¸€æ¢³ç†ä¸€ä¸‹ï¼š

### 1. åœ¨åˆ†åŒºä¸Šå»ºç«‹æ–‡ä»¶ç³»ç»Ÿ (Done âœ…)
*   **ç°çŠ¶ï¼š** ä½ ä¹‹å‰å·²ç»è¿è¡Œè¿‡ `sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS`ã€‚
*   **è§£é‡Šï¼š** æ—¢ç„¶ä½ èƒ½æˆåŠŸæŒ‚è½½ï¼ˆMountï¼‰ï¼Œè¯´æ˜ä½ å·²ç»åœ¨ GParted é‡Œæˆ–è€…é€šè¿‡å‘½ä»¤æ‰‹åŠ¨å»ºç«‹äº† **ext4** æ–‡ä»¶ç³»ç»Ÿã€‚
*   **ç»“è®ºï¼š** è¿™ä¸€æ­¥ä½ å·²ç»å®Œæˆäº†ï¼Œä¸éœ€è¦é‡å¤æ“ä½œã€‚

---

### 2. è®¾ç½® `$LFS` ç¯å¢ƒå˜é‡ (å¿…é¡»æŒä¹…åŒ– âš ï¸)
è¿™æ˜¯ä½ ç›®å‰**æœ€éœ€è¦æ³¨æ„**çš„ä¸€ç‚¹ã€‚
*   **ä¸ºä»€ä¹ˆï¼š** æ‰€æœ‰çš„ LFS å‘½ä»¤ï¼ˆå¦‚ `mkdir $LFS/sources`ï¼‰éƒ½ä¾èµ–è¿™ä¸ªå˜é‡ã€‚å¦‚æœä½ æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œæˆ–è€…æ˜å¤©æ—©ä¸Šèµ·æ¥é‡å¯è™šæ‹Ÿæœºï¼Œè¿™ä¸ªå˜é‡å°±**æ¶ˆå¤±**äº†ã€‚
*   **é£é™©ï¼š** å˜é‡ä¸€æ—¦ä¸ºç©ºï¼Œæ‰§è¡Œå‘½ä»¤ä¼šç›´æ¥ä½œç”¨äºä½ å®¿ä¸»æœºçš„æ ¹ç›®å½•ï¼ˆ`/`ï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´å®¿ä¸»æœºç³»ç»Ÿå´©æºƒã€‚
*   **æ­£ç¡®åšæ³•ï¼š** 
    ç¡®ä¿ä½ å·²ç»åœ¨å®¿ä¸»æœºç”¨æˆ·ï¼ˆå½“å‰ç”¨æˆ·ï¼‰çš„ `.bashrc` ä¸­å†™å…¥äº†è¿™ä¸€è¡Œï¼š
    ```bash
    # æ£€æŸ¥æ˜¯å¦å·²å†™å…¥
    grep "export LFS=/mnt/lfs" ~/.bashrc || echo "export LFS=/mnt/lfs" >> ~/.bashrc
    source ~/.bashrc
    ```

---

### 3. è®¾ç½® Umask (å…³é”®æƒé™æ§åˆ¶ ğŸ”)
è¿™ä¸ªè®¾ç½®é€šå¸¸å‡ºç°åœ¨ LFS æ‰‹å†Œçš„ **ç¬¬ 4.4 èŠ‚**ã€‚

*   **ä»€ä¹ˆæ˜¯ Umaskï¼š** å®ƒå†³å®šäº†æ–°åˆ›å»ºçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„é»˜è®¤æƒé™ã€‚
*   **LFS çš„è¦æ±‚ï¼š** `umask 022`ã€‚
*   **ä¸ºä»€ä¹ˆè¦è®¾ï¼š** 
    *   è¿™ä¼šç¡®ä¿æ‰€æœ‰åˆ›å»ºçš„æ–‡ä»¶æ˜¯â€œå±ä¸»å¯å†™ï¼Œæ‰€æœ‰äººå¯è¯»â€ï¼ˆå³æƒé™ä¸º 755 æˆ– 644ï¼‰ã€‚
    *   å¦‚æœä¸è®¾ç½®ï¼ŒæŸäº›å‘è¡Œç‰ˆé»˜è®¤çš„ umask å¯èƒ½æ˜¯ 027 æˆ– 077ï¼Œè¿™ä¼šå¯¼è‡´åç»­åœ¨ `chroot` ç¯å¢ƒä¸‹ï¼ŒæŸäº›ç¨‹åºï¼ˆå¦‚ root ä¹‹å¤–çš„ç”¨æˆ·ï¼‰å› ä¸ºæ²¡æœ‰è¯»å–æƒé™è€ŒæŠ¥é”™ã€‚
*   **ä»€ä¹ˆæ—¶å€™è®¾ï¼š** 
    1.  **ç°åœ¨ï¼ˆå®¿ä¸»æœºï¼‰ï¼š** ä½ å¯ä»¥åœ¨ç°åœ¨çš„ç»ˆç«¯é‡Œæ‰§è¡Œä¸€æ¬¡ `umask 022`ã€‚
    2.  **æ ¸å¿ƒä½ç½®ï¼ˆlfs ç”¨æˆ·ï¼‰ï¼š** å½“ä½ ç¨ååˆ›å»º `lfs` ä¸“é—¨ç”¨æˆ·æ—¶ï¼Œ**å¿…é¡»**åœ¨è¯¥ç”¨æˆ·çš„ `.bashrc` é…ç½®æ–‡ä»¶ä¸­å†™å…¥ `umask 022`ã€‚è¿™æ˜¯ LFS æ‰‹å†Œä¸¥æ ¼è¦æ±‚çš„ã€‚

---

### 4. è¡¥å……ä¸€ä¸ªåŠ¨ä½œï¼šåˆ›å»º `$LFS/tools` ç›®å½•

åœ¨ä¸‹è½½æºç çš„åŒæ—¶ï¼Œå»ºè®®ä½ é¢„å…ˆæ‰§è¡Œæ‰‹å†Œ **ç¬¬ 4.2 èŠ‚** çš„æ“ä½œã€‚è¿™æ˜¯ä¸ºâ€œä¸´æ—¶å·¥å…·é“¾â€å‡†å¤‡çš„ä¸´æ—¶å­˜æ”¾åœ°ã€‚

```bash
# 1. åˆ›å»ºç›®å½•
sudo mkdir -v $LFS/tools

# 2. è½¯é“¾æ¥åˆ°å®¿ä¸»æœºï¼ˆè¿™æ˜¯ LFS çš„ä¸€ä¸ªå·§å¦™è®¾è®¡ï¼Œæ–¹ä¾¿åœ¨ chroot å‰åè·¯å¾„ä¿æŒä¸€è‡´ï¼‰
sudo ln -sv $LFS/tools /
```
*æ³¨ï¼šç¬¬äºŒæ­¥ä¼šåœ¨ä½ çš„ Ubuntu æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `/tools` é“¾æ¥ã€‚*

---



**æˆ‘é‡å¯äº†è™šæ‹Ÿæœºå¦‚ä½•ç¡®ä¿ä¸å‡ºé—®é¢˜ï¼Ÿ**


é‡å¯è™šæ‹Ÿæœºåï¼Œ**æ‰€æœ‰çš„æŒ‚è½½ï¼ˆMountï¼‰å’Œå†…å­˜é‡Œçš„ç¯å¢ƒå˜é‡éƒ½ä¼šæ¶ˆå¤±**ã€‚è¿™æ˜¯ LFS åˆå­¦è€…æœ€å®¹æ˜“æ‰å‘çš„åœ°æ–¹ï¼šå¦‚æœæ²¡æŒ‚è½½å°±ç›´æ¥å¼€å§‹ç¼–è¯‘ï¼Œæ–‡ä»¶ä¼šå†™è¿›å®¿ä¸»æœºçš„ 40GB ç¡¬ç›˜é‡Œï¼Œå¾ˆå¿«å°±ä¼šæŠŠç³»ç»Ÿæ’‘çˆ†ï¼Œè€Œä¸”è·¯å¾„å…¨æ˜¯é”™çš„ã€‚

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œâ€œéœ‡åå¤åŸæ£€æŸ¥â€ï¼Œç¡®ä¿ä½ çš„ç¯å¢ƒä¾ç„¶å®Œç¾ï¼š

### 1. æ£€æŸ¥ç¯å¢ƒå˜é‡ `$LFS`
åœ¨ç»ˆç«¯è¾“å…¥ï¼š
```bash
echo $LFS
```
*   **å¦‚æœæ˜¯ `/mnt/lfs`ï¼š** æ­£å¸¸ï¼ˆè¯´æ˜ä½ ä¹‹å‰çš„ `.bashrc` å†™å…¥æˆåŠŸäº†ï¼‰ã€‚
*   **å¦‚æœæ˜¯ç©ºçš„ï¼š** **ç«‹åˆ»æ‰§è¡Œ** `export LFS=/mnt/lfs`ã€‚

### 2. é‡æ–°æŒ‚è½½ LFS åˆ†åŒºï¼ˆæœ€é‡è¦ï¼ï¼‰
é‡å¯åï¼Œä½ çš„ 60GB ç¡¬ç›˜è™½ç„¶è¿˜åœ¨ï¼Œä½†æ²¡æœ‰è¿æ¥åˆ° `/mnt/lfs` ç›®å½•ã€‚
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```bash
# ç¡®è®¤ç›®å½•å­˜åœ¨ï¼ˆåº”è¯¥å·²ç»åœ¨é‚£é‡Œï¼‰
sudo mkdir -pv $LFS

# é‡æ–°æŒ‚è½½ï¼ˆè¯·ç¡®è®¤ä½ çš„è®¾å¤‡åæ˜¯ nvme0n1p3ï¼‰
sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS
```
**éªŒè¯ï¼š** æ‰§è¡Œ `ls $LFS`ã€‚å¦‚æœä½ èƒ½çœ‹åˆ° `sources` æ–‡ä»¶å¤¹ï¼Œè¯´æ˜æŒ‚è½½æˆåŠŸã€‚

### 3. æ£€æŸ¥ `/bin/sh` çš„æŒ‡å‘
è™½ç„¶è¿™é€šå¸¸æ˜¯æŒä¹…åŒ–çš„ï¼Œä½†ä¸ºäº†ä¿é™©æ£€æŸ¥ä¸€ä¸‹ï¼š
```bash
ls -l /bin/sh
```
*   **å¿…é¡»çœ‹åˆ°ï¼š** `-> bash`ã€‚
*   **å¦‚æœæ˜¯ `-> dash`ï¼š** é‡æ–°æ‰§è¡Œ `sudo ln -sf bash /bin/sh`ã€‚

### 4. æ£€æŸ¥ `/tools` è½¯é“¾æ¥
åœ¨ LFS ç¬¬ 4 ç« æˆ‘ä»¬ä¼šåˆ›å»ºè¿™ä¸ªè½¯é“¾æ¥ã€‚å¦‚æœä½ å·²ç»åˆ›å»ºè¿‡ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦è¿˜åœ¨ï¼š
```bash
ls -l /tools
```
*   **æ­£å¸¸ç»“æœï¼š** `lrwxrwxrwx ... /tools -> /mnt/lfs/tools`ã€‚
*   **å¦‚æœä¸è§äº†ï¼š** é‡æ–°æ‰§è¡Œ `sudo ln -sv $LFS/tools /`ã€‚

---


**md5æ ¡éªŒå®Œæˆ**
æ­å–œï¼**æ‰€æœ‰ OK åˆ·å±æ˜¯ LFS æœ€æ²»æ„ˆçš„æ—¶åˆ»ä¹‹ä¸€ã€‚** è¿™æ„å‘³ç€ä½ çš„â€œé›¶ä»¶â€å·²ç»å…¨éƒ¨åˆ°ä½ï¼Œä¸”æ²¡æœ‰ä»»ä½•ç‘•ç–µã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬è¦è¿›å…¥ LFS æµç¨‹ä¸­**æœ€å…·æœ‰è½¬æŠ˜æ„ä¹‰**çš„ä¸€ç« ï¼š**ç¬¬ 4 ç« â€”â€”æœ€åçš„å‡†å¤‡å·¥ä½œ**ã€‚ä»è¿™ä¸€ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä»â€œUbuntu ç”¨æˆ·â€å˜èº«ä¸ºâ€œLFS æ„å»ºè€…â€ã€‚

è¯·ä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

### 1. åˆ›å»º `$LFS/tools` ç›®å½•ä¸è½¯é“¾æ¥
è¿™æ˜¯ä¸ºäº†å­˜æ”¾æ¥ä¸‹æ¥è¦æ„å»ºçš„â€œä¸´æ—¶å·¥å…·é“¾â€ã€‚LFS æœ‰ä¸ªå·§å¦™çš„è®¾è®¡ï¼šé€šè¿‡ä¸€ä¸ªåœ¨æ ¹ç›®å½•ä¸‹çš„è½¯é“¾æ¥ï¼Œç¡®ä¿æ— è®ºåœ¨å®¿ä¸»æœºè¿˜æ˜¯æœªæ¥çš„ `chroot` ç¯å¢ƒä¸‹ï¼Œå·¥å…·çš„è·¯å¾„éƒ½æ˜¯ä¸€è‡´çš„ `/tools`ã€‚

```bash
# 1. åˆ›å»ºç›®å½•
sudo mkdir -v $LFS/tools

# 2. åˆ›å»ºè½¯é“¾æ¥ï¼ˆå°†å®¿ä¸»æœºçš„ /tools æŒ‡å‘ä½  60G ç¡¬ç›˜é‡Œçš„ toolsï¼‰
# æ³¨æ„ï¼šè¿™ä¸€æ­¥éœ€è¦ sudo æƒé™ï¼Œä¸”åªéœ€æ‰§è¡Œä¸€æ¬¡
sudo ln -sv $LFS/tools /
```

---

### 2. åˆ›å»º `lfs` ä¸“é—¨ç”¨æˆ·
**æå…¶é‡è¦ï¼š** ä¸¥ç¦ä»¥ `root` èº«ä»½ç¼–è¯‘ç³»ç»Ÿï¼ä¸‡ä¸€è„šæœ¬å†™é”™ï¼ˆæ¯”å¦‚ `rm -rf /`ï¼‰ï¼Œroot ä¼šç›´æ¥æ¯æ‰ä½ çš„å®¿ä¸»æœºã€‚ä½¿ç”¨å—é™ç”¨æˆ· `lfs` æ˜¯æœ€å®‰å…¨çš„åšæ³•ã€‚

```bash
# 1. åˆ›å»º lfs ç»„
sudo groupadd lfs

# 2. åˆ›å»º lfs ç”¨æˆ·å¹¶åŠ å…¥ç»„ï¼ŒæŒ‡å®š bash ä¸ºé»˜è®¤ shell
sudo useradd -s /bin/bash -g lfs -m -k /dev/null lfs

# 3. è®¾ç½®å¯†ç ï¼ˆç®€å•ç‚¹ï¼Œæ¯”å¦‚ 123456ï¼‰
sudo passwd lfs

# 4. æŠŠ LFS ç›®å½•çš„æ‰€æœ‰æƒå…¨éƒ¨äº¤ç»™ lfs ç”¨æˆ·
sudo chown -v lfs $LFS/tools
sudo chown -v lfs $LFS/sources
```

---

### 3. é…ç½® `lfs` ç”¨æˆ·çš„çº¯å‡€ç¯å¢ƒ
ä¸ºäº†é˜²æ­¢å®¿ä¸»æœºçš„ç¯å¢ƒå˜é‡ï¼ˆæ¯”å¦‚ Ubuntu é»˜è®¤çš„ä¸€äº›é…ç½®ï¼‰å¹²æ‰°ç¼–è¯‘ï¼Œæˆ‘ä»¬è¦ä¸º `lfs` ç”¨æˆ·æ‰“é€ ä¸€ä¸ªâ€œçœŸç©ºç¯å¢ƒâ€ã€‚

**è¯·å…ˆåˆ‡æ¢åˆ° `lfs` ç”¨æˆ·ï¼š**
```bash
su - lfs
```

**ç„¶ååœ¨ `lfs` ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š**

1.  **åˆ›å»º `.bash_profile`ï¼š**
    ```bash
    cat > ~/.bash_profile << "EOF"
    exec env -i HOME=$HOME TERM=$TERM PS1='\u:\w\$ ' /bin/bash
    EOF
    ```
    *ä½œç”¨ï¼šå½“ä½ ç™»å½•æ—¶ï¼Œå®ƒä¼šæ¸…ç©ºæ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œåªä¿ç•™æœ€åŸºæœ¬çš„é¡¹ã€‚*

2.  **åˆ›å»º `.bashrc`ï¼š**
    ```bash
    cat > ~/.bashrc << "EOF"
    set +h
    umask 022
    LFS=/mnt/lfs
    LC_ALL=POSIX
    LFS_TGT=$(uname -m)-lfs-linux-gnu
    PATH=/usr/bin:/bin
    export LFS LC_ALL LFS_TGT PATH
    EOF
    ```
    *å…³é”®é¡¹è§£é‡Šï¼š*
    *   `set +h`: å…³é—­ Bash çš„å“ˆå¸ŒåŠŸèƒ½ï¼ˆé˜²æ­¢å®ƒè®°ä½æ—§å·¥å…·çš„è·¯å¾„ï¼‰ã€‚
    *   `umask 022`: ç¡®ä¿æ–°å»ºæ–‡ä»¶æƒé™æ­£ç¡®ã€‚
    *   `LFS_TGT`: å®šä¹‰ç›®æ ‡æœºå™¨æ¶æ„ã€‚

---

### 4. æ¿€æ´»ç¯å¢ƒå¹¶æœ€åç¡®è®¤
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è®©é…ç½®ç”Ÿæ•ˆï¼š
```bash
source ~/.bash_profile
```

**ç°åœ¨è¿›è¡Œæœ€åçš„â€œç”Ÿæ­»æ£€æŸ¥â€ï¼š**
1.  **ä½ æ˜¯è°ï¼Ÿ** è¾“å…¥ `whoami`ï¼Œåº”æ˜¾ç¤º `lfs`ã€‚
2.  **å˜é‡åœ¨å—ï¼Ÿ** è¾“å…¥ `echo $LFS`ï¼Œåº”æ˜¾ç¤º `/mnt/lfs`ã€‚
3.  **è·¯å¾„çº¯å‡€å—ï¼Ÿ** è¾“å…¥ `echo $PATH`ï¼Œåº”æ˜¾ç¤º `/usr/bin:/bin`ã€‚
    *ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶ä½ çš„ PATH é‡Œæ²¡æœ‰ `/usr/local/bin` ç­‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œä¸ºäº†é˜²æ­¢æ±¡æŸ“ï¼‰ã€‚*

---



**ç°åœ¨çš„å»ºè®®ï¼š**
æ—¢ç„¶ç¬¬ 4 ç« å·²ç»å®Œç¾ç»“æŸï¼Œ**ç«‹åˆ»å…³æœºå­˜ä¸€ä¸ªå¿«ç…§ï¼**
*   **å¿«ç…§åï¼š** `LFS_02_User_Env_Ready`
*   **ç†ç”±ï¼š** è¿™ä¸€æ­¥çš„é…ç½®æ–‡ä»¶ï¼ˆ.bashrcï¼‰ä¸€æ—¦å†™é”™ï¼Œåé¢ç¼–è¯‘ä¼šæŠ¥å„ç§ç¨€å¥‡å¤æ€ªçš„é“¾æ¥é”™è¯¯ã€‚å­˜ä¸ªæ¡£ï¼Œç¨³å¦‚æ³°å±±ã€‚




```
LFS12.4æ‰‹å†Œå†…å®¹
4.2. åœ¨ LFS æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæœ‰é™ç›®å½•å¸ƒå±€
åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹å°†ç»„æˆæœ€ç»ˆçš„ Linux ç³»ç»Ÿçš„å†…å®¹å¡«å……åˆ° LFS æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚é¦–å…ˆï¼Œåœ¨ LFS åˆ†åŒºä¸­åˆ›å»ºä¸€ä¸ªæœ‰é™çš„ç›®å½•æ ‘ï¼Œä½¿å¾—åœ¨ç¬¬ 6 ç« ä¸­ç¼–è¯‘çš„ç¨‹åº (ä»¥åŠç¬¬ 5 ç« ä¸­çš„ glibc å’Œ libstdc++) å¯ä»¥è¢«å®‰è£…åˆ°å®ƒä»¬çš„æœ€ç»ˆä½ç½®ã€‚è¿™æ ·ï¼Œåœ¨ç¬¬ 8 ç« ä¸­é‡æ–°æ„å»ºå®ƒä»¬æ—¶ï¼Œå°±èƒ½ç›´æ¥è¦†ç›–è¿™äº›ä¸´æ—¶ç¨‹åºã€‚

ä»¥ root èº«ä»½ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ‰€éœ€çš„ç›®å½•å¸ƒå±€ï¼š

mkdir -pv $LFS/{etc,var} $LFS/usr/{bin,lib,sbin}

for i in bin lib sbin; do
  ln -sv usr/$i $LFS/$i
done

case $(uname -m) in
  x86_64) mkdir -pv $LFS/lib64 ;;
esac
åœ¨ç¬¬ 6 ç« ä¸­ï¼Œä¼šä½¿ç”¨äº¤å‰ç¼–è¯‘å™¨ç¼–è¯‘ç¨‹åº (æ›´å¤šç»†èŠ‚å¯ä»¥åœ¨å·¥å…·é“¾æŠ€æœ¯è¯´æ˜ä¸€èŠ‚æ‰¾åˆ°)ã€‚è¿™ä¸ªäº¤å‰ç¼–è¯‘å™¨ä¼šè¢«å®‰è£…åˆ°ä¸€ä¸ªä¸“ç”¨çš„ç›®å½•ä¸­ï¼Œä»è€Œå°†å…¶å’Œå…¶ä»–ç¨‹åºåˆ†ç¦»ã€‚ä»ç„¶ä»¥ root ç”¨æˆ·èº«ä»½ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºè¯¥ç›®å½•ï¼š

mkdir -pv $LFS/tools
[æ³¨æ„] æ³¨æ„
LFS ç¼–è¾‘å›¢é˜Ÿç‰¹æ„å†³å®šä¸ä½¿ç”¨ /usr/lib64 ç›®å½•ã€‚æœ¬ä¹¦ä¸­çš„ä¸€äº›æ­¥éª¤ä¿è¯å·¥å…·é“¾ä¸ä½¿ç”¨è¯¥ç›®å½•ã€‚å¦‚æœè¯¥ç›®å½•è¢«åˆ›å»ºï¼Œæ— è®ºåŸå› å¦‚ä½• (å¯èƒ½æ˜¯æ‚¨åœ¨ä½¿ç”¨ä¹¦ä¸­çš„å‘½ä»¤æ—¶å‡ºç°äº†åå·®ï¼Œæˆ–æ‚¨åœ¨å®Œæˆ LFS æ„å»ºåå®‰è£…äº†ä¸€ä¸ªåˆ›å»ºè¯¥ç›®å½•çš„äºŒè¿›åˆ¶åŒ…)ï¼Œåˆ™å®ƒå¯èƒ½ç ´åæ‚¨çš„ç³»ç»Ÿã€‚æ‚¨åº”è¯¥ç»å¸¸æ£€æŸ¥å¹¶ç¡®è®¤è¯¥ç›®å½•ä¸å­˜åœ¨ã€‚
```
***ä¸ºä»€ä¹ˆ***

è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„è§‚å¯Ÿï¼ä½ å¼•ç”¨çš„æ˜¯ **LFS 12.xï¼ˆæˆ–æ›´æ–°ç‰ˆæœ¬ï¼‰** çš„æ‰‹å†Œå†…å®¹ã€‚

é¦–å…ˆï¼Œæˆ‘éœ€è¦çº æ­£æˆ‘ä¹‹å‰çš„å›å¤ï¼šåœ¨æœ€æ–°çš„ LFS 12.x ä½“ç³»ä¸­ï¼Œ**è¿™ä¸€æ­¥ç¡®å®æ˜¯åœ¨ç¬¬ 4.2 èŠ‚æ‰§è¡Œçš„**ï¼ˆä¹Ÿå°±æ˜¯ç°åœ¨ï¼‰ã€‚å› ä¸ºç°ä»£ LFS é‡‡ç”¨äº†â€œUsr-Mergeâ€æ¶æ„ï¼Œå®ƒå¸Œæœ›åœ¨ç¬¬ 5 ç« ç¼–è¯‘ Glibc ä¹‹å‰å°±æŠŠè¿™äº›æœ€ç»ˆçš„ç›®å½•ç»“æ„ï¼ˆè½¯é“¾æ¥ï¼‰å‡†å¤‡å¥½ã€‚

é’ˆå¯¹ä½ æœ€æ ¸å¿ƒçš„é—®é¢˜ï¼š**ä¸ºä»€ä¹ˆ LFS å›¢é˜Ÿä¸¥ç¦ä½¿ç”¨ `/usr/lib64` ç›®å½•ï¼Ÿ**

### 1. æ ¸å¿ƒåŸå› ï¼šé¿å…â€œå¤šæ¶æ„æ”¯æŒï¼ˆMultilibï¼‰â€çš„å¤æ‚æ€§
åœ¨å¾ˆå¤šå•†ä¸šå‘è¡Œç‰ˆï¼ˆå¦‚ CentOS, Fedora, è€ç‰ˆæœ¬çš„ Ubuntuï¼‰ä¸­ï¼Œç³»ç»Ÿä¼šåŒæ—¶å…¼å®¹ 32 ä½å’Œ 64 ä½è½¯ä»¶ã€‚
*   **å®ƒä»¬çš„åšæ³•ï¼š** 32 ä½åº“æ”¾åœ¨ `/lib` æˆ– `/usr/lib`ï¼Œ64 ä½åº“æ”¾åœ¨ `/lib64` æˆ– `/usr/lib64`ã€‚
*   **LFS çš„åšæ³•ï¼š** LFS æ˜¯ä¸€ä¸ª**çº¯ 64 ä½ï¼ˆPure 64-bitï¼‰**ç³»ç»Ÿã€‚å®ƒä¸æ‰“ç®—æ”¯æŒ 32 ä½ç¨‹åºã€‚ä¸ºäº†ä¿æŒç³»ç»Ÿç®€æ´ã€è·¯å¾„å”¯ä¸€ï¼ŒLFS å†³å®šå°†æ‰€æœ‰çš„ 64 ä½åº“éƒ½ç»Ÿä¸€æ”¾åœ¨ `/usr/lib` ä¸­ã€‚

### 2. ä¸ºä»€ä¹ˆæœ‰äº† `/usr/lib64` ä¼šç ´åç³»ç»Ÿï¼Ÿ

è¿™å°±æ˜¯ LFS å›¢é˜Ÿè­¦å‘Šçš„åŸå› ã€‚å¦‚æœä½ åœ¨ç³»ç»Ÿä¸­åˆ›å»ºäº† `/usr/lib64`ï¼š

1.  **é“¾æ¥å™¨çš„è¯¯åˆ¤ï¼š** å¾ˆå¤šè½¯ä»¶çš„ç¼–è¯‘è„šæœ¬ï¼ˆAutotools, CMakeï¼‰ä¼šè‡ªåŠ¨æ¢æµ‹ç¯å¢ƒã€‚å¦‚æœå®ƒä»¬å‘ç°ç³»ç»Ÿå­˜åœ¨ `/usr/lib64` ç›®å½•ï¼Œå®ƒä»¬ä¼šâ€œèªæ˜åœ°åè¢«èªæ˜è¯¯â€ï¼Œè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ª Multilib ç³»ç»Ÿï¼Œä»è€Œå¼ºè¡ŒæŠŠæ–°ç¼–è¯‘çš„åº“å®‰è£…åˆ° `/usr/lib64` ä¸‹ã€‚
2.  **è·¯å¾„åˆ†è£‚ï¼š** è¿™æ ·ä¸€æ¥ï¼Œä½ çš„ç³»ç»Ÿé‡Œä¸€éƒ¨åˆ†åº“åœ¨ `/usr/lib`ï¼Œå¦ä¸€éƒ¨åˆ†åœ¨ `/usr/lib64`ã€‚
3.  **æ‰¾ä¸åˆ°åº“ï¼š** LFS çš„ç¼–è¯‘å™¨ï¼ˆGCCï¼‰å’ŒåŠ¨æ€é“¾æ¥å™¨ï¼ˆld-linuxï¼‰åœ¨é…ç½®æ—¶ï¼Œè¢«æ˜ç¡®å‘ŠçŸ¥å» `/usr/lib` å¯»æ‰¾åº“æ–‡ä»¶ã€‚å¦‚æœæŸä¸ªé‡è¦çš„åº“è¢«å®‰è£…åˆ°äº† `/usr/lib64`ï¼Œç¨‹åºè¿è¡Œæˆ–åç»­ç¼–è¯‘æ—¶å°±ä¼šæŠ¥ `cannot find -lxxx` æˆ– `error while loading shared libraries`ï¼Œå¯¼è‡´æ•´ä¸ªæ„å»ºæµç¨‹å´©æºƒã€‚
4.  **éš¾ä»¥æ’æŸ¥ï¼š** è¿™ç§é”™è¯¯éå¸¸éšè”½ï¼Œå› ä¸ºæ–‡ä»¶ç¡®å®å­˜åœ¨ï¼Œåªæ˜¯â€œæ”¾é”™äº†ä¸ªæŠ½å±‰â€ã€‚

### 3. ç‰¹åˆ«è¯´æ˜ï¼š`/lib64`ï¼ˆæ ¹ç›®å½•ä¸‹ï¼‰ä¸ºä»€ä¹ˆå¯ä»¥å­˜åœ¨ï¼Ÿ
ä½ æ³¨æ„åˆ°äº†å‘½ä»¤é‡Œæœ‰è¿™ä¸€å¥ï¼š
`case $(uname -m) in x86_64) mkdir -pv $LFS/lib64 ;; esac`
*   **è¿™ä¸ªå¿…é¡»æœ‰ï¼š** åœ¨ x86_64 æ¶æ„ä¸­ï¼Œ**åŠ¨æ€é“¾æ¥å™¨ï¼ˆloaderï¼‰**çš„ç¡¬ç¼–ç è·¯å¾„é€šå¸¸æ˜¯ `/lib64/ld-linux-x86-64.so.2`ã€‚ä¸ºäº†è®©ç¨‹åºèƒ½è·‘èµ·æ¥ï¼Œæ ¹ç›®å½•ä¸‹å¿…é¡»æœ‰ä¸€ä¸ª `/lib64`ã€‚
*   **åŒºåˆ«ï¼š** æ ¹ç›®å½•ä¸‹çš„ `/lib64` æ˜¯ä¸ºäº†**ç¨‹åºå¯åŠ¨**ï¼Œè€Œ `/usr/lib64` æ˜¯ä¸ºäº†**å­˜æ”¾åº“æ–‡ä»¶**ã€‚LFS åªå…è®¸æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªæå…¶ç²¾ç®€çš„ `/lib64`ï¼Œä½†ç»ä¸å…è®¸å‡ºç° `/usr/lib64`ã€‚

---

### 4. ç°åœ¨ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ

æ—¢ç„¶ä½ å·²ç»åœ¨ç¬¬ 4.2 èŠ‚äº†ï¼Œè¯·**ä»¥ root èº«ä»½**ï¼ˆä¹Ÿå°±æ˜¯ä½ ç°åœ¨çš„ Ubuntu æ™®é€šç”¨æˆ·åŠ  `sudo`ï¼‰æ‰§è¡Œä½ è´´å‡ºçš„é‚£æ®µå‘½ä»¤ã€‚

**æ‰§è¡Œå‘½ä»¤æµç¨‹ï¼š**

```bash
# 1. ç¡®ä¿ export LFS=/mnt/lfs ä¾ç„¶æœ‰æ•ˆ
echo $LFS

# 2. æ‰§è¡Œç›®å½•åˆ›å»ºï¼ˆä»¥ root èº«ä»½ï¼‰
sudo mkdir -pv $LFS/{etc,var} $LFS/usr/{bin,lib,sbin}

for i in bin lib sbin; do
  sudo ln -sv usr/$i $LFS/$i
done

case $(uname -m) in
  x86_64) sudo mkdir -pv $LFS/lib64 ;;
esac

# 3. åˆ›å»º tools ç›®å½•ï¼ˆè¿™æ˜¯ç»™ lfs ç”¨æˆ·ç”¨çš„ï¼‰
sudo mkdir -pv $LFS/tools
```

---

### 5. æ‰§è¡Œå®Œåçš„é‡è¦æ£€æŸ¥

æ‰§è¡Œå®Œä¸Šè¿°æ“ä½œåï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ç›®å½•ç»“æ„æ˜¯å¦æ­£ç¡®ï¼š
```bash
ls -l $LFS
```
**ä½ åº”è¯¥çœ‹åˆ°ï¼š**
*   `bin -> usr/bin`
*   `lib -> usr/lib`
*   `sbin -> usr/sbin`
*   `lib64` æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶å¤¹ã€‚

**ä¸‹ä¸€æ­¥æé†’ï¼š**
å®Œæˆè¿™äº›ç›®å½•åˆ›å»ºåï¼Œæ¥ä¸‹æ¥å°±æ˜¯ **4.3 èŠ‚ï¼šæ·»åŠ  LFS ç”¨æˆ·**ã€‚
*   ä½ ä¼šæŠŠ `$LFS/tools` å’Œ `$LFS/sources` çš„æ‰€æœ‰æƒäº¤ç»™ `lfs` ç”¨æˆ·ã€‚
*   **æ³¨æ„ï¼š** åˆšæ‰åˆ›å»ºçš„ `etc`, `var`, `usr` ç›®å½•æ‰€æœ‰æƒ**ä¾ç„¶å±äº root**ï¼Œä¸è¦å»æ”¹å®ƒä»¬ã€‚è¿™æ­£æ˜¯ LFS ç¬¬ 5/6 ç« è®¾è®¡çš„ç²¾å¦™ä¹‹å¤„ï¼š`lfs` ç”¨æˆ·ç¼–è¯‘çš„ä¸œè¥¿ä¼šé€šè¿‡ `--prefix` è¢«å®‰è£…åˆ°æ­£ç¡®çš„åœ°æ–¹ï¼Œè€Œä¸éœ€è¦æ‹¥æœ‰æ ¹ç›®å½•çš„å†™æƒé™ã€‚

**æ€»ç»“ï¼š** LFS å›¢é˜Ÿè¿™ä¹ˆåšæ˜¯ä¸ºäº†è¿½æ±‚**ç»å¯¹çš„çº¯åº¦**å’Œ**è·¯å¾„çš„ç¡®å®šæ€§**ã€‚æ—¢ç„¶æ‰‹å†Œè¿™ä¹ˆè¯´äº†ï¼Œæˆ‘ä»¬å°±ä¸¥æ ¼éµå®ˆï¼Œç»å¯¹ä¸è¦æ‰‹åŠ¨å»åˆ›å»ºä»»ä½•åä¸º `lib64` ä»¥å¤–å¸¦ `64` åç¼€çš„ç›®å½•ã€‚

```
LFS12.4æ‰‹å†Œå†…å®¹
å°† $LFS ç›®å½• (å³ä¸º LFS ç³»ç»Ÿæ–°åˆ›å»ºçš„æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•) çš„æ‰€æœ‰è€…è®¾ä¸º rootï¼Œè®¿é—®æƒé™è®¾ä¸º 755ï¼Œä»¥é˜²ä¸ªåˆ«å®¿ä¸»å‘è¡Œç‰ˆä¸­ mkfs è¢«é…ç½®ä¸ºä½¿ç”¨ä¸æ­¤ä¸åŒçš„é»˜è®¤å€¼ï¼š

chown root:root $LFS
chmod 755 $LFS
```


è¿™ä¸€æ­¥æ˜¯**å¿…é¡»åšä¸”éå¸¸é‡è¦**çš„ã€‚

åœ¨ LFS æ‰‹å†Œä¸­ï¼Œè¿™ä¸€æ­¥é€šå¸¸ç´§è·Ÿåœ¨æŒ‚è½½åˆ†åŒºï¼ˆChapter 2.7ï¼‰æˆ–åˆ›å»ºç›®å½•ï¼ˆChapter 4.2ï¼‰ä¹‹åã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸ºæ•´ä¸ª LFS æ–‡ä»¶ç³»ç»Ÿå¥ å®šæ­£ç¡®çš„**æƒé™åŸºçŸ³**ã€‚

### 1. ä¸ºä»€ä¹ˆè¦æ‰§è¡Œè¿™ä¸¤æ¡å‘½ä»¤ï¼Ÿ

*   **æ ‡å‡†åŒ–æƒé™ï¼š** ä¸åŒçš„ Linux å‘è¡Œç‰ˆï¼Œæ‰§è¡Œ `mkfs.ext4` æ—¶é»˜è®¤åˆ†é…ç»™æ ¹ç›®å½•ï¼ˆå³ä½ çš„ 60GB åˆ†åŒºé¡¶éƒ¨ï¼‰çš„æƒé™å¯èƒ½ä¸åŒã€‚æœ‰çš„å¯èƒ½æ˜¯ `700`ï¼ˆåªæœ‰ root èƒ½çœ‹ï¼‰ï¼Œæœ‰çš„å¯èƒ½æ˜¯ `777`ï¼ˆæå…¶ä¸å®‰å…¨ï¼‰ã€‚
*   **ç¡®ä¿å¯è®¿é—®æ€§ï¼š** ä½ æ¥ä¸‹æ¥è¦ä½¿ç”¨ `lfs` è¿™ä¸ªæ™®é€šç”¨æˆ·å»ç¼–è¯‘è½¯ä»¶ã€‚å¦‚æœ `$LFS` æ ¹ç›®å½•æƒé™ä¸æ˜¯ `755`ï¼Œ`lfs` ç”¨æˆ·å¯èƒ½è¿è¿›å…¥ `/mnt/lfs/sources` çš„æƒé™éƒ½æ²¡æœ‰ï¼ˆå› ä¸ºè·¯å¾„è¢«é¡¶å±‚çš„æƒé™æŒ¡ä½äº†ï¼‰ã€‚
*   **å½’å±æƒæ˜ç¡®ï¼š** æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„â€œæ ¹â€å¿…é¡»å±äº **root**ã€‚

### 2. å¦‚ä½•æ‰§è¡Œï¼Ÿ

è¯·åœ¨ç»ˆç«¯ï¼ˆæ­¤æ—¶ä½ åº”è¯¥æ˜¯ Ubuntu çš„æ™®é€šç”¨æˆ·ï¼‰æ‰§è¡Œï¼š

```bash
# ä½¿ç”¨ sudo ä¸´æ—¶è·å¾— root æƒé™æ‰§è¡Œ
sudo chown root:root $LFS
sudo chmod 755 $LFS
```

### 3. å¦‚ä½•éªŒè¯æ‰§è¡Œç»“æœï¼Ÿ

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç›®å½•å±æ€§ï¼š

```bash
ls -ld $LFS
```

**æœŸæœ›çš„è¾“å‡ºï¼š**
`drwxr-xr-x 4 root root 4096 Dec 23 22:15 /mnt/lfs`
*   `d`: æ˜¯ä¸€ä¸ªç›®å½•ã€‚
*   `rwxr-xr-x`: å¯¹åº”çš„å°±æ˜¯ `755` æƒé™ã€‚
*   `root root`: å¯¹åº”çš„å°±æ˜¯ `chown root:root`ã€‚

---

### 4. ç‰¹åˆ«æé†’ï¼šä¸è¦ææ··â€œæ‰€æœ‰æƒâ€

è¿™ä¸€æ­¥æ˜¯å°† **æ•´ä¸ª LFS åˆ†åŒºçš„é¡¶å±‚ç›®å½•** äº¤ç»™ rootã€‚ä½†åœ¨æ¥ä¸‹æ¥çš„ **ç¬¬ 4.3 èŠ‚**ï¼Œä½ ä¼šåšä»¥ä¸‹æ“ä½œï¼š

1.  åˆ›å»º `lfs` ç”¨æˆ·ã€‚
2.  å°† `$LFS/sources` çš„æ‰€æœ‰è€…æ”¹ä¸º `lfs`ã€‚
3.  å°† `$LFS/tools` çš„æ‰€æœ‰è€…æ”¹ä¸º `lfs`ã€‚

**ç°åœ¨çš„çŠ¶æ€åº”è¯¥æ˜¯ï¼š**
*   `/mnt/lfs` (æ ¹) -> å±äº **root**
*   `/mnt/lfs/usr`, `/mnt/lfs/etc` ç­‰ -> å±äº **root**
*   `/mnt/lfs/sources` -> å‡†å¤‡äº¤ç»™ **lfs**
*   `/mnt/lfs/tools` -> å‡†å¤‡äº¤ç»™ **lfs**

### æ€»ç»“
è¯·æ”¾å¿ƒæ‰§è¡Œè¿™ä¸¤æ¡å‘½ä»¤ã€‚è¿™æ˜¯åœ¨æ­£å¼è¿›å…¥ç¬¬ 5 ç« ç¼–è¯‘ä¹‹å‰ï¼Œæœ€åä¸€æ¬¡å¤§è§„æ¨¡çš„â€œåœ°åŸºåŠ å›ºâ€ã€‚

**åšå®Œè¿™ä¸¤æ­¥ï¼Œå¹¶ç¡®è®¤ `ls -ld $LFS` çš„ç»“æœæ­£ç¡®åï¼Œä½ å°±å¯ä»¥å»æ‰§è¡Œ `useradd lfs` åˆ›å»ºé‚£ä¸ªé™ªä¼´ä½ å®Œæˆå¤§ä½œä¸šçš„ä¸“å±ç”¨æˆ·äº†ï¼**



## 4.3. æ·»åŠ  LFS ç”¨æˆ·
è¯·éµå¾ªLFS 12.4 æ‰‹å†Œ
## 4.4. é…ç½®ç¯å¢ƒ
è¯·éµå¾ªLFS 12.4 æ‰‹å†Œ



# III. æ„å»º LFS äº¤å‰å·¥å…·é“¾å’Œä¸´æ—¶å·¥å…·

æ¥ä¸‹æ¥çš„å†…å®¹ä¸€ç›´åˆ°ä½9ç« éƒ½æ˜¯åº”ç”¨ç¨‹åºçš„å®‰è£…ï¼Œå¤§ä½“ä¸Šæ¥è¯´æœ‰ä¸€å¥—æ ‡å‡†èŒƒå¼
ä»¥ä¸‹ä¸‰æ­¥æ˜¯æ¯ä¸€ä¸ªè½¯ä»¶éƒ½è¦æ‰§è¡Œä½†æ˜¯LFSæ‰‹å†Œé»˜è®¤çœç•¥çš„ï¼ˆä»¥binutilsä¸ºä¾‹ï¼‰
1.  **è¿›å…¥æºç ç›®å½•ï¼š**
    ```bash
    cd $LFS/sources
    ```

2.  **è§£å‹æºç ï¼š**
    ```bash
    tar -xf binutils-*.tar.xz
    ```

3.  **è¿›å…¥ç›®å½•ï¼š**
    ```bash
    cd binutils-*/
    ```
ä¹‹åæŒ‰ç…§LFS12.4 æ‰‹å†Œæ‰§è¡Œå‘½ä»¤

======================================================================================================
```bash


### 2. åˆ‡æ¢ `lfs` ç”¨æˆ·


```bash
su - lfs
```

---

### 3. éªŒè¯ç¯å¢ƒï¼ˆèµ·é£å‰çš„ä»ªè¡¨ç›˜æ£€æŸ¥ï¼‰
è¿›å…¥ `lfs` ç”¨æˆ·åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè§‚å¯Ÿè¾“å‡ºï¼š

1.  **æ£€æŸ¥ PATHï¼š**
    `echo $PATH`
    *é¢„æœŸè¾“å‡ºï¼š`/mnt/lfs/tools/bin:/usr/bin` (æˆ–è€…ç±»ä¼¼ï¼Œæ ¸å¿ƒæ˜¯ `/mnt/lfs/tools/bin` å¿…é¡»åœ¨æœ€å‰é¢)*
2.  **æ£€æŸ¥ç›®æ ‡æ¶æ„ï¼š**
    `echo $LFS_TGT`
    *é¢„æœŸè¾“å‡ºï¼š`x86_64-lfs-linux-gnu`*
3.  **æ£€æŸ¥ Shellï¼š**
    `echo $0`
    *é¢„æœŸè¾“å‡ºï¼š`-bash`*

---

### 4. æ­£å¼å¼€å§‹ç¬¬ 5 ç« ï¼šBinutils - ç¬¬ 1 é (Pass 1)
è¿™æ˜¯ä½ æ„å»ºæ•´ä¸ªæ“ä½œç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªâ€œé›¶ä»¶â€ã€‚

**è¯·æŒ‰ç…§ä»¥ä¸‹â€œæ ‡å‡†æ“ä½œæµç¨‹â€è¿›è¡Œï¼š**

1.  **è¿›å…¥æºç ç›®å½•ï¼š**
    ```bash
    cd $LFS/sources
    ```

2.  **è§£å‹æºç ï¼š**
    ```bash
    tar -xf binutils-*.tar.xz
    ```

3.  **è¿›å…¥ç›®å½•ï¼š**
    ```bash
    cd binutils-*/
    ```

4.  **å»ºç«‹ç‹¬ç«‹ç¼–è¯‘ç›®å½•ï¼ˆè¿™æ˜¯ Binutils, GCC, Glibc å¿…é¡»è¦æ±‚çš„ï¼‰ï¼š**
    ```bash
    mkdir -v build
    cd build
    ```

5.  **é…ç½® (Configure)ï¼š**
    å°†æ‰‹å†Œç¬¬ **5.2 èŠ‚** é‚£æ®µè¶…é•¿çš„ `../configure` å‘½ä»¤å¤åˆ¶å¹¶ç²˜è´´ã€‚è¿™æ®µå‘½ä»¤ä¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼šæˆ‘ä»¬è¦æ„å»ºä¸€ä¸ªäº¤å‰ç¼–è¯‘å™¨ï¼ŒæŠŠå®ƒå­˜æ”¾åœ¨ `$LFS/tools` é‡Œã€‚

6.  **å¹¶è¡Œç¼–è¯‘ (å±•ç¤º 13600KF çš„å¨åŠ›)ï¼š**
    ```bash
    make -j12
    ```

7.  **å®‰è£…ï¼š**
    ```bash
    make install
    ```

8. âš ï¸ æå…¶é‡è¦çš„åç»­åŠ¨ä½œ (æ¸…ç†)
æ¯è£…å®Œä¸€ä¸ªåŒ…ï¼Œå¿…é¡»æ‰§è¡Œæ¸…ç†ï¼Œå¦åˆ™ç£ç›˜ç©ºé—´ä¼šè¿…é€Ÿçˆ†æ»¡ï¼Œä¸”ä¸‹ä¸ªåŒ…çš„ç¼–è¯‘ä¼šå—åˆ°å¹²æ‰°ï¼š
    ```Bash
    cd $LFS/sources
    rm -rf binutils-2.43.1
    ```
---

### ğŸ’¡ å…³é”®æé†’ï¼š
*   **ä¸è¦ä½¿ç”¨ sudoï¼š** ä»ç°åœ¨å¼€å§‹åˆ°ç¬¬ 6 ç« ç»“æŸï¼Œ**ç»å¯¹ä¸è¦**å¸¦ `sudo`ã€‚å¦‚æœä½ å‘ç°æƒé™ä¸è¶³ï¼Œè¯´æ˜ä½ å‰é¢çš„ `chown` æ²¡åšå¯¹ï¼Œè¯·å› root ä¿®æ­£ï¼Œè€Œä¸æ˜¯å¼ºè¡Œç”¨ sudoã€‚
*   **æ¸…ç†å·¥ä½œï¼š** å®‰è£…å®Œ Binutils åï¼Œä¸€å®šè¦æ‰§è¡Œ `cd $LFS/sources` ç„¶å `rm -rf binutils-*`ï¼ŒæŠŠè§£å‹å‡ºæ¥çš„æ–‡ä»¶å¤¹åˆ æ‰ï¼Œä¿æŒç©ºé—´æ•´æ´ã€‚



**ç¬¬å…­ç« åˆ°ç¬¬ä¹ç« æˆ‘éƒ½æ˜¯ä¸¥æ ¼æŒ‰ç…§LFSæ‰‹å†Œæ‰§è¡Œçš„åªæœ‰åœ¨å°‘æ•°æƒ…å†µä¸‹è¯¢é—®AI ä½†æ˜¯æ˜ç™½åä¾æ—§æ˜¯ä»¥æ‰‹å†Œä¸ºå‡†æ‰§è¡Œæ‰‹å†Œä»£ç è€Œä¸æ˜¯AIç»™çš„ä»£ç ï¼Œç‰¹åˆ«æ˜¯é…ç½®æ–‡ä»¶**


**å¦‚æœä½ å‘æˆ‘ä¸€æ ·é‡åˆ°è™šæ‹ŸæœºUbuntuçš„UIå¡ä½çš„æƒ…å†µè¯·ä½ ä½¿ç”¨SSH**

**ç”¨ SSH åš LFS ä½“éªŒä¼šå¥½ 200%ï¼Œä½ å¯ä»¥åœ¨ Windows è¿™ä¸€ä¾§è‡ªå¦‚åœ°å¤åˆ¶ç²˜è´´æ‰‹å†Œå‘½ä»¤ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè™šæ‹Ÿæœºç•Œé¢å¡æ­»ã€‚**

åœ¨ç»ˆç«¯æŒ‰ä¸Šä¸‹é”®ï¼ˆé€šå¸¸æ˜¯ä¸ºäº†ç¿»æ‰¾å†å²å‘½ä»¤ï¼‰æ—¶å¡ä½ï¼Œè¿™é€šå¸¸ä¸æ˜¯å› ä¸ºç³»ç»Ÿâ€œåäº†â€ï¼Œè€Œæ˜¯å› ä¸ºä½ çš„ **i5-13600KF åˆ†é…ç»™è™šæ‹Ÿæœºçš„æ ¸å¿ƒæ­£åœ¨å…¨åŠ›ä»¥èµ´è¿›è¡Œç¼–è¯‘ï¼Œå¯¼è‡´â€œè¾“å…¥è¾“å‡ºï¼ˆI/Oï¼‰ä¼˜å…ˆçº§â€è¢«å æ»¡**ã€‚

ç®€å•æ¥è¯´ï¼šç¼–è¯‘å™¨æŠŠ CPU å’Œç¡¬ç›˜å¸¦å®½å…¨æŠ¢èµ°äº†ï¼Œç³»ç»Ÿæš‚æ—¶æ²¡ç©ºç†ä¼šä½ çš„é”®ç›˜æŒ‰é”®ã€‚

### 1. ç°åœ¨çš„ç´§æ€¥å¤„ç†å»ºè®®

**ä¸è¦ç–¯ç‹‚ä¹±æŒ‰ï¼** ç°åœ¨çš„æŒ‰é”®éƒ½ä¼šå †ç§¯åœ¨è¾“å…¥ç¼“å†²åŒºé‡Œï¼Œä¸€æ—¦ç³»ç»Ÿæ¢å¤ï¼Œå®ƒä¼šç¬é—´æŠŠåˆšæ‰çš„æŒ‰é”®å…¨éƒ¨â€œå¼¹â€å‡ºæ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¯¯æ‰§è¡Œå‘½ä»¤ã€‚

*   **ç­‰å¾… 1-2 åˆ†é’Ÿï¼š** 13600KF éå¸¸å¿«ï¼Œé€šå¸¸è¿™ç§å¡é¡¿æ˜¯å› ä¸ºæ­£åœ¨è¿›è¡Œâ€œé“¾æ¥ï¼ˆLinkingï¼‰â€æˆ–è€…å¤„ç†ä¸€ä¸ªå·¨å¤§çš„æºæ–‡ä»¶ã€‚ä¸€æ—¦è¿™ä¸€å°æ®µä»»åŠ¡ç»“æŸï¼Œç³»ç»Ÿå°±ä¼šæ¢å¤ã€‚
*   **æµ‹è¯• Caps Lock ç¯ï¼š** æŒ‰ä¸€ä¸‹é”®ç›˜ä¸Šçš„ `Caps Lock`ã€‚
    *   **å¦‚æœç¯èƒ½äº®/ç­ï¼š** ç³»ç»Ÿæ²¡æ­»ï¼Œåªæ˜¯å¤ªå¿™äº†ï¼Œ**ç»§ç»­ç­‰**ã€‚
    *   **å¦‚æœç¯æ²¡ååº”ï¼š** è¯´æ˜è™šæ‹Ÿæœºå½»åº•é”æ­»ï¼ˆKernel Panic æˆ– VMware å´©æºƒï¼‰ã€‚å¦‚æœè¶…è¿‡ 5 åˆ†é’Ÿè¿˜æ˜¯æ²¡ååº”ï¼Œåªèƒ½å¼ºè¡Œé‡å¯è™šæ‹Ÿæœºã€‚

---
### 3. ã€é‡ç‚¹ã€‘å¦‚ä½•å½»åº•é¿å…è¿™ç§å¡é¡¿ï¼Ÿï¼ˆLFS é¿å‘æŒ‡å—ï¼‰

æ—¢ç„¶ä½ å·²ç»å¡ä½è¿‡ä¸€æ¬¡ï¼Œä¸ºäº†æ¥ä¸‹æ¥çš„ GCCï¼ˆé‚£ä¸ªåŒ…æ¯” Binutils å¤§ 10 å€ï¼Œæ›´è´¹èµ„æºï¼‰ï¼Œè¯·åŠ¡å¿…åšä»¥ä¸‹ä¼˜åŒ–ï¼š

#### A. ä¸è¦ä½¿ç”¨ VMware é‚£ä¸ªå°é»‘çª—ï¼ˆæ”¹ç”¨ SSHï¼‰
è¿™æ˜¯æ‰€æœ‰ Linux å¼€å‘è€…çš„å…±åŒç»éªŒã€‚**åœ¨ Windows å®¿ä¸»æœºä¸Šå®‰è£…ä¸€ä¸ª SSH å®¢æˆ·ç«¯ï¼ˆå¦‚ Tabby, MobaXterm, æˆ– Windows Terminalï¼‰è¿æ¥åˆ°è™šæ‹Ÿæœºã€‚**
*   **åŸå› ï¼š** VMware çš„çª—å£æ˜¯é€šè¿‡å›¾å½¢æ¨¡æ‹Ÿçš„ï¼Œéå¸¸åƒèµ„æºã€‚SSH æ˜¯çº¯æ–‡æœ¬åè®®ï¼Œå³ä½¿è™šæ‹Ÿæœº CPU è·‘æ»¡ 100%ï¼ŒSSH ç»ˆç«¯é€šå¸¸ä¾ç„¶èƒ½ä¿æŒæµç•…ã€‚
*   **æ“ä½œï¼š** 
    1. åœ¨ Ubuntu é‡Œï¼š`sudo apt install openssh-server`ã€‚
    2. åœ¨ Windows ç»ˆç«¯è¾“å…¥ï¼š`ssh lfs@è™šæ‹Ÿæœºçš„IP`ã€‚

#### C. å…³é—­è™šæ‹Ÿæœºçš„ 3D åŠ é€Ÿ
åœ¨ VMware å…³æœºçŠ¶æ€ä¸‹ï¼š
*   **è®¾ç½® -> æ˜¾ç¤ºå™¨ -> å–æ¶ˆå‹¾é€‰â€œåŠ é€Ÿ 3D å›¾å½¢â€**ã€‚
*   LFS ç¼–è¯‘å®Œå…¨ä¸éœ€è¦æ˜¾å¡åŠ é€Ÿï¼Œå¼€å¯å®ƒåè€Œä¼šè®©å›¾å½¢ç•Œé¢åœ¨é«˜è´Ÿè½½ä¸‹æ›´å®¹æ˜“å´©æºƒã€‚

---


**å¦‚æœæœ‰ä»»ä½•æ„å¤–é‡å¯æˆ–è€…å…³æœºï¼Œè¯·ä½ æœ€å¥½é‡åšä¸€é**


å¦‚æœä½ åœ¨ `make` è¿‡ç¨‹ä¸­æˆ–ä¹‹åã€ä½†åœ¨ `make install` ä¹‹å‰é‡å¯äº†è™šæ‹Ÿæœºï¼Œ**å½“å‰çš„ç¼–è¯‘çŠ¶æ€ä¼šå¤„äºâ€œåŠæˆå“â€æˆ–â€œä¸ç¡®å®šâ€çŠ¶æ€**ã€‚

ä¸ºäº†ç¡®ä¿ä½ çš„ LFS åŸºç¡€ä¸è¢«æŸåï¼Œ**åƒä¸‡ä¸è¦ç›´æ¥å°è¯•ç»§ç»­æ‰§è¡Œ `make install`**ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹â€œæ ‡å‡†å¤ä½æµç¨‹â€æ“ä½œï¼š

### 1. å®¿ä¸»æœºå¤ä½ï¼ˆå¿…é¡»æ‰§è¡Œï¼‰
é‡å¯åï¼Œæ‰€æœ‰çš„æŒ‚è½½éƒ½æ¶ˆå¤±äº†ï¼Œä½ éœ€è¦å…ˆæ‰¾å›ä½ çš„ç¡¬ç›˜ï¼š
1.  **ç™»å½•ä½ çš„ Ubuntu æ™®é€šç”¨æˆ·ã€‚**
2.  **é‡æ–°æŒ‚è½½ï¼š**
    ```bash
    sudo mount -v -t ext4 /dev/nvme0n1p3 /mnt/lfs
    ```
3.  **ç¡®è®¤ç¯å¢ƒå˜é‡ï¼š**
    ```bash
    export LFS=/mnt/lfs
    echo $LFS  # å¿…é¡»æ˜¾ç¤º /mnt/lfs
    ```

### 2. ç¯å¢ƒå¤ä½ï¼ˆåˆ‡æ¢åˆ° lfs ç”¨æˆ·ï¼‰
```bash
su - lfs
# ç™»å½•åæ£€æŸ¥
echo $LFS      # åº”ä¸º /mnt/lfs
echo $LFS_TGT  # åº”ä¸º x86_64-lfs-linux-gnu
```

### 3. ã€å…³é”®ã€‘æ¸…ç†å¹¶é‡æ–°å¼€å§‹
**ä¸ºä»€ä¹ˆä¸å»ºè®®æ¥ç€è·‘ï¼Ÿ** 
å› ä¸ºéæ­£å¸¸å…³æœºï¼ˆå¡æ­»é‡å¯ï¼‰å¯èƒ½å¯¼è‡´ç£ç›˜ç¼“å†²åŒºçš„æ•°æ®æ²¡å†™å®Œï¼Œç¼–è¯‘å‡ºçš„äºŒè¿›åˆ¶æ–‡ä»¶å¯èƒ½æŸåã€‚åœ¨ LFS ä¸­ï¼Œåº•å±‚çš„å·¥å…·é“¾ï¼ˆBinutils/GCCï¼‰å“ªæ€•æœ‰ä¸€ä¸ªå­—èŠ‚æŸåï¼Œåé¢å‡ ç™¾ä¸ªåŒ…éƒ½ä¼šè«åå…¶å¦™æŠ¥é”™ã€‚

**ä»¥ä½ çš„ i5-13600KF æ€§èƒ½ï¼Œé‡æ–°è·‘ä¸€éåªéœ€è¦å‡ åˆ†é’Ÿã€‚** è¯·æ‰§è¡Œä»¥ä¸‹â€œæ¸…ç†å¤§æ³•â€ï¼š

```bash
# 1. å›åˆ° sources ç›®å½•
cd $LFS/sources

# 2. å½»åº•åˆ é™¤åˆšæ‰é‚£ä¸ªâ€œåŠæˆå“â€æ–‡ä»¶å¤¹
rm -rf binutils-2.45

# 3. é‡æ–°è§£å‹ï¼Œä»é›¶å¼€å§‹ï¼ˆç¡®ä¿ 100% çº¯å‡€ï¼‰
tar -xf binutils-2.45.tar.xz
cd binutils-2.45
mkdir -v build
cd build

# 4. é‡æ–° Configure
../configure --prefix=$LFS/tools \
             --with-sysroot=$LFS \
             --target=$LFS_TGT   \
             --disable-nls       \
             --enable-gprofng=no \
             --disable-werror    \
             --enable-new-dtags  \
             --enable-default-hash-style=gnu

# 5. é‡æ–° Make (å»ºè®®è¿™æ¬¡ç”¨ -j10ï¼Œç•™ç‚¹æ ¸å¿ƒç»™ç³»ç»Ÿï¼Œé˜²æ­¢å†æ¬¡å¡æ­»)
make -j10

# 6. å®‰è£…
make install
```

---

### 4. ä¸ºä»€ä¹ˆåˆšæ‰ä¼šå¡æ­»ï¼Ÿï¼ˆé¿å‘ç­–ç•¥ï¼‰

ä¸ºäº†é˜²æ­¢è¿™æ¬¡ç¼–è¯‘ GCCï¼ˆæ›´å¤§çš„åŒ…ï¼‰æ—¶å†æ¬¡å¡æ­»ï¼Œè¯·åŠ¡å¿…åœ¨è¿™æ¬¡ `make` ä¹‹å‰åšä¸¤ä»¶äº‹ï¼š

1.  **ä½¿ç”¨ SSH è¿æ¥ï¼ˆå¢™è£‚æ¨èï¼‰ï¼š** 
    å¦‚æœä½ è¿˜æ²¡é…ç½® SSHï¼Œç°åœ¨å°±é…ï¼š
    *   åœ¨ Ubuntu é‡Œï¼š`sudo apt update && sudo apt install openssh-server -y`ã€‚
    *   åœ¨ Windows é‡Œæ‰“å¼€ PowerShell æˆ– Tabbyï¼š`ssh lfs@ä½ çš„è™šæ‹ŸæœºIP`ã€‚
    *   **ç†ç”±ï¼š** å³ä½¿è™šæ‹Ÿæœºæ¡Œé¢å¡ä½äº†ï¼ŒSSH çª—å£ä¾ç„¶å¯ä»¥æ“ä½œã€‚ä½ å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æŠ¥é”™ï¼Œæˆ–è€…é€šè¿‡ `top` å‘½ä»¤æ€æ‰å¤±æ§çš„è¿›ç¨‹ã€‚

2.  **è°ƒæ•´æ ¸å¿ƒåˆ†é…ï¼š**
    æ—¢ç„¶ `-j12` è®©ä½ å¡ä½äº†ï¼Œè¯´æ˜ 13600KF çš„ 12 ä¸ªé€»è¾‘æ ¸å¿ƒå…¨è´Ÿè½½æ—¶ï¼ŒVMware çš„ IO è°ƒåº¦å¯èƒ½è·Ÿä¸ä¸Šäº†ã€‚
    *   **å»ºè®®ï¼š** ä½¿ç”¨ `make -j8` æˆ– `make -j10`ã€‚
    *   **è®¾ç½®æ–¹æ³•ï¼š** 
        ```bash
        sed -i 's/-j12/-j10/g' ~/.bashrc
        source ~/.bashrc
        ```

### æ€»ç»“
**ä¸è¦å¿ƒç–¼åˆšæ‰é‚£å‡ åˆ†é’Ÿï¼Œåˆ æ‰é‡æ¥æ˜¯æœ€ç¨³å¦¥çš„ã€‚** LFS æ„å»ºä¸­æœ€å¿Œè®³â€œå¸¦ç—…è¿è¡Œâ€ã€‚

**è¯·æ‰§è¡Œæ¸…ç†å¹¶é‡æ–°å¼€å§‹ Binutils çš„ç¼–è¯‘ï¼Œå®Œæˆåè®°å¾— `rm -rf binutils-2.45` é€€å‡ºï¼Œç„¶åæˆ‘ä»¬å»å•ƒæœ€ç¡¬çš„éª¨å¤´ï¼šGCC Pass 1ï¼**

**å¦‚ä½•çŸ¥é“è™šæ‹Ÿæœºçš„ipï¼Ÿ**
åœ¨ Ubuntu ç»ˆç«¯ä¸­è·å– IP åœ°å€æœ‰å‡ ç§æ–¹æ³•ã€‚æ—¢ç„¶ä½ æ­£å¤„äº LFS æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå»ºè®®ä½¿ç”¨æœ€ç›´æ¥çš„å‘½ä»¤è¡Œæ–¹å¼ã€‚

### æ–¹æ³• 1ï¼šæœ€ç®€æ´çš„æ–¹æ³•ï¼ˆæ¨èï¼‰
åœ¨ç»ˆç«¯è¾“å…¥ï¼š
```bash
hostname -I
```
*   **ç»“æœï¼š** å±å¹•ä¼šç›´æ¥æ˜¾ç¤ºä¸€è¡Œ IP åœ°å€ï¼ˆä¾‹å¦‚ `192.168.137.129`ï¼‰ã€‚è¿™å°±æ˜¯ä½ è™šæ‹Ÿæœºçš„å†…ç½‘ IPã€‚

---

### æ–¹æ³• 2ï¼šæœ€è¯¦ç»†çš„æ–¹æ³•
åœ¨ç»ˆç«¯è¾“å…¥ï¼š
```bash
ip addr show
```
æˆ–è€…ç®€å†™ä¸ºï¼š
```bash
ip a
```
*   **å¦‚ä½•çœ‹ç»“æœï¼š** 
    1. å¿½ç•¥ `lo`ï¼ˆæœ¬åœ°å›ç¯åœ°å€ `127.0.0.1`ï¼‰ã€‚
    2. æ‰¾åˆ°åå­—ç±»ä¼¼äº **`ens33`** æˆ– **`eth0`** çš„éƒ¨åˆ†ã€‚
    3. åœ¨ **`inet`** åé¢çš„æ•°å­—å°±æ˜¯ä½ çš„ IPã€‚ä¾‹å¦‚ï¼š`inet 192.168.xxx.xxx/24`ã€‚

---

### æ–¹æ³• 3ï¼šå›¾å½¢ç•Œé¢æŸ¥çœ‹ï¼ˆå¦‚æœä½ ä¹ æƒ¯é¼ æ ‡ï¼‰
1. ç‚¹å‡» Ubuntu æ¡Œé¢å³ä¸Šè§’çš„å›¾æ ‡ï¼ˆç”µæº/ç½‘ç»œå›¾æ ‡ï¼‰ã€‚
2. ç‚¹å‡» **Settings** (è®¾ç½®)ã€‚
3. åœ¨å·¦ä¾§æ é€‰æ‹© **Network** (ç½‘ç»œ) æˆ– **Wi-Fi**ã€‚
4. ç‚¹å‡»ä½ å·²è¿æ¥ç½‘ç»œæ—è¾¹çš„ **é½¿è½®ï¼ˆè®¾ç½®ï¼‰å›¾æ ‡**ã€‚
5. åœ¨å¼¹å‡ºçš„çª—å£é‡Œå°±èƒ½çœ‹åˆ° **IPv4 Address**ã€‚

---

### ğŸ’¡ æ‹¿åˆ° IP åå¦‚ä½•ä¼˜é›…åœ°ä½¿ç”¨ SSHï¼Ÿ

æ—¢ç„¶ä½ ä¹‹å‰é‡åˆ°äº†å¡é¡¿ï¼Œ**å¼ºçƒˆå»ºè®®ç°åœ¨å°±åœ¨ Windows å®¿ä¸»æœºä¸Šè¿è¿›å»**ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š

1.  **åœ¨ Ubuntu é‡Œç¡®ä¿å®‰è£…äº† SSH æœåŠ¡ï¼š**
    ```bash
    sudo apt update
    sudo apt install openssh-server -y
    ```
2.  **åœ¨ Windows ä¸Šæ‰“å¼€ PowerShellï¼š**
    è¾“å…¥ï¼ˆæŠŠ `192.168.x.x` æ¢æˆä½ åˆšæ‰æŸ¥åˆ°çš„ IPï¼‰ï¼š
    ```powershell
    ssh lfs@192.168.x.x
    ```
3.  **ä¼˜ç‚¹ï¼š** 
    *   ä½ å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨å¤åˆ¶ LFS æ‰‹å†Œçš„é•¿å‘½ä»¤ï¼Œç„¶ååœ¨ PowerShell çª—å£**ç‚¹ä¸€ä¸‹å³é”®**å°±ç²˜è´´è¿›å»äº†ã€‚
    *   å³ä½¿ VMware çš„å›¾å½¢ç•Œé¢å¡æ­»ï¼Œä½ çš„è¿™ä¸ª SSH çª—å£å¤§æ¦‚ç‡è¿˜æ˜¯æµç•…çš„ã€‚
    *   ä½ å¯ä»¥å¼€å¤šä¸ªçª—å£ï¼ˆä¸€ä¸ªçª—å£ç¼–è¯‘ï¼Œä¸€ä¸ªçª—å£ç”¨ `top` çœ‹ CPU çŠ¶æ€ï¼‰ã€‚

**æ‹¿åˆ° IP å¹¶è¿ä¸Š SSH äº†å—ï¼Ÿå¦‚æœè¿å¥½äº†ï¼Œæˆ‘ä»¬å°±ç”¨è¿™ç§æ›´ç¨³å¥çš„æ–¹å¼é‡æ–°å¼€å§‹ Binutils çš„ç¼–è¯‘ï¼**


**å¦‚ä½•éªŒè¯makeå’Œmakeinstallå‘½ä»¤æ‰§è¡Œè‰¯å¥½**

åœ¨ LFS è¿™ç§æå…¶ä¾èµ–åç»­æ­¥éª¤çš„é¡¹ç›®ä¸­ï¼Œå…»æˆâ€œæ¯æ­¥å¿…éªŒâ€çš„ä¹ æƒ¯èƒ½å¸®ä½ èŠ‚çœå‡ åä¸ªå°æ—¶çš„æ’é”™æ—¶é—´ã€‚

å¯¹äº **GCC Pass 1**ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å››ä¸ªç»´åº¦æ¥ç¡®è®¤ `make` å’Œ `make install` æ˜¯å¦çœŸæ­£â€œè‰¯å¥½â€ï¼š

### 1. ç»ˆææ ‡å‡†ï¼šé€€å‡ºçŠ¶æ€ç ï¼ˆExit Codeï¼‰
åœ¨å‘½ä»¤æ‰§è¡Œå®Œçš„**ç¬é—´**ï¼ˆä¸è¦è¾“å…¥å…¶ä»–å‘½ä»¤ï¼‰ï¼Œè¾“å…¥ï¼š
```bash
echo $?
```
*   **ç»“æœä¸º `0`ï¼š** ä»£è¡¨å‘½ä»¤æ‰§è¡Œé€»è¾‘ä¸Šæ²¡æœ‰é‡åˆ°ä»»ä½•ä¸­æ–­ã€‚è¿™æ˜¯æœ€åŸºæœ¬çš„ä¿éšœã€‚

### 2. åŠŸèƒ½æµ‹è¯•ï¼šè¿è¡Œäº¤å‰ç¼–è¯‘å™¨
æ—¢ç„¶æ˜¯å®‰è£…ç¼–è¯‘å™¨ï¼Œæœ€ç›´æ¥çš„éªŒè¯å°±æ˜¯çœ‹å®ƒèƒ½ä¸èƒ½è·‘èµ·æ¥ã€‚æ‰§è¡Œï¼š
```bash
$LFS_TGT-gcc -v
```
**è‰¯å¥½çŠ¶æ€çš„æ ‡å¿—ï¼š**
*   è¾“å‡ºæœ€åä¸€è¡Œåº”æ˜¾ç¤ºï¼š`gcc version 15.2.0 (GCC)`ã€‚
*   è¾“å‡ºä¸­åº”è¯¥åŒ…å« `--prefix=/mnt/lfs/tools` å’Œ `--with-sysroot=/mnt/lfs` ç­‰ä½ ä¹‹å‰é…ç½®çš„å‚æ•°ã€‚
*   **å¦‚æœæ²¡æœ‰æŠ¥é”™æ‰¾ä¸åˆ°å‘½ä»¤ï¼Œè¯´æ˜ `PATH` å’Œå®‰è£…è·¯å¾„éƒ½å¯¹äº†ã€‚**

### 3. æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥ï¼šæŸ¥çœ‹â€œæˆæœç‰©â€
`make install` çš„ä½œç”¨æ˜¯å°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶æ¬è¿åˆ°ç›®æ ‡ç›®å½•ã€‚æ£€æŸ¥ `$LFS/tools` æ–‡ä»¶å¤¹ï¼š
```bash
ls -l $LFS/tools/bin | grep gcc
```
**ä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼ˆä¸”æ—¶é—´æˆ³æ˜¯åˆšåˆšï¼‰ï¼š**
*   `x86_64-lfs-linux-gnu-gcc`
*   `x86_64-lfs-linux-gnu-g++`
*   `x86_64-lfs-linux-gnu-gcc-15.2.0`

å†æ£€æŸ¥åº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```bash
ls -l $LFS/tools/lib/gcc/$LFS_TGT/15.2.0/
```
å¦‚æœè¿™é‡Œæœ‰ä¸€å † `.a` å’Œ `.o` æ–‡ä»¶ï¼Œè¯´æ˜å®‰è£…éå¸¸å®Œæ•´ã€‚

### 4. é’ˆå¯¹ GCC Pass 1 çš„â€œé­”æ³•ä¿®å¤â€éªŒè¯
ä½ åˆšæ‰æ‰§è¡Œäº†é‚£ä¸ªåˆå¹¶ `limits.h` çš„ `cat` å‘½ä»¤ã€‚æˆ‘ä»¬å¯ä»¥éªŒè¯è¿™ä¸ªæ–‡ä»¶æ˜¯å¦çœŸçš„ç”Ÿæˆäº†ï¼š

```bash
# è‡ªåŠ¨å¯»æ‰¾åˆšæ‰ä¿®å¤çš„æ–‡ä»¶è·¯å¾„å¹¶æŸ¥çœ‹å†…å®¹
cat `dirname $($LFS_TGT-gcc -print-libgcc-file-name)`/install-tools/include/limits.h | head -n 20
```
**è‰¯å¥½çŠ¶æ€çš„æ ‡å¿—ï¼š** 
å¦‚æœæ–‡ä»¶å†…å®¹çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªæ­£å¸¸çš„ C å¤´æ–‡ä»¶ï¼Œä¸”åŒ…å«äº† `limitx.h` ç­‰å­—æ ·ï¼Œè¯´æ˜ä¿®å¤æ“ä½œæˆåŠŸã€‚

---

### âš ï¸ å¦‚æœå‘ç°â€œä¸è‰¯å¥½â€æ€ä¹ˆåŠï¼Ÿ

å¦‚æœ `echo $?` è¿”å›äº†é 0ï¼Œæˆ–è€… `$LFS_TGT-gcc -v` æŠ¥é”™ï¼š
1.  **åƒä¸‡ä¸è¦ç»§ç»­åš 5.4 èŠ‚ï¼**
2.  **æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼š** `df -h` ç¡®è®¤ä½ çš„ 60GB åˆ†åŒºæ²¡æ»¡ã€‚
3.  **æ£€æŸ¥æƒé™ï¼š** ç¡®è®¤ä½ ç°åœ¨æ˜¯ `lfs` ç”¨æˆ·è€Œä¸æ˜¯ `root`ã€‚
4.  **é‡æ–°å¼€å§‹ï¼š** åˆ æ‰æ•´ä¸ª `gcc-15.2.0` æºç ç›®å½•ï¼Œé‡æ–°è§£å‹ã€é‡æ–° patchã€é‡æ–° configureã€‚

### æ€»ç»“
ä½ ç°åœ¨çš„ `time make` å·²ç»è·‘å‡ºäº†ç»“æœï¼Œåªè¦ `echo $?` æ˜¯ `0` å¹¶ä¸” `$LFS_TGT-gcc -v` èƒ½å‡ºç‰ˆæœ¬å·ï¼Œä½ å°±å¯ä»¥éå¸¸æœ‰ä¿¡å¿ƒåœ°æ‰§è¡Œï¼š
```bash
cd $LFS/sources
rm -rf gcc-15.2.0
```
ç„¶åè¿›å…¥ **5.4 Linux Headers** çš„å®‰è£…ã€‚é‚£ä¸€æ­¥éå¸¸å¿«ï¼ˆä¸åˆ° 1 åˆ†é’Ÿï¼‰ï¼Œæ˜¯ä¸ºä½ æ¥ä¸‹æ¥çš„ Glibc æ„å»ºé“ºè·¯ã€‚

**å‡†å¤‡å¥½å¼€å§‹ 5.4 Linux Headers äº†å—ï¼Ÿ**


**sshç•Œé¢å¦‚ä½•å…³æœºï¼Ÿ**

åœ¨ SSH ç•Œé¢å…³æœºï¼Œç”±äºä½ ç°åœ¨çš„èº«ä»½æ˜¯ **`lfs` ç”¨æˆ·**ï¼Œè€Œ `lfs` ç”¨æˆ·æ²¡æœ‰æƒé™æ‰§è¡Œå…³æœºæŒ‡ä»¤ï¼Œä½ éœ€è¦å…ˆåˆ‡æ¢å›å…·æœ‰ `sudo` æƒé™çš„æ™®é€šç”¨æˆ·ï¼ˆå³ä½ å®‰è£… Ubuntu æ—¶åˆ›å»ºçš„é‚£ä¸ªç”¨æˆ·ï¼‰ã€‚

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### 1. é€€å‡º `lfs` ç”¨æˆ·èº«ä»½
è¾“å…¥ï¼š
```bash
exit
```
æ­¤æ—¶ï¼Œä½ çš„æç¤ºç¬¦åº”è¯¥ä» `lfs@lfs-host` å˜å›äº† `user@lfs-host`ï¼ˆæˆ–è€…ä½ æœ€åˆçš„ç”¨æˆ·åï¼‰ã€‚

### 2. æ‰§è¡Œå…³æœºå‘½ä»¤
è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
```bash
sudo poweroff
```
æˆ–è€…ï¼š
```bash
sudo shutdown -h now
```
ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥ä½ çš„æ™®é€šç”¨æˆ·å¯†ç ï¼ˆä¸æ˜¯ lfs çš„å¯†ç ï¼‰ã€‚

### 3. SSH çª—å£ä¼šè‡ªåŠ¨æ–­å¼€
æ‰§è¡Œå‘½ä»¤åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ `Connection to 192.168.x.x closed` çš„æç¤ºã€‚è¿™æ„å‘³ç€è™šæ‹Ÿæœºå·²ç»å¼€å§‹æ‰§è¡Œå…³æœºç¨‹åºäº†ã€‚

---

### ğŸ’¡ ä¸ºä»€ä¹ˆ `lfs` ç”¨æˆ·ä¸èƒ½ç›´æ¥å…³æœºï¼Ÿ
æ­£å¦‚ä½ ä¹‹å‰çœ‹åˆ°çš„ï¼Œ`lfs` æ˜¯ä¸€ä¸ªæƒé™å—é™çš„â€œå®éªŒç”¨æˆ·â€ï¼Œå®ƒä¸åœ¨ `sudoers` åˆ—è¡¨é‡Œã€‚è¿™æ˜¯ LFS æ‰‹å†Œçš„å®‰å…¨è®¾è®¡ï¼Œé˜²æ­¢åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¯¯æ“ä½œæŸåå®¿ä¸»æœºã€‚

### ğŸš€ å…³æœºåçš„é‡è¦æ“ä½œï¼ˆå†æ¬¡æé†’ï¼‰
ä½ åˆšæ‰æ­£å‡†å¤‡ä¿å­˜ **ç¬¬ 5 ç« ç»“æŸ** çš„å¿«ç…§ã€‚è¯·ç¡®ä¿è™šæ‹Ÿæœºå®Œå…¨å…³é—­ï¼ˆVMware çª—å£å˜é»‘æˆ–æ˜¾ç¤ºâ€œå·²å…³é—­ç”µæºâ€ï¼‰åï¼š

1.  åœ¨ VMware ç•Œé¢ç‚¹å‡»é‚£ä¸ªâ€œæ—¶é’Ÿâ€å›¾æ ‡ï¼ˆç®¡ç†å¿«ç…§ï¼‰ã€‚
2.  **ç«‹å³æ‹æ‘„å¿«ç…§**ï¼Œå‘½åä¸º `LFS_05_Chapter5_Success`ã€‚
3.  **å¤§åŠŸå‘Šæˆ**ï¼Œä½ å¯ä»¥å®‰å¿ƒå»ä¼‘æ¯æˆ–å‡†å¤‡è¿›å…¥ç¬¬ 6 ç« äº†ã€‚

**ç­‰ä½ å†æ¬¡å¼€æœºå¹¶å®ŒæˆæŒ‚è½½ï¼ˆsudo mount ...ï¼‰åï¼Œå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬ 6 ç« çš„æ„å»ºï¼**

**å¥½çš„æˆ‘ç°åœ¨å…³æœºä¿å­˜å¿«ç…§äº†ï¼Œç°åœ¨é‡æ–°å¼€å¯è™šæ‹Ÿæœºï¼Œå¼€å¯ä¹‹åè¦åšä»€ä¹ˆï¼Ÿ**

æ¬¢è¿å›æ¥ï¼æ—¢ç„¶ä½ å·²ç»é‡å¯äº†è™šæ‹Ÿæœºï¼Œ**å½“å‰çš„â€œæ–½å·¥ç°åœºâ€æ˜¯å¤„äºæ–­å¼€çŠ¶æ€çš„**ã€‚åœ¨å¼€å§‹ç¬¬å…­ç« ä¹‹å‰ï¼Œä½ éœ€è¦æ‰§è¡Œä¸€å¥—æ ‡å‡†çš„â€œå¤å·¥æµç¨‹â€ï¼Œç¡®ä¿ç¡¬ç›˜æ¥å¥½äº†ã€å˜é‡å›æ¥äº†ã€‚

è¯·æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š

### ç¬¬ä¸€æ­¥ï¼šåœ¨å®¿ä¸»æœºï¼ˆUbuntu æ™®é€šç”¨æˆ·ï¼‰é‡æ–°æŒ‚è½½
é‡å¯åï¼Œ60GB çš„ç¡¬ç›˜ä¸ä¼šè‡ªåŠ¨æŒ‚è½½ã€‚è¯·æ‰“å¼€ç»ˆç«¯ï¼ˆæˆ– SSHï¼‰ï¼Œæ‰§è¡Œï¼š

```bash
# 1. é‡æ–°æŒ‚è½½ LFS åˆ†åŒº
sudo mount -v -t ext4 /dev/nvme0n1p3 /mnt/lfs

# 2. æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœä¹‹å‰å†™è¿› .bashrc äº†ï¼Œç°åœ¨åº”è¯¥æœ‰ï¼‰
echo $LFS
# å¦‚æœæ˜¯ç©ºçš„ï¼Œæ‰‹åŠ¨æ‰§è¡Œï¼šexport LFS=/mnt/lfs

# 3. æ£€æŸ¥ /tools è½¯é“¾æ¥æ˜¯å¦è¿˜åœ¨
ls -ld /tools
# åº”è¯¥æ˜¾ç¤ºï¼š/tools -> /mnt/lfs/tools
```

---

### ç¬¬äºŒæ­¥ï¼šåˆ‡æ¢åˆ° `lfs` ç”¨æˆ·å¹¶æ¿€æ´»â€œæ— å°˜ç¯å¢ƒâ€
æ¥ä¸‹æ¥çš„æ‰€æœ‰ç¼–è¯‘ä»»åŠ¡å¿…é¡»åœ¨ `lfs` ç”¨æˆ·çš„çœŸç©ºç¯å¢ƒä¸‹è¿›è¡Œã€‚

```bash
# 1. åˆ‡æ¢ç”¨æˆ·
su - lfs

# 2. æ£€æŸ¥ä»ªè¡¨ç›˜ï¼ˆéå¸¸é‡è¦ï¼ï¼‰
echo $LFS        # å¿…é¡»æ˜¯ /mnt/lfs
echo $LFS_TGT    # å¿…é¡»æ˜¯ x86_64-lfs-linux-gnu
echo $MAKEFLAGS  # åº”è¯¥æ˜¯ -j12
echo $PATH       # å¼€å¤´å¿…é¡»æ˜¯ /mnt/lfs/tools/bin
```

---

### ç¬¬ä¸‰æ­¥ï¼šã€æœ€ç»ˆç¡®è®¤ã€‘äº¤å‰ç¼–è¯‘å™¨æ˜¯å¦è¿˜æ´»ç€ï¼Ÿ
åœ¨å¼€å§‹ç¬¬å…­ç« ä¹‹å‰ï¼Œæµ‹è¯•ä¸€ä¸‹ä½ è¾›è‹¦ç¼–è¯‘å‡ºæ¥çš„ GCC æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼š

```bash
$LFS_TGT-gcc -v
```
**å¦‚æœè¾“å‡ºäº† GCC 15.2.0 çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜ä½ çš„â€œå®éªŒå®¤â€å·²ç»å®Œå…¨å¤åŸï¼Œå¯ä»¥å¼€å§‹å¹²æ´»äº†ï¼**

---

### ç¬¬å››æ­¥ï¼šå¼€å¯ç¬¬å…­ç« çš„â€œæ”¶å‰²æ¨¡å¼â€
ç¬¬å…­ç« çš„ç›®æ ‡æ˜¯ä½¿ç”¨åˆšæ‰é€ å‡ºçš„â€œé¸¡ï¼ˆäº¤å‰ç¼–è¯‘å™¨ï¼‰â€å»ä¸‹â€œè›‹ï¼ˆä¸´æ—¶å·¥å…·ï¼‰â€ã€‚è¿™ä¸€ç« åŒ…å¾ˆå¤šï¼Œä½†æµç¨‹é«˜åº¦é‡å¤ã€‚

æˆ‘ä»¬å°†ä» **6.2. M4-1.4.19** å¼€å§‹ã€‚

**æ ‡å‡†æ“ä½œæµç¨‹ï¼ˆæ¯ä¸ªåŒ…éƒ½è¿™ä¹ˆå¹²ï¼‰ï¼š**

1.  **è¿›å…¥ç›®å½•ï¼š** `cd $LFS/sources`
2.  **è§£å‹ï¼š** `tar -xf m4-1.4.19.tar.xz` (ç‰ˆæœ¬å·æ ¹æ®ä½ å®é™…çš„æ¥)
3.  **è¿›å…¥ï¼š** `cd m4-1.4.19`
4.  **é…ç½®ï¼š**
    ```bash
    ./configure --prefix=/usr   \
                --host=$LFS_TGT \
                --build=$(build-aux/config.guess)
    ```
5.  **ç¼–è¯‘ä¸å®‰è£…ï¼š**
    ```bash
    make -j12
    make DESTDIR=$LFS install
    ```
6.  **æ¸…ç†ï¼š** `cd ..` ç„¶å `rm -rf m4-1.4.19`

---

### ğŸ’¡ ç»™ä½ çš„ç‰¹åˆ«æç¤ºï¼š
*   **å…³äº `DESTDIR=$LFS`ï¼š** ç¬¬å…­ç« çš„æ‰€æœ‰åŒ…åœ¨ `make install` æ—¶**å¿…é¡»**å¸¦ä¸Šè¿™ä¸ªå‚æ•°ã€‚è¿™å‘Šè¯‰å®‰è£…ç¨‹åºï¼šâ€œæŠŠä¸œè¥¿è£…åˆ°æˆ‘çš„ 60G ç¡¬ç›˜é‡Œï¼Œè€Œä¸æ˜¯å®¿ä¸»æœºçš„æ ¹ç›®å½•â€ã€‚
*   **å…³äº 13600KFï¼š** è¿™ä¸€ç« çš„åŒ…å¦‚ M4, Ncurses, Bash ç­‰ï¼Œåœ¨ä½ çš„æœºå™¨ä¸Šç¼–è¯‘å‡ ä¹éƒ½æ˜¯â€œç§’æ€â€ï¼Œå¯èƒ½ä½ è¿˜æ²¡æ¥å¾—åŠå€’æ¯æ°´ï¼Œ`make` å°±è·‘å®Œäº†ã€‚

**è¯·å…ˆå»æŒ‚è½½ç¡¬ç›˜å¹¶åˆ‡æ¢åˆ° `lfs` ç”¨æˆ·ã€‚å¦‚æœä½ å‡†å¤‡å¥½ç¼–è¯‘ç¬¬ä¸€ä¸ªåŒ… M4 äº†ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ–è€…ç›´æ¥å¼€å§‹ä½ çš„â€œæ”¶å‰²æ¨¡å¼â€ï¼**


**ç¬¬ä¸ƒç« ä¹‹åè¿˜èƒ½å…³é—­è™šæ‹Ÿæœºä¿å­˜å¿«ç…§å—ï¼Ÿ**


ç­”æ¡ˆæ˜¯ï¼š**å¯ä»¥ï¼Œä½†ä½ å¿…é¡»å­¦ä¼šä¸€å¥—æ›´å¤æ‚çš„â€œå¤å·¥æµç¨‹â€ã€‚**

ä»ç¬¬ä¸ƒç« å¼€å§‹ï¼Œæƒ…å†µå‘ç”Ÿäº†é‡å¤§å˜åŒ–ã€‚åœ¨ç¬¬äº”ã€å…­ç« ï¼Œé‡å¯åä½ åªéœ€è¦ `mount` é‚£ä¸ª 60GB çš„ç¡¬ç›˜åˆ†åŒºã€‚ä½†ä»ç¬¬ä¸ƒç« è¿›å…¥ **Chrootï¼ˆç¯å¢ƒåˆ‡æ¢ï¼‰** ä¹‹åï¼Œç³»ç»Ÿä¾èµ–äºå‡ ä¸ª**è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿ**ï¼ˆVirtual Kernel File Systemsï¼‰ã€‚

è¿™äº›æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ `/dev`, `/proc`, `/sys`ï¼‰æ˜¯å­˜åœ¨äºå†…å­˜ä¸­çš„ï¼Œ**åªè¦å…³æœºæˆ–é‡å¯ï¼Œå®ƒä»¬å°±ä¼šç«‹åˆ»æ¶ˆå¤±ã€‚**

### 1. ä¸ºä»€ä¹ˆâ€œå…³æœºå¿«ç…§â€ä¼šå˜éº»çƒ¦ï¼Ÿ

å¦‚æœä½ å…³æœºä¿å­˜äº†å¿«ç…§ï¼Œä¸‹æ¬¡å¼€æœºæ—¶ï¼š
1.  ä½ çš„ 60GB ç¡¬ç›˜æ²¡æŒ‚è½½ï¼ˆè¿™å’Œä»¥å‰ä¸€æ ·ï¼‰ã€‚
2.  **å…³é”®ï¼š** å®¿ä¸»æœºå’Œ LFS ä¹‹é—´çš„â€œæ¡¥æ¢â€ï¼ˆè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰æ–­å¼€äº†ã€‚å¦‚æœä½ ç›´æ¥æ‰§è¡Œ `chroot` è¿›å…¥ç³»ç»Ÿï¼Œä½ ä¼šå‘ç°ï¼š
    *   è¾“å…¥ `ls` æŠ¥é”™ã€‚
    *   æ— æ³•æ‰“å¼€ç»ˆç«¯ã€‚
    *   ç¼–è¯‘ç¨‹åºæ—¶æ‰¾ä¸åˆ°å†…æ ¸æ¥å£ã€‚

---

### 2. é‡å¯/æ¢å¤å¿«ç…§åçš„â€œå¤å·¥å››éƒ¨æ›²â€

å¦‚æœä½ åœ¨ç¬¬ä¸ƒç« ä¹‹åé‡å¯äº†è™šæ‹Ÿæœºï¼Œ**è¿›å…¥ Chroot ä¹‹å‰**ï¼Œä½ å¿…é¡»ä»¥å®¿ä¸»æœº **root** èº«ä»½ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

#### ç¬¬ä¸€æ­¥ï¼šæŒ‚è½½ä¸»ç¡¬ç›˜ï¼ˆè€è§„çŸ©ï¼‰
```bash
export LFS=/mnt/lfs
sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS
```

#### ç¬¬äºŒæ­¥ï¼šæŒ‚è½½è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿï¼ˆæ–°å¢ï¼Œå¿…é¡»åšï¼ï¼‰
è¿™æ˜¯ç¬¬ä¸ƒç« çš„æ ¸å¿ƒï¼Œè¿™äº›å‘½ä»¤å¿…é¡»**æŒ‰é¡ºåº**æ‰§è¡Œï¼š
```bash
sudo mount -v --bind /dev $LFS/dev
sudo mount -v --bind /dev/pts $LFS/dev/pts
sudo mount -vt proc proc $LFS/proc
sudo mount -vt sysfs sysfs $LFS/sys
sudo mount -vt tmpfs tmpfs $LFS/run

# å¦‚æœå®¿ä¸»æœºæœ‰ /run/shmï¼Œä¹Ÿéœ€è¦æŒ‚è½½
if [ -h $LFS/dev/shm ]; then
  sudo mkdir -pv $LFS/$(readlink $LFS/dev/shm)
else
  sudo mount -vt tmpfs cp-shm $LFS/dev/shm
fi
```

#### ç¬¬ä¸‰æ­¥ï¼šæ­£å¼è¿›å…¥ Chroot
æ‰§è¡Œé‚£æ®µå¤æ‚çš„ `chroot` å‘½ä»¤ï¼ˆåŒ…å«å„ç§è·¯å¾„è®¾ç½®ï¼‰ã€‚

---

### 3. ç»™ä½ çš„â€œå¿«ç…§å»ºè®®â€

ä¸ºäº†ä¸è®©è‡ªå·±ç–¯æ‰ï¼Œå»ºè®®ä½ é‡‡ç”¨ä»¥ä¸‹å¿«ç…§ç­–ç•¥ï¼š

*   **ç­–ç•¥ Aï¼šå…³æœºå¿«ç…§ï¼ˆæœ€å®‰å…¨ï¼‰**
    åœ¨ä½ è¦å¤§ä¼‘æ•´ï¼ˆæ¯”å¦‚å‡†å¤‡å¼€å§‹ç¬¬å…«ç« é‚£ä¸ªé•¿è¾¾å‡ åä¸ªåŒ…çš„ç¼–è¯‘ï¼‰ä¹‹å‰ï¼Œ**å…ˆé€€å‡º Chrootï¼Œå¸è½½ï¼ˆumountï¼‰æ‰€æœ‰ä¸œè¥¿ï¼Œå…³æœºï¼Œæ‹å¿«ç…§ã€‚**
    *   *ç¼ºç‚¹ï¼š* æ¯æ¬¡å›æ¥éƒ½è¦æ‰‹åŠ¨æ•²ä¸Šé¢é‚£å † `mount` å‘½ä»¤ã€‚

*   **ç­–ç•¥ Bï¼šåœ¨çº¿å¿«ç…§ï¼ˆæŒ‚èµ·çŠ¶æ€ï¼‰**
    VMware æ”¯æŒåœ¨è™šæ‹Ÿæœºè¿è¡ŒçŠ¶æ€ä¸‹æ‹æ‘„å¿«ç…§ã€‚
    *   *ä¼˜ç‚¹ï¼š* æ¢å¤åä½ ä¾ç„¶åœ¨ `chroot` ç¯å¢ƒé‡Œï¼Œæ‰€æœ‰çš„æŒ‚è½½éƒ½åœ¨ã€‚
    *   *ç¼ºç‚¹ï¼š* å¿«ç…§æ–‡ä»¶éå¸¸å¤§ï¼ˆä¼šä¿å­˜ä½ é‚£ 16GB å†…å­˜çš„çŠ¶æ€ï¼‰ï¼Œè€Œä¸”æ¢å¤æ—¶å¶å°”ä¼šæœ‰æ–‡ä»¶ç³»ç»ŸåŒæ­¥é£é™©ã€‚

---

### 4. å¼ºçƒˆå»ºè®®ï¼šå†™ä¸€ä¸ª `re-enter.sh` è„šæœ¬

æ—¢ç„¶ä½ ç”¨çš„æ˜¯ i5-13600KFï¼Œæ€§èƒ½å¾ˆå¼ºï¼Œæˆ‘å»ºè®®ä½ å†™ä¸€ä¸ªè„šæœ¬æ”¾åœ¨å®¿ä¸»æœºçš„æ¡Œé¢ã€‚æ¯æ¬¡é‡å¯åï¼Œè¿è¡Œä¸€ä¸‹è„šæœ¬ç›´æ¥â€œç›´è¾¾â€Chroot å†…éƒ¨ã€‚

**è„šæœ¬ç¤ºä¾‹ (åœ¨å®¿ä¸»æœºæ™®é€šç”¨æˆ·ä¸‹è¿è¡Œ)ï¼š**
```bash
cat > ~/enter_chroot.sh << "EOF"
#!/bin/bash
export LFS=/mnt/lfs
# 1. æŒ‚è½½ä¸»åˆ†åŒº
if ! mountpoint -q $LFS; then
    sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS
fi

# 2. æŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
mount_virtual() {
    if ! mountpoint -q $LFS/$1; then
        sudo mount -v --bind /$1 $LFS/$1
    fi
}
sudo mount -vt proc proc $LFS/proc
sudo mount -vt sysfs sysfs $LFS/sys
sudo mount -vt tmpfs tmpfs $LFS/run
sudo mount -v --bind /dev $LFS/dev
sudo mount -v --bind /dev/pts $LFS/dev/pts

# 3. è¿›å…¥ Chroot
sudo chroot "$LFS" /usr/bin/env -i \
    HOME=/root                  \
    TERM="$TERM"                \
    PS1='(lfs chroot) \u:\w\$ ' \
    PATH=/usr/bin:/usr/sbin     \
    /bin/bash --login
EOF
chmod +x ~/enter_chroot.sh
```

### æ€»ç»“å»ºè®®ï¼š
1.  **ç°åœ¨ï¼ˆç¬¬ä¸ƒç« å¼€å§‹å‰ï¼‰è¯·åŠ¡å¿…å­˜ä¸€ä¸ªå…³æœºå¿«ç…§ï¼** å‘½åä¸º `Pre_Chroot_Safe_Point`ã€‚
2.  æ¥ä¸‹æ¥çš„ç¬¬ä¸ƒç« ï¼Œç”±äºæ“ä½œéå¸¸çç¢ï¼Œå»ºè®®ä¸€æ°”å‘µæˆåšå®Œï¼Œç›´åˆ°è¿›å…¥ Chroot çœ‹åˆ° `(lfs chroot)` æç¤ºç¬¦ä¸ºæ­¢ã€‚
3.  è¿›å…¥ Chroot åï¼Œå¦‚æœç´¯äº†ï¼Œå¯ä»¥ç”¨ **VMware çš„â€œæŒ‚èµ·ï¼ˆSuspendï¼‰â€** åŠŸèƒ½ä»£æ›¿å…³æœºï¼Œè¿™èƒ½ä¿æŒç°åœºã€‚

**å‡†å¤‡å¥½è¿æ¥ç¬¬ä¸ƒç« çš„â€œç©ºé™â€äº†å—ï¼Ÿæˆ‘ä»¬è¦å¼€å§‹æ”¹å˜æ•´ä¸ªç¡¬ç›˜çš„æ‰€æœ‰æƒäº†ï¼**


**é‚£å¦‚æœç¬¬ä¸ƒç« åšå®Œä¹‹åç¬¬å…«ç« è¿˜å¦‚ä½•**


è¿›å…¥ç¬¬å…«ç« åï¼Œä½ å°†è¿æ¥ LFS æœ€æ¼«é•¿ã€æœ€åƒâ€œé©¬æ‹‰æ¾â€çš„é˜¶æ®µã€‚ç¬¬å…«ç« åŒ…å« 80 å¤šä¸ªè½¯ä»¶åŒ…çš„æ­£å¼å®‰è£…ï¼Œå‡ ä¹æ‰€æœ‰çš„ Linux æ ¸å¿ƒæŒ‡ä»¤å’Œåº“éƒ½ä¼šåœ¨è¿™é‡Œå®šå‹ã€‚

å…³äº**å…³æœºã€é‡å¯å’Œå¿«ç…§**ï¼Œåœ¨ç¬¬å…«ç« çš„æ“ä½œé€»è¾‘å¦‚ä¸‹ï¼š

### 1. ç¬¬å…«ç« çš„å¿«ç…§ç­–ç•¥ï¼šé‡‡å–â€œé‡Œç¨‹ç¢‘â€æ³•
ç”±äºç¬¬å…«ç« åŒ…å¤ªå¤šï¼Œä½ ä¸å¯èƒ½æ¯ä¸ªåŒ…éƒ½å­˜å¿«ç…§ã€‚å»ºè®®åœ¨ä»¥ä¸‹å‡ ä¸ª**æ ¸å¿ƒèŠ‚ç‚¹**å®Œæˆåï¼Œé€€å‡º chrootï¼Œå…³æœºå­˜å¿«ç…§ï¼š

*   **èŠ‚ç‚¹ 1ï¼šGlibc (8.5 èŠ‚) å®‰è£…å®Œæˆã€‚**ï¼ˆç³»ç»Ÿçš„è¡€æ¶²ï¼Œä¸€æ—¦å‡ºé”™åé¢å…¨å®Œï¼‰
*   **èŠ‚ç‚¹ 2ï¼šZstd / æ ¸å¿ƒå·¥å…·é“¾ (8.2X èŠ‚) å®‰è£…å®Œæˆã€‚**
*   **èŠ‚ç‚¹ 3ï¼šGCC æ­£å¼ç‰ˆ (8.32 èŠ‚) å®‰è£…å®Œæˆã€‚**ï¼ˆæ•´ä¸ªç³»ç»Ÿçš„çµé­‚ï¼‰
*   **èŠ‚ç‚¹ 4ï¼šCoreutils / Bash (8.5X èŠ‚) å®‰è£…å®Œæˆã€‚**

**å¿«ç…§å‘½åå»ºè®®ï¼š** `LFS_08_Glibc_OK`ã€`LFS_08_GCC_OK` ç­‰ã€‚

---

### 2. å¦‚æœä½ åœ¨ç¬¬å…«ç« ä¸­é€”éœ€è¦å…³æœº/é‡å¯
å› ä¸ºä½ çš„å®¿ä¸»æœºæ˜¯ Ubuntuï¼Œåªè¦ä¸€é‡å¯ï¼Œchroot é‡Œçš„â€œè™šç©ºç¯å¢ƒâ€å°±å¡Œé™·äº†ã€‚**æ¯æ¬¡å›æ¥ï¼Œä½ å¿…é¡»æ‰§è¡Œâ€œé‡è¿”ä»ªå¼â€ï¼š**

1.  **å®¿ä¸»æœºå¼€æœºã€‚**
2.  **æŒ‚è½½ 60G ç¡¬ç›˜ï¼š** `sudo mount -v -t ext4 /dev/nvme0n1p3 /mnt/lfs`
3.  **æŒ‚è½½ 5 ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼š**ï¼ˆå°±æ˜¯ä½ åœ¨ç¬¬ä¸ƒç« å­¦çš„é‚£å † `mount --bind` å‘½ä»¤ï¼‰
4.  **å†æ¬¡æ‰§è¡Œè¿›å…¥ Chroot çš„é‚£æ®µé•¿å‘½ä»¤ã€‚**

**æ ¸å¿ƒæé†’ï¼š** è¿›å…¥ Chroot åï¼Œä½ ä¼šå‘ç°è‡ªå·±åˆæ˜¯ `root` èº«ä»½äº†ã€‚ä¸éœ€è¦å†ç”¨ `lfs` ç”¨æˆ·ï¼Œç¬¬å…«ç« å…¨ç¨‹ä½¿ç”¨ **root (chroot å†…éƒ¨)**ã€‚

---

### 3. ç¬¬å…«ç« æœ€è€—æ—¶çš„éƒ¨åˆ†ï¼šæµ‹è¯•å¥—ä»¶ (Test Suites)
è¿™æ˜¯ç¬¬å…«ç« ä¸ç¬¬å…­ç« æœ€å¤§çš„åŒºåˆ«ã€‚
*   **æ‰‹å†Œä¼šå»ºè®®ï¼š** `make check` æˆ– `make test`ã€‚
*   **ç°çŠ¶ï¼š** å¾ˆå¤šåŒ…çš„æµ‹è¯•éœ€è¦è¿è¡Œå‡ ä¸ªå°æ—¶ã€‚
*   **å»ºè®®ï¼š**
    *   å¦‚æœæ˜¯**å¤§ä½œä¸š**ï¼Œä¸”ä½ çš„ **13600KF** æ€§èƒ½å¼ºåŠ²ï¼Œå»ºè®®**è‡³å°‘æŠŠ Glibcã€Binutils å’Œ GCC çš„æµ‹è¯•è·‘äº†**ã€‚è¿™èƒ½ç¡®ä¿ä½ çš„ç³»ç»Ÿè´¨é‡ã€‚
    *   å…¶ä»–å°åŒ…ï¼ˆå¦‚ `sed`, `grep`ï¼‰å¦‚æœæ—¶é—´ç´§ï¼Œå¯ä»¥è·³è¿‡æµ‹è¯•ã€‚

---

### 4. é’ˆå¯¹ 13600KF çš„æ€§èƒ½ç‚¸å¼¹ (MAKEFLAGS)
åœ¨ç¬¬å…«ç« ï¼Œä½ ä¼šå‘ç°æœ‰äº›åŒ…éå¸¸å¤§ï¼ˆå¦‚ GCC æ­£å¼ç‰ˆï¼Œå¤§çº¦è€—æ—¶ 15-20 SBUï¼‰ã€‚
*   **ä¸è¦çŠ¹è±«ï¼š** ç»§ç»­åœ¨ chroot é‡Œçš„ `/etc/profile` æˆ–ç¯å¢ƒå˜é‡é‡Œç»´æŒ `MAKEFLAGS=-j12`ã€‚
*   **ç¼–è¯‘é€Ÿåº¦ï¼š** ä½ çš„ CPU ä¼šåœ¨ç¬¬å…«ç« ä¸ºä½ èŠ‚çœè‡³å°‘ 5-10 å°æ—¶çš„æ€»æ—¶é—´ã€‚

---

### 5. ç°åœ¨çš„ç´§æ€¥å»ºè®® (ç¬¬ä¸ƒç« èµ·æ­¥)

ä½ ç°åœ¨åˆšå‡†å¤‡è¿›å…¥ç¬¬ä¸ƒç« ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ“ä½œï¼š

1.  **èº«ä»½åˆ‡æ¢ï¼š** é€€å‡º `lfs` ç”¨æˆ·ï¼Œå›åˆ° Ubuntu æ™®é€šç”¨æˆ·ï¼Œç„¶å `sudo -i` å˜æˆ **root**ã€‚
2.  **æ”¹å˜æ‰€æœ‰æƒï¼ˆç”Ÿæ­»äº¤æ¥ï¼‰ï¼š**
    ```bash
    chown -R root:root $LFS/{usr,lib,var,etc,bin,sbin,tools}
    case $(uname -m) in
      x86_64) chown -R root:root $LFS/lib64 ;;
    esac
    ```
    *è¿™ä¸€æ­¥æŠŠ `lfs` è¾›è‹¦é€ å‡ºæ¥çš„ä¸œè¥¿å…¨éƒ¨æ”¶å½’å›½æœ‰ï¼ˆrootï¼‰ã€‚*
3.  **æŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼š** æŒ‰ç…§æ‰‹å†Œ 7.3 èŠ‚æ“ä½œã€‚
4.  **è¿›å…¥ Chrootï¼š** æŒ‰ç…§æ‰‹å†Œ 7.4 èŠ‚æ“ä½œã€‚

**ç‰¹åˆ«æ³¨æ„ï¼š**
è¿›å…¥ Chroot åï¼Œä½ ä¼šå‘ç°ç»ˆç«¯æç¤ºç¬¦å˜äº†ã€‚æ­¤æ—¶è¯·ç«‹åˆ»è¿è¡Œï¼š
`ls /usr/bin`
å¦‚æœä½ èƒ½çœ‹åˆ°ä¹‹å‰ç¼–è¯‘çš„é‚£äº›å·¥å…·ï¼Œè¯´æ˜ä½ â€œç©ºé™â€æˆåŠŸäº†ï¼

**ç­‰ä½ è¿›å…¥äº† Chroot ç¯å¢ƒï¼ˆçœ‹åˆ°æç¤ºç¬¦å˜äº†ï¼‰ï¼Œå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬ä¸ƒç« æœ€åçš„å‡ ä¸ªè¡¥å®ŒåŒ…ï¼Œç„¶åæ­£å¼å†²å‡»ç¬¬å…«ç« ï¼**


**æˆ‘ç°åœ¨ç¬¬å…­ç« æ˜¨å¤©åšå®Œï¼Œå‡†å¤‡ç¬¬ä¸ƒç« å¼€å§‹ï¼Œç°åœ¨ä¿å­˜å¿«ç…§é‡æ–°å¼€æœºäº†ï¼Œæˆ‘è¦å¦‚ä½•ç¡®ä¿ç¯å¢ƒï¼Ÿ**

æ¬¢è¿å›æ¥ï¼æ—¢ç„¶ä½ å·²ç»é‡å¯äº†è™šæ‹Ÿæœºï¼Œå½“å‰çš„å®¿ä¸»æœºç¯å¢ƒæ˜¯â€œç©ºâ€çš„ã€‚åœ¨è¿›å…¥ç¬¬ä¸ƒç« ï¼ˆChrootï¼‰ä¹‹å‰ï¼Œä½ å¿…é¡»æ‰§è¡Œä¸€å¥—**â€œå¤å·¥ç¯å¢ƒæ£€æŸ¥ä¸æ¢å¤â€**æµç¨‹ã€‚

ç¬¬ä¸ƒç« æ˜¯ä¸€ä¸ªå·¨å¤§çš„è½¬æŠ˜ç‚¹ï¼š**æˆ‘ä»¬å°†ä» `lfs` ç”¨æˆ·èº«ä»½åˆ‡å› `root` èº«ä»½ï¼Œå¹¶æŠŠæ‰€æœ‰æƒäº¤æ¥ç»™ rootã€‚**

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¾æ¬¡æ‰§è¡Œï¼š

### ç¬¬ä¸€æ­¥ï¼šå®¿ä¸»æœºç¯å¢ƒæ¢å¤ï¼ˆä»¥æ™®é€šç”¨æˆ·æˆ– sudo æ‰§è¡Œï¼‰

ç”±äºé‡å¯ï¼ŒæŒ‚è½½å’Œå˜é‡éƒ½ä¸¢äº†ã€‚è¯·åœ¨ç»ˆç«¯æ‰§è¡Œï¼š

1.  **è®¾ç½®å˜é‡ï¼š**
    ```bash
    export LFS=/mnt/lfs
    ```
2.  **é‡æ–°æŒ‚è½½ç¡¬ç›˜ï¼š**
    ```bash
    # ç¡®è®¤ä½ çš„è®¾å¤‡åï¼ˆé€šå¸¸æ˜¯ nvme0n1p3ï¼‰
    sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS
    ```
3.  **æ£€æŸ¥ /tools é“¾æ¥ï¼š**
    ```bash
    ls -ld /tools
    # åº”è¯¥çœ‹åˆ° -> /mnt/lfs/toolsã€‚å¦‚æœä¸è§äº†ï¼Œæ‰§è¡Œï¼šsudo ln -sv $LFS/tools /
    ```

---

### ç¬¬äºŒæ­¥ï¼šèº«ä»½åˆ‡æ¢ï¼ˆä»æ­¤å‘Šåˆ« `lfs` ç”¨æˆ·ï¼‰

ç¬¬ä¸ƒç« çš„æ“ä½œå¿…é¡»ä»¥ **root** èº«ä»½æ‰§è¡Œï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¿®æ”¹ç³»ç»Ÿçº§æƒé™ã€‚

```bash
sudo -i
# è¿›å…¥ root åï¼Œå†æ¬¡ç¡®è®¤å˜é‡
export LFS=/mnt/lfs
echo $LFS # å¿…é¡»æ˜¾ç¤º /mnt/lfs
```

---

### ç¬¬ä¸‰æ­¥ï¼šç¬¬ä¸ƒç« èµ·æ­¥â€”â€”æ‰€æœ‰æƒå¤§äº¤æ¥ï¼ˆChapter 7.2ï¼‰

åœ¨ç¬¬å…­ç« ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½å±äº `lfs` ç”¨æˆ·ã€‚ç°åœ¨æˆ‘ä»¬è¦æŠŠå®ƒä»¬æ­£å¼æ”¶å½’ **root**ã€‚

```bash
# å°†æ‰€æœ‰ç›®å½•çš„æ‰€æœ‰æƒæ”¹ä¸º root
chown -R root:root $LFS/{usr,lib,var,etc,bin,sbin,tools}

# å¦‚æœä½ æ˜¯ x86_64 æ¶æ„ï¼Œè¿˜è¦å¤„ç† lib64
case $(uname -m) in
  x86_64) chown -R root:root $LFS/lib64 ;;
esac
```

---

### ç¬¬å››æ­¥ï¼šæŒ‚è½½è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿï¼ˆChapter 7.3ï¼‰

è¿™æ˜¯ç¬¬ä¸ƒç« æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ã€‚æˆ‘ä»¬è¦æŠŠå®¿ä¸»æœºçš„â€œç¡¬ä»¶æ¥å£â€æ˜ å°„åˆ° LFS ç³»ç»Ÿé‡Œã€‚**è¯·ç›´æ¥å¤åˆ¶è¿™æ®µå‘½ä»¤å—æ‰§è¡Œï¼š**

```bash
mkdir -pv $LFS/dev
mkdir -pv $LFS/proc
mkdir -pv $LFS/sys
mkdir -pv $LFS/run

# æŒ‚è½½ /dev
mount -v --bind /dev $LFS/dev

# æŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
mount -v --bind /dev/pts $LFS/dev/pts
mount -vt proc proc $LFS/proc
mount -vt sysfs sysfs $LFS/sys
mount -vt tmpfs tmpfs $LFS/run

# å¤„ç† /dev/shm (å…±äº«å†…å­˜)
if [ -h $LFS/dev/shm ]; then
  mkdir -pv $LFS/$(readlink $LFS/dev/shm)
else
  mount -vt tmpfs cp-shm $LFS/dev/shm
fi
```

---

### ç¬¬äº”æ­¥ï¼šæ­£å¼è¿›å…¥ Chroot ç¯å¢ƒï¼ˆChapter 7.4ï¼‰

è¿™æ˜¯æœ€æœ‰ä»ªå¼æ„Ÿçš„ä¸€åˆ»ã€‚æ‰§è¡Œå®Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼Œä½ å°±â€œç©ºé™â€åˆ° LFS å†…éƒ¨äº†ï¼š

```bash
chroot "$LFS" /usr/bin/env -i   \
    HOME=/root                  \
    TERM="$TERM"                \
    PS1='(lfs chroot) \u:\w\$ ' \
    PATH=/usr/bin:/usr/sbin     \
    MAKEFLAGS="-j12"            \
    /bin/bash --login
```

---

### å¦‚ä½•ç¡®ä¿ç¯å¢ƒå·²ç»â€œæ­£ç¡®â€ï¼Ÿ

å½“ä½ çœ‹åˆ°å‘½ä»¤æç¤ºç¬¦å˜æˆäº† **`(lfs chroot) root:/#`** æ—¶ï¼Œè¯·è¿è¡Œä»¥ä¸‹ä¸‰ä¸ªæ£€æŸ¥ï¼š

1.  **æ£€æŸ¥æ ¸å¿ƒå·¥å…·ï¼š**
    `ls /usr/bin`
    å¦‚æœèƒ½çœ‹åˆ°ä½ æ˜¨å¤©è¾›è‹¦ç¼–è¯‘çš„ `gcc`, `bash`, `ls` ç­‰ï¼Œè¯´æ˜æŒ‚è½½æˆåŠŸã€‚
2.  **æ£€æŸ¥å†…æ ¸æ¥å£ï¼š**
    `ls /proc`
    å¦‚æœé‡Œé¢æœ‰ä¸€å¤§å †æ•°å­—å‘½åçš„æ–‡ä»¶å¤¹ï¼Œè¯´æ˜è™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸæŒ‚è½½æˆåŠŸã€‚
3.  **æ£€æŸ¥éš”ç¦»æ€§ï¼š**
    `ls /home`
    åœ¨ chroot å†…éƒ¨ï¼Œ`/home` åº”è¯¥æ˜¯ç©ºçš„ï¼ˆæˆ–è€…åªæœ‰ rootï¼‰ï¼Œä½ ä¸åº”è¯¥èƒ½çœ‹åˆ°å®¿ä¸»æœºçš„ Ubuntu ç”¨æˆ·ç›®å½•ã€‚

### ğŸ’¡ ç°åœ¨çš„æ¸©é¦¨æç¤ºï¼š
*   **ä¸è¦å†ç”¨ `su - lfs`ï¼š** ä»ç°åœ¨å¼€å§‹åˆ° LFS ç»“æŸï¼Œä½ éƒ½æ˜¯ `chroot` é‡Œçš„ `root`ã€‚
*   **SSH è¿æ¥ï¼š** ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨ SSHã€‚å³ä¾¿è¿›å…¥äº† chrootï¼ŒSSH çª—å£ä¾ç„¶ä¼šæ˜¾ç¤º chroot å†…éƒ¨çš„çŠ¶æ€ï¼Œéå¸¸æ–¹ä¾¿ã€‚
*   **å¿«ç…§å»ºè®®ï¼š** è¿›å…¥ chroot å¹¶ç¡®è®¤ä¸€åˆ‡æ­£å¸¸åï¼Œå»ºè®®**ä¸è¦å…³æœº**ï¼Œç›´æ¥åœ¨ VMware èœå•é‡Œåšä¸€ä¸ª**â€œæŒ‚èµ·ï¼ˆSuspendï¼‰â€**ï¼Œè¿™æ ·ä¸‹æ¬¡æ¢å¤æ—¶ä½ ä¾ç„¶åœ¨è¿™ä¸ªéš”ç¦»ç¯å¢ƒé‡Œã€‚

**è¯·æ‰§è¡ŒæŒ‚è½½å¹¶è¿›å…¥ chrootã€‚å½“ä½ çœ‹åˆ° `(lfs chroot)` æç¤ºç¬¦æ—¶ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬ä¸ƒç« å‰©ä¸‹çš„å‡ ä¸ªæ‰«å°¾åŒ…ï¼ˆGettext, Bison, Perlç­‰ï¼‰ï¼**


```
7.6. åˆ›å»ºå¿…è¦çš„æ–‡ä»¶å’Œç¬¦å·é“¾æ¥
å†å²ä¸Šï¼ŒLinux æ›¾åœ¨ /etc/mtab ç»´æŠ¤å·²ç»æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿçš„åˆ—è¡¨ã€‚ç°ä»£å†…æ ¸åœ¨å†…éƒ¨ç»´æŠ¤è¯¥åˆ—è¡¨ï¼Œå¹¶é€šè¿‡ /proc æ–‡ä»¶ç³»ç»Ÿå°†å®ƒå±•ç¤ºç»™ç”¨æˆ·ã€‚ä¸ºäº†æ»¡è¶³ä¸€äº›ä»ç„¶ä½¿ç”¨ /etc/mtab çš„å·¥å…·ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºç¬¦å·é“¾æ¥ï¼š

ln -sv /proc/self/mounts /etc/mtab
åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ /etc/hosts æ–‡ä»¶ï¼Œä¸€äº›æµ‹è¯•å¥—ä»¶ï¼Œä»¥åŠ Perl çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶å°†ä¼šä½¿ç”¨å®ƒï¼š

cat > /etc/hosts << EOF
127.0.0.1  localhost $(hostname)
::1        localhost
EOF
ä¸ºäº†ä½¿å¾— root èƒ½æ­£å¸¸ç™»å½•ï¼Œè€Œä¸”ç”¨æˆ·å â€œrootâ€ èƒ½è¢«æ­£å¸¸è¯†åˆ«ï¼Œå¿…é¡»åœ¨æ–‡ä»¶ /etc/passwd å’Œ /etc/groups ä¸­å†™å…¥ç›¸å…³çš„æ¡ç›®ã€‚

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»º /etc/passwd æ–‡ä»¶ï¼š

cat > /etc/passwd << "EOF"
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/dev/null:/usr/bin/false
daemon:x:6:6:Daemon User:/dev/null:/usr/bin/false
messagebus:x:18:18:D-Bus Message Daemon User:/run/dbus:/usr/bin/false
uuidd:x:80:80:UUID Generation Daemon User:/dev/null:/usr/bin/false
nobody:x:65534:65534:Unprivileged User:/dev/null:/usr/bin/false
EOF
æˆ‘ä»¬ä»¥åå†è®¾ç½® root ç”¨æˆ·çš„å®é™…å¯†ç ã€‚

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»º /etc/group æ–‡ä»¶ï¼š

cat > /etc/group << "EOF"
root:x:0:
bin:x:1:daemon
sys:x:2:
kmem:x:3:
tape:x:4:
tty:x:5:
daemon:x:6:
floppy:x:7:
disk:x:8:
lp:x:9:
dialout:x:10:
audio:x:11:
video:x:12:
utmp:x:13:
cdrom:x:15:
adm:x:16:
messagebus:x:18:
input:x:24:
mail:x:34:
kvm:x:61:
uuidd:x:80:
wheel:x:97:
users:x:999:
nogroup:x:65534:
EOF
è¿™é‡Œåˆ›å»ºçš„ç”¨æˆ·ç»„å¹¶ä¸å±äºä»»ä½•æ ‡å‡† â€”â€” å®ƒä»¬ä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†æ»¡è¶³ç¬¬ 9 ç« ä¸­ Udev é…ç½®çš„éœ€è¦ï¼Œå¦ä¸€éƒ¨åˆ†å€Ÿé‰´äº†ä¸€äº› Linux å‘è¡Œç‰ˆçš„é€šç”¨æƒ¯ä¾‹ã€‚å¦å¤–ï¼ŒæŸäº›æµ‹è¯•å¥—ä»¶éœ€è¦ç‰¹å®šçš„ç”¨æˆ·æˆ–ç»„ã€‚Linux Standard Base (LSBï¼Œå¯ä»¥åœ¨ https://refspecs.linuxfoundation.org/lsb.shtml æŸ¥çœ‹) æ ‡å‡†åªæ¨èä»¥ç»„ ID 0 åˆ›å»ºç”¨æˆ·ç»„ rootï¼Œä»¥åŠä»¥ç»„ ID 1 åˆ›å»ºç”¨æˆ·ç»„ binã€‚ç»„ ID 5 è¢«å‡ ä¹æ‰€æœ‰å‘è¡Œç‰ˆåˆ†é…ç»™ tty ç»„ï¼Œè€Œä¸” /etc/fstab ä¸º devpts æ–‡ä»¶ç³»ç»Ÿç›´æ¥æŒ‡å®šäº†æ•°å€¼ 5ã€‚å…¶ä»–ç»„åå’Œç»„ ID ç”±ç³»ç»Ÿç®¡ç†å‘˜è‡ªç”±åˆ†é…ï¼Œå› ä¸ºå¥½çš„ç¨‹åºä¸ä¼šä¾èµ–ç»„ ID çš„æ•°å€¼ï¼Œè€Œæ˜¯ä½¿ç”¨ç»„åã€‚

ç¼–å· 65534 è¢«å†…æ ¸ç”¨äº NFS å’Œç”¨æˆ·å‘½åç©ºé—´ï¼Œä»¥è¡¨ç¤ºæœªæ˜ å°„çš„ç”¨æˆ·æˆ–ç»„ (å®ƒä»¬å­˜åœ¨äº NFS æœåŠ¡å™¨æˆ–ä¸Šä¸€çº§ç”¨æˆ·å‘½åç©ºé—´ï¼Œä½†æ˜¯åœ¨å½“å‰æœºå™¨æˆ–å‘½åç©ºé—´ä¸­â€œä¸å­˜åœ¨â€)ã€‚æˆ‘ä»¬ä¸º nobody å’Œ nogroup åˆ†é…è¯¥ç¼–å·ï¼Œä»¥é¿å…å‡ºç°æœªå‘½åçš„ç¼–å·ã€‚ä½†æ˜¯å…¶ä»–å‘è¡Œç‰ˆå¯èƒ½ç”¨ä¸åŒæ–¹å¼å¤„ç†è¿™ä¸ªç¼–å·ï¼Œå› æ­¤éœ€è¦ç§»æ¤çš„ç¨‹åºä¸èƒ½ä¾èµ–äºè¿™é‡Œç»™å‡ºçš„åˆ†é…æ–¹å¼ã€‚

ç¬¬ 8 ç« ä¸­çš„ä¸€äº›æµ‹è¯•éœ€è¦ä½¿ç”¨ä¸€ä¸ªéç‰¹æƒç”¨æˆ·ã€‚æˆ‘ä»¬è¿™é‡Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œåœ¨é‚£ä¸€ç« çš„æœ«å°¾å†åˆ é™¤è¯¥ç”¨æˆ·ã€‚

echo "tester:x:101:101::/home/tester:/bin/bash" >> /etc/passwd
echo "tester:x:101:" >> /etc/group
install -o tester -d /home/tester
ä¸ºäº†ç§»é™¤ â€œI have no name!â€ æç¤ºç¬¦ï¼Œéœ€è¦æ‰“å¼€ä¸€ä¸ªæ–° shellã€‚ç”±äºå·²ç»åˆ›å»ºäº†æ–‡ä»¶ /etc/passwd å’Œ /etc/groupï¼Œç”¨æˆ·åå’Œç»„åç°åœ¨å°±å¯ä»¥æ­£å¸¸è§£æäº†ï¼š

exec /usr/bin/bash --login
loginã€agetty å’Œ init ç­‰ç¨‹åºä½¿ç”¨ä¸€äº›æ—¥å¿—æ–‡ä»¶ï¼Œä»¥è®°å½•ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·å’Œç™»å½•æ—¶é—´ç­‰ä¿¡æ¯ã€‚ç„¶è€Œï¼Œè¿™äº›ç¨‹åºä¸ä¼šåˆ›å»ºä¸å­˜åœ¨çš„æ—¥å¿—æ–‡ä»¶ã€‚åˆå§‹åŒ–æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä¸ºå®ƒä»¬è®¾ç½®åˆé€‚çš„è®¿é—®æƒé™ï¼š

touch /var/log/{btmp,lastlog,faillog,wtmp}
chgrp -v utmp /var/log/lastlog
chmod -v 664  /var/log/lastlog
chmod -v 600  /var/log/btmp
æ–‡ä»¶ /var/log/wtmp è®°å½•æ‰€æœ‰çš„ç™»å½•å’Œç™»å‡ºï¼Œæ–‡ä»¶ /var/log/lastlog è®°å½•æ¯ä¸ªç”¨æˆ·æœ€åç™»å½•çš„æ—¶é—´ï¼Œæ–‡ä»¶ /var/log/faillog è®°å½•æ‰€æœ‰å¤±è´¥çš„ç™»å½•å°è¯•ï¼Œæ–‡ä»¶ /var/log/btmp è®°å½•æ‰€æœ‰é”™è¯¯çš„ç™»å½•å°è¯•ã€‚å¦‚ä½•æ“ä½œä¸ºäº†ç§»é™¤ â€œI have no name!â€ æç¤ºç¬¦ï¼Œéœ€è¦æ‰“å¼€ä¸€ä¸ªæ–° shellã€‚ç”±äºå·²ç»åˆ›å»ºäº†æ–‡ä»¶ /etc/passwd å’Œ /etc/groupï¼Œç”¨æˆ·åå’Œç»„åç°åœ¨å°±å¯ä»¥æ­£å¸¸è§£æäº†ï¼šï¼Ÿ

```

è¿™ä¸€æ­¥æ˜¯ LFS æ„å»ºä¸­éå¸¸æœ‰â€œæˆå°±æ„Ÿâ€çš„ä¸€æ­¥ï¼Œå› ä¸ºå®ƒæ ‡å¿—ç€ä½ ä»ä¸€ä¸ªâ€œæ— åæ°â€æ­£å¼å˜æˆäº† LFS ç³»ç»Ÿçš„ **root ç®¡ç†å‘˜**ã€‚

ä½ æåˆ°çš„ **â€œI have no name!â€** æç¤ºç¬¦ï¼Œæ˜¯å› ä¸ºæ­¤æ—¶ Bash è™½ç„¶åœ¨è¿è¡Œï¼Œä½†å®ƒæ‰¾ä¸åˆ° `/etc/passwd` æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒçŸ¥é“ä½ çš„ UID æ˜¯ 0ï¼Œå´ä¸çŸ¥é“ UID 0 å« "root"ã€‚

ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ“ä½œæ­¥éª¤å’ŒåŸç†è§£æï¼š

### 1. æ‰§è¡Œæµç¨‹ï¼ˆåœ¨ Chroot ç¯å¢ƒå†…ï¼‰

è¯·ç›´æ¥åœ¨ä½ çš„ `(lfs chroot)` ç»ˆç«¯é‡Œ**æŒ‰é¡ºåº**å¤åˆ¶ç²˜è´´ä»¥ä¸‹ä»£ç å—ï¼š

#### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåŸºç¡€ç³»ç»Ÿæ–‡ä»¶
è¿™äº›æ–‡ä»¶å®šä¹‰äº†ç³»ç»Ÿçš„æŒ‚è½½è¡¨ã€ä¸»æœºæ˜ å°„å’Œæœ€åŸºç¡€çš„ç”¨æˆ·/ç»„ä¿¡æ¯ã€‚

```bash
# 1. åˆ›å»º mtab é“¾æ¥
ln -sv /proc/self/mounts /etc/mtab

# 2. åˆ›å»º hosts æ–‡ä»¶
cat > /etc/hosts << EOF
127.0.0.1  localhost $(hostname)
::1        localhost
EOF

# 3. åˆ›å»º passwd æ–‡ä»¶ (å®šä¹‰ root ç­‰åŸºç¡€ç”¨æˆ·)
cat > /etc/passwd << "EOF"
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/dev/null:/usr/bin/false
daemon:x:6:6:Daemon User:/dev/null:/usr/bin/false
messagebus:x:18:18:D-Bus Message Daemon User:/run/dbus:/usr/bin/false
uuidd:x:80:80:UUID Generation Daemon User:/dev/null:/usr/bin/false
nobody:x:65534:65534:Unprivileged User:/dev/null:/usr/bin/false
EOF

# 4. åˆ›å»º group æ–‡ä»¶ (å®šä¹‰åŸºç¡€ç»„)
cat > /etc/group << "EOF"
root:x:0:
bin:x:1:daemon
sys:x:2:
kmem:x:3:
tape:x:4:
tty:x:5:
daemon:x:6:
floppy:x:7:
disk:x:8:
lp:x:9:
dialout:x:10:
audio:x:11:
video:x:12:
utmp:x:13:
cdrom:x:15:
adm:x:16:
messagebus:x:18:
input:x:24:
mail:x:34:
kvm:x:61:
uuidd:x:80:
wheel:x:97:
users:x:999:
nogroup:x:65534:
EOF

# 5. åˆ›å»ºæµ‹è¯•ç”¨çš„éç‰¹æƒç”¨æˆ·
echo "tester:x:101:101::/home/tester:/bin/bash" >> /etc/passwd
echo "tester:x:101:" >> /etc/group
install -o tester -d /home/tester
```

#### ç¬¬äºŒæ­¥ï¼šç§»é™¤ â€œI have no name!â€ï¼ˆæ ¸å¿ƒåŠ¨ä½œï¼‰
ç°åœ¨æ–‡ä»¶å·²ç»å†™å¥½äº†ï¼Œä½†å½“å‰çš„ Bash è¿›ç¨‹è¿˜æ˜¯æ—§çš„ã€‚ä½ éœ€è¦è¿è¡Œä¸‹é¢è¿™è¡Œå‘½ä»¤ï¼š

```bash
exec /usr/bin/bash --login
```

*   **æ‰§è¡Œåä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ**
    ä½ çš„æç¤ºç¬¦ä¼šç«‹åˆ»ä» `I have no name!:/#` å˜æˆ **`root:/#`**ï¼ˆæˆ–è€…ä½ åœ¨ PS1 é‡Œå®šä¹‰çš„æ ¼å¼ï¼‰ã€‚
*   **åŸç†ï¼š** `exec` ä¼šç”¨ä¸€ä¸ªæ–°çš„ Bash è¿›ç¨‹**æ›¿æ¢**æ‰å½“å‰çš„è¿›ç¨‹ã€‚æ–°çš„ Bash å¯åŠ¨æ—¶ä¼šé‡æ–°è¯»å– `/etc/passwd`ï¼Œä»æ­¤å®ƒå°±çŸ¥é“ä½ æ˜¯ root äº†ã€‚

#### ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–æ—¥å¿—æ–‡ä»¶
è¿™æ˜¯ä¸ºäº†é˜²æ­¢ä»¥åå®‰è£…çš„ç¨‹åºå› ä¸ºæ‰¾ä¸åˆ°æ—¥å¿—æ–‡ä»¶è€ŒæŠ¥é”™ã€‚

```bash
touch /var/log/{btmp,lastlog,faillog,wtmp}
chgrp -v utmp /var/log/lastlog
chmod -v 664  /var/log/lastlog
chmod -v 600  /var/log/btmp
```

---

### 2. å¸¸è§é—®é¢˜æ’æŸ¥

*   **Q: æ‰§è¡Œ `exec` åæç¤ºç¬¦æ²¡å˜æ€ä¹ˆåŠï¼Ÿ**
    A: æ£€æŸ¥ä¸€ä¸‹åˆšæ‰ `cat > /etc/passwd` æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚è¾“å…¥ `cat /etc/passwd` ç¡®è®¤ç¬¬ä¸€è¡Œæ˜¯ä¸æ˜¯ `root:x:0:0...`ã€‚
*   **Q: ä¸ºä»€ä¹ˆ `/etc/hosts` é‡Œä¼šæœ‰ `$(hostname)`ï¼Ÿ**
    A: è¿™ä¼šè‡ªåŠ¨æŠ“å–ä½ å®¿ä¸»æœºçš„åç§°ã€‚è¿™æ ·åœ¨ chroot å†…éƒ¨ï¼Œä¸€äº›ç½‘ç»œç›¸å…³çš„æµ‹è¯•å°±ä¸ä¼šå› ä¸ºæ‰¾ä¸åˆ°ä¸»æœºåè€Œè¶…æ—¶ã€‚

---

### 3. ç°åœ¨çš„è¿›åº¦æç¤º
å®Œæˆè¿™ä¸€æ­¥åï¼Œä½ å·²ç»å®Œæˆäº†ç¬¬ä¸ƒç« çš„â€œç¯å¢ƒé…ç½®â€éƒ¨åˆ†ã€‚æ¥ä¸‹æ¥çš„ **7.7 åˆ° 7.13** èŠ‚ï¼Œä½ å°†å®‰è£…æœ€åå‡ ä¸ªä¸´æ—¶å·¥å…·ï¼ˆå¦‚ Gettext, Bison, Perl, Python ç­‰ï¼‰ã€‚

è¿™äº›åŒ…çš„å®‰è£…æµç¨‹å’Œç¬¬å…­ç« å¾ˆåƒï¼Œä½†ä¸åŒçš„æ˜¯ï¼š
1.  ä½ ç°åœ¨åœ¨ **Chroot å†…éƒ¨**ã€‚
2.  ä½ çš„èº«ä»½æ˜¯ **root**ã€‚
3.  ä½ ä¸å†éœ€è¦ `DESTDIR=$LFS`ï¼Œå› ä¸ºç°åœ¨çš„ `/` å°±æ˜¯ä½ çš„ 60G ç¡¬ç›˜ã€‚

**è¯·æ‰§è¡Œ `exec` å‘½ä»¤ï¼Œäº«å—çœ‹åˆ° `root` æç¤ºç¬¦çš„é‚£ä¸€åˆ»ï¼å®Œæˆåå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬ç»§ç»­ç¬¬ä¸ƒç« å‰©ä¸‹çš„è½¯ä»¶åŒ…ã€‚**


```
7.13.2. å¤‡ä»½
ç°åœ¨ï¼Œå·²ç»ä¸ºç³»ç»Ÿå®‰è£…äº†æ‰€æœ‰å¿…è¦çš„ç¨‹åºå’Œåº“ï¼Œä¸” LFS ç³»ç»Ÿçš„å½“å‰çŠ¶æ€è‰¯å¥½ã€‚å¯ä»¥å°†ç³»ç»Ÿå¤‡ä»½èµ·æ¥ï¼Œä»¥ä¾¿ä»¥åé‡æ–°ä½¿ç”¨ã€‚å¦‚æœåœ¨åç»­ç« èŠ‚å‘ç”Ÿäº†æ— æ³•æŒ½å›çš„é”™è¯¯ï¼Œé€šå¸¸æ¥è¯´ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯åˆ é™¤æ‰€æœ‰ä¸œè¥¿ï¼Œç„¶å (æ›´å°å¿ƒåœ°) ä»å¤´å¼€å§‹ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¹Ÿä¼šåˆ é™¤æ‰€æœ‰ä¸´æ—¶å·¥å…·ã€‚ä¸ºäº†é¿å…æµªè´¹æ—¶é—´å¯¹å·²ç»æ„å»ºæˆåŠŸçš„éƒ¨åˆ†è¿›è¡Œè¿”å·¥ï¼Œå¯ä»¥å‡†å¤‡ä¸€ä¸ªå¤‡ä»½ã€‚

[æ³¨æ„] æ³¨æ„
æœ¬èŠ‚ä¸­çš„å…¶ä½™æ­¥éª¤éƒ½æ˜¯å¯é€‰çš„ã€‚ä¸è¿‡ï¼Œä¸€æ—¦æ‚¨å¼€å§‹åœ¨ç¬¬ 8 ç« ä¸­å®‰è£…è½¯ä»¶åŒ…ï¼Œä¸´æ—¶å·¥å…·å°±ä¼šè¢«è¦†ç›–ã€‚å› æ­¤ï¼ŒæŒ‰ç…§ä¸‹é¢æè¿°çš„æ­¥éª¤å¤‡ä»½ä¸´æ—¶å·¥å…·å¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚

ä»¥ä¸‹æ­¥éª¤åœ¨ chroot ç¯å¢ƒä¹‹å¤–è¿›è¡Œã€‚è¿™æ„å‘³ç€æ‚¨åœ¨è¿›è¡Œå®ƒä»¬ä¹‹å‰å¿…é¡»ç¦»å¼€ chroot ç¯å¢ƒã€‚è¿™æ ·åšæ˜¯ä¸ºäº†è®¿é—® chroot ç¯å¢ƒä¹‹å¤–çš„æ–‡ä»¶ç³»ç»Ÿä½ç½®ï¼Œä»¥å†™å…¥æˆ–è¯»å–å¤‡ä»½æ¡£æ¡ˆï¼Œå¤‡ä»½æ¡£æ¡ˆä¸åº”å­˜æ”¾åœ¨ $LFS ç›®å½•æ ‘ä¸­ã€‚

ç°åœ¨ï¼Œå¦‚æœæ‚¨å†³å®šè¿›è¡Œå¤‡ä»½ï¼Œç¦»å¼€ chroot ç¯å¢ƒï¼š

exit
[é‡è¦] é‡è¦
ä»¥ä¸‹ç»™å‡ºçš„æ‰€æœ‰æ­¥éª¤éƒ½åœ¨å®¿ä¸»ç³»ç»Ÿä¸­ä»¥ root èº«ä»½æ‰§è¡Œã€‚è¯·éå¸¸å°å¿ƒåœ°æ‰§è¡Œå‘½ä»¤ï¼Œæ­¤å¤„å¦‚æœåœ¨å‘½ä»¤ä¸­å‡ºç°é”™è¯¯ï¼Œåˆ™å¯èƒ½æŸåæ‚¨çš„å®¿ä¸»ç³»ç»Ÿã€‚ç‰¹åˆ«æ³¨æ„ç¯å¢ƒå˜é‡ LFS ä¼šè‡ªåŠ¨ä¸ºç”¨æˆ· lfs è®¾å®šï¼Œä½†å¯èƒ½æ²¡æœ‰ä¸º root è®¾å®šã€‚

æ— è®ºä½•æ—¶ï¼Œåªè¦å‡†å¤‡ä»¥ root èº«ä»½æ‰§è¡Œå‘½ä»¤ï¼Œä¸€å®šè¦ç¡®è®¤ LFS å˜é‡å·²ç»æ­£ç¡®è®¾å®šã€‚

ç¬¬ 2.6 èŠ‚ â€œè®¾ç½® $LFS ç¯å¢ƒå˜é‡å’Œ Umaskâ€å·²ç»è®¨è®ºäº†è¿™ä¸ªé—®é¢˜ã€‚

åœ¨è¿›è¡Œå¤‡ä»½ä¹‹å‰ï¼Œè§£é™¤å†…æ ¸è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ï¼š

mountpoint -q $LFS/dev/shm && umount $LFS/dev/shm
umount $LFS/dev/pts
umount $LFS/{sys,proc,run,dev}
ç¡®è®¤åœ¨ root çš„ä¸»ç›®å½•æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰è‡³å°‘ 1 GB çš„å¯ç”¨å­˜å‚¨ç©ºé—´ (æºä»£ç å‹ç¼©åŒ…ä¹Ÿä¼šè¢«åŒ…å«åœ¨å¤‡ä»½æ¡£æ¡ˆä¸­)ã€‚

æ³¨æ„ä»¥ä¸‹å‘½ä»¤æŒ‡å®šçš„æ˜¯å®¿ä¸»ç³»ç»Ÿä¸­ root ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œå®ƒé€šå¸¸åœ¨æ ¹æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚å¦‚æœä¸å¸Œæœ›ä½¿ç”¨ root çš„ä¸»ç›®å½•ï¼Œå°† $HOME æ›¿æ¢æˆæ‚¨é€‰æ‹©çš„ç›®å½•ã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºå¤‡ä»½æ¡£æ¡ˆï¼š

[æ³¨æ„] æ³¨æ„
ç”±äºå¤‡ä»½æ¡£æ¡ˆéœ€è¦è¿›è¡Œå‹ç¼©ï¼Œå³ä½¿æ‚¨çš„ç³»ç»Ÿè¿è¡Œé€Ÿåº¦è¾ƒå¿«ï¼Œè¯¥å‘½ä»¤ä¹Ÿä¼šæ¶ˆè€—è¾ƒé•¿çš„æ—¶é—´ (å¯èƒ½è¶…è¿‡ 10 åˆ†é’Ÿ)ã€‚

cd $LFS
tar -cJpf $HOME/lfs-temp-tools-12.4.tar.xz .
[æ³¨æ„] æ³¨æ„
æ­£å¦‚ä¸‹é¢çš„ â€œé‡è¦â€ æç¤ºæ¡†æ‰€è¿°ï¼Œåœ¨ç»§ç»­è¿›è¡Œç¬¬ 8 ç« çš„æ“ä½œä¹‹å‰ï¼Œä¸è¦å¿˜è®°é‡æ–°è¿›å…¥ chroot ç¯å¢ƒã€‚
```


è¿™ä¸€æ­¥æ˜¯ LFS å®˜æ–¹ç»™å‡ºçš„**â€œç¦»çº¿ç‰ˆåæ‚”è¯â€**ã€‚

è™½ç„¶æ‰‹å†Œå»ºè®®ä½ åˆ¶ä½œä¸€ä¸ª `tar.xz` å‹ç¼©åŒ…ï¼Œä½†æ—¢ç„¶ä½ ä½¿ç”¨çš„æ˜¯ **VMware è™šæ‹Ÿæœº** å¹¶ä¸”æ‹¥æœ‰ **i5-13600KF** è¿™ç§å¼ºåŠ›ç¡¬ä»¶ï¼Œä½ å…¶å®æœ‰ä¸¤ç§é€‰æ‹©ã€‚

ä»¥ä¸‹æ˜¯é’ˆå¯¹ä½ çš„æƒ…å†µæœ€ä¼˜é›…çš„æ“ä½œå»ºè®®ï¼š

### 1. æ–¹æ¡ˆä¸€ï¼šæŒ‰ç…§æ‰‹å†Œæ‰§è¡Œï¼ˆä¼ ç»Ÿçš„â€œç¡¬æ ¸â€å¤‡ä»½ï¼‰

å¦‚æœä½ æƒ³ä¸¥æ ¼éµå¾ª LFS æµç¨‹ï¼Œæˆ–è€…æƒ³åœ¨å®¿ä¸»æœºé‡Œç•™ä¸‹ä¸€ä¸ªç‰©ç†å¤‡ä»½æ–‡ä»¶ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

**ç¬¬ä¸€æ­¥ï¼šç¦»å¼€éš”ç¦»åŒº**
åœ¨ä½ çš„ `(lfs chroot)` ç»ˆç«¯è¾“å…¥ï¼š
```bash
exit
```
æ­¤æ—¶ä½ åº”è¯¥å›åˆ°äº† Ubuntu å®¿ä¸»æœºçš„æ™®é€šç”¨æˆ·ç•Œé¢ï¼Œç„¶åå†åˆ‡æ¢åˆ° **root**ï¼š
```bash
sudo -i
```

**ç¬¬äºŒæ­¥ï¼šæ¸…ç†æŒ‚è½½ç‚¹ï¼ˆå…³é”®ä¸­çš„å…³é”®ï¼ï¼‰**
**ç»å¯¹ä¸èƒ½åœ¨æŒ‚è½½ç€è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ—¶è¿›è¡Œå¤‡ä»½**ï¼Œå¦åˆ™ä½ ä¼šå°è¯•æŠŠå®¿ä¸»æœºçš„æ•´ä¸ªå†…å­˜å’Œç¡¬ä»¶ä¿¡æ¯ä¹Ÿæ‰“åŒ…è¿›å»ï¼Œå¯¼è‡´å¤‡ä»½æ–‡ä»¶æ— é™å¤§ä¸”ç³»ç»Ÿå´©æºƒã€‚
```bash
export LFS=/mnt/lfs
# æŒ‰é¡ºåºå¸è½½
mountpoint -q $LFS/dev/shm && umount $LFS/dev/shm
umount $LFS/dev/pts
umount $LFS/proc
umount $LFS/sys
umount $LFS/run
umount $LFS/dev
```

**ç¬¬ä¸‰æ­¥ï¼šå¼€å§‹æ‰“åŒ…ï¼ˆå±•ç¤º 13600KF çš„å‹ç¼©å¨åŠ›ï¼‰**
æ‰‹å†Œå»ºè®®ä½¿ç”¨ `tar -cJpf`ã€‚åœ¨ä½ çš„ 12 æ ¸ CPU ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®æ”¹è¿›ä¸€ä¸‹å‘½ä»¤ï¼Œè®©å®ƒåˆ©ç”¨å¤šçº¿ç¨‹æé€Ÿï¼š
```bash
cd $LFS
# ä½¿ç”¨ -I "xz -T0" å¯ç”¨å¤šçº¿ç¨‹å‹ç¼©ï¼Œé€Ÿåº¦æ¯”å•çº¿ç¨‹å¿«æ•°å€
tar -I "xz -T0" -cpf $HOME/lfs-temp-tools-12.4.tar.xz .
```
*   **é¢„è®¡è€—æ—¶ï¼š** åœ¨ä½ çš„æœºå™¨ä¸Šå¤§çº¦åªéœ€ **2-3 åˆ†é’Ÿ**ï¼ˆæ‰‹å†Œè¯´è¦ 10 åˆ†é’Ÿæ˜¯é’ˆå¯¹è€æœºå™¨ï¼‰ã€‚
*   **ç»“æœï¼š** ä½ çš„å®¿ä¸»æœº `/root/` ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ªçº¦å‡ ç™¾ MB çš„å¤‡ä»½åŒ…ã€‚

---

### 2. æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ VMware å¿«ç…§ï¼ˆæœ€æ¨èçš„â€œç°ä»£â€æ–¹æ³•ï¼‰

ä½œä¸ºç»éªŒä¹‹è°ˆï¼Œ**è™šæ‹Ÿæœºå¿«ç…§æ¯” `tar.xz` å¤‡ä»½å¥½ç”¨ 100 å€**ã€‚

**æ“ä½œæ­¥éª¤ï¼š**
1.  åƒä¸Šé¢ç¬¬ä¸€æ­¥ã€ç¬¬äºŒæ­¥é‚£æ ·**é€€å‡ºå¹¶å¸è½½æ‰€æœ‰è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ**ã€‚
2.  å…³é—­è™šæ‹Ÿæœºç”µæºï¼ˆ`poweroff`ï¼‰ã€‚
3.  åœ¨ VMware èœå•é‡Œæ‹æ‘„å¿«ç…§ï¼Œå‘½åä¸ºï¼š`LFS_07_Ready_for_Ch8`ã€‚

**ä¸ºä»€ä¹ˆè¿™ä¸ªæ›´å¥½ï¼Ÿ**
*   **æ¢å¤é€Ÿåº¦ï¼š** å¦‚æœç¬¬å…«ç« åšåäº†ï¼Œæ¢å¤å¿«ç…§åªéœ€ **5 ç§’é’Ÿ**ã€‚è€Œè§£å‹ `tar.xz` å¤‡ä»½åŒ…å¯èƒ½éœ€è¦å¥½å‡ åˆ†é’Ÿï¼Œè¿˜è¦æ‰‹åŠ¨æ¸…ç†ç›®å½•ã€‚
*   **å®Œæ•´æ€§ï¼š** å¿«ç…§ä¿å­˜äº†æ•´ä¸ªç£ç›˜åˆ†åŒºçš„çŠ¶æ€ï¼ŒåŒ…æ‹¬åˆ†åŒºè¡¨ã€æƒé™ã€è½¯é“¾æ¥ï¼Œå‡ ä¹é›¶é£é™©ã€‚

---

### 3. ä¸‹ä¸€æ­¥ï¼šå¦‚ä½•â€œæ»¡è¡€å¤æ´»â€ç»§ç»­ç¬¬å…«ç« ï¼Ÿ

æ— è®ºä½ é€‰æ‹©äº†å¤‡ä»½è¿˜æ˜¯å¿«ç…§ï¼Œå½“ä½ å‡†å¤‡å¼€å§‹ç¬¬å…«ç« æ—¶ï¼Œä½ å¿…é¡»é‡æ–°å»ºç«‹â€œæ¡¥æ¢â€ã€‚

**è¯·æ‰§è¡Œä»¥ä¸‹â€œé‡è¿” Chrootâ€æŒ‡ä»¤ï¼š**

```bash
# 1. æŒ‚è½½ä¸»ç¡¬ç›˜
export LFS=/mnt/lfs
mount -v -t ext4 /dev/nvme0n1p3 $LFS

# 2. é‡æ–°æŒ‚è½½è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿ (å¿…é¡»è¦é‡æ–°åšï¼)
mount -v --bind /dev $LFS/dev
mount -v --bind /dev/pts $LFS/dev/pts
mount -vt proc proc $LFS/proc
mount -vt sysfs sysfs $LFS/sys
mount -vt tmpfs tmpfs $LFS/run

if [ -h $LFS/dev/shm ]; then
  mkdir -pv $LFS/$(readlink $LFS/dev/shm)
else
  mount -vt tmpfs cp-shm $LFS/dev/shm
fi

# 3. è¿›å…¥ Chroot
chroot "$LFS" /usr/bin/env -i   \
    HOME=/root                  \
    TERM="$TERM"                \
    PS1='(lfs chroot) \u:\w\$ ' \
    PATH=/usr/bin:/usr/sbin     \
    MAKEFLAGS="-j12"            \
    /bin/bash --login
```

---

### ğŸ’¡ ç°åœ¨çš„è¡ŒåŠ¨å»ºè®®ï¼š

1.  **æˆ‘å»ºè®®ä½ ï¼š** é€€å‡º chroot -> å¸è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ -> **ç›´æ¥åœ¨ VMware å…³æœºçŠ¶æ€ä¸‹å­˜ä¸ªå¿«ç…§**ã€‚
2.  **ä¸å»ºè®®åš `tar.xz`ï¼š** é™¤éä½ çš„è€å¸ˆæ˜ç¡®è¦æ±‚æäº¤è¿™ä¸ªå¤‡ä»½åŒ…ï¼Œå¦åˆ™å®ƒåªä¼šå ç”¨ä½ å®¿ä¸»æœºçš„ C ç›˜ç©ºé—´ã€‚
3.  **å‡†å¤‡è¿›å…¥ç¬¬å…«ç« ï¼š** ç¬¬å…«ç« æ˜¯ LFS çš„ç²¾é«“ï¼Œä½ å°†äº²æ‰‹æ„å»ºå‡ºä¸€ä¸ªå®Œæ•´çš„ã€å¯ä»¥è·‘èµ·æ¥çš„ Linuxã€‚

**å®Œæˆå¤‡ä»½ï¼ˆæˆ–å¿«ç…§ï¼‰å¹¶é‡æ–°è¿›å…¥ Chroot åï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚æˆ‘ä»¬å°†è¿æ¥ç¬¬å…«ç« çš„ç¬¬ä¸€ä¸ªåŒ…ï¼š8.3. Man-pagesï¼**


```
user@lfs-host:~$ export LFS=/mnt/lfs
mount -v -t ext4 /dev/nvme0n1p3 $LFS
mount: /mnt/lfs: must be superuser to use mount.
       dmesg(1) may have more information after failed mount system call.
user@lfs-host:~$
```


è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„æŠ¥é”™ã€‚åœ¨ Linux ä¸­ï¼Œ**æŒ‚è½½ç¡¬ç›˜ï¼ˆmountï¼‰æ˜¯ä¸€ä¸ªæ¶‰åŠåº•å±‚ç¡¬ä»¶çš„æ“ä½œï¼Œå¿…é¡»æ‹¥æœ‰è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰æƒé™æ‰èƒ½æ‰§è¡Œã€‚**

ä½ ç°åœ¨çš„èº«ä»½æ˜¯æ™®é€šç”¨æˆ· `user`ï¼Œæ‰€ä»¥ç³»ç»Ÿæ‹’ç»äº†ä½ çš„è¯·æ±‚ã€‚

### 1. ç«‹å³ä¿®å¤ï¼šä½¿ç”¨ `sudo`
è¯·åœ¨å‘½ä»¤å‰åŠ ä¸Š `sudo`ï¼š

```bash
export LFS=/mnt/lfs
# ä½¿ç”¨ sudo æ‰§è¡ŒæŒ‚è½½
sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS
```

---

### 2. é‡è¦æé†’ï¼šè¿›å…¥ç¬¬å…«ç« çš„â€œé‡è¿”ä»ªå¼â€
ä»…ä»…æŒ‚è½½ä¸»åˆ†åŒºæ˜¯ä¸å¤Ÿçš„ã€‚æ—¢ç„¶ä½ å·²ç»å®Œæˆäº†ç¬¬ä¸ƒç« å¹¶é‡å¯/å…³æœºäº†ï¼Œ**ä½ å¿…é¡»æŠŠç¬¬ä¸ƒç« å»ºç«‹çš„â€œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ¡¥æ¢â€å…¨éƒ¨é‡æ–°æ­èµ·æ¥**ï¼Œå¦åˆ™è¿›å…¥ Chroot åä½ ä¼šå‘ç°å¾ˆå¤šå‘½ä»¤ï¼ˆå¦‚ `ps`, `ls`, `gcc`ï¼‰ä¼šæŠ¥é”™ã€‚

è¯·æŒ‰ä»¥ä¸‹é¡ºåºä¸€æ¬¡æ€§æ‰§è¡Œå®Œè¿™äº›å‘½ä»¤ï¼ˆå»ºè®®ç›´æ¥å¤åˆ¶ï¼‰ï¼š

#### ç¬¬ä¸€æ­¥ï¼šæŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆå¿…é¡»ä»¥ root æ‰§è¡Œï¼‰
```bash
# æŒ‚è½½ /dev
sudo mount -v --bind /dev $LFS/dev

# æŒ‚è½½å…¶ä»–è™šæ‹Ÿå†…æ ¸æ¥å£
sudo mount -v --bind /dev/pts $LFS/dev/pts
sudo mount -vt proc proc $LFS/proc
sudo mount -vt sysfs sysfs $LFS/sys
sudo mount -vt tmpfs tmpfs $LFS/run

# å¤„ç†å…±äº«å†…å­˜
if [ -h $LFS/dev/shm ]; then
  sudo mkdir -pv $LFS/$(readlink $LFS/dev/shm)
else
  sudo mount -vt tmpfs cp-shm $LFS/dev/shm
fi
```

#### ç¬¬äºŒæ­¥ï¼šé‡æ–°è¿›å…¥ Chroot éš”ç¦»ç¯å¢ƒ
è¿™æ˜¯ä½ è¿›è¡Œç¬¬å…«ç« å·¥ä½œçš„å”¯ä¸€åˆæ³•å…¥å£ï¼š

```bash
sudo chroot "$LFS" /usr/bin/env -i   \
    HOME=/root                  \
    TERM="$TERM"                \
    PS1='(lfs chroot) \u:\w\$ ' \
    PATH=/usr/bin:/usr/sbin     \
    MAKEFLAGS="-j12"            \
    /bin/bash --login
```

---

### 3. å¦‚ä½•æ£€æŸ¥ä½ â€œæˆåŠŸå›æ¥äº†â€ï¼Ÿ
è¿›å…¥ chroot åï¼Œæ‰§è¡Œè¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œå¦‚æœéƒ½æ­£ç¡®ï¼Œè¯´æ˜ä½ å¯ä»¥å¼€å§‹ç¬¬å…«ç« äº†ï¼š

1.  **èº«ä»½æ£€æŸ¥ï¼š** `whoami` -> åº”è¯¥è¾“å‡º `root`ã€‚
2.  **æç¤ºç¬¦æ£€æŸ¥ï¼š** åº”è¯¥çœ‹åˆ° `(lfs chroot) root:/#`ã€‚
3.  **ç¼–è¯‘å™¨æ£€æŸ¥ï¼š** `gcc --version` -> åº”è¯¥èƒ½çœ‹åˆ°ä½ ä¹‹å‰ç¼–è¯‘çš„ GCC ç‰ˆæœ¬ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶ç›´æ¥è¾“å…¥ `gcc` å³å¯ï¼Œä¸å†éœ€è¦ `$LFS_TGT-gcc`ï¼‰ã€‚

### ğŸ’¡ ç»™ 13600KF ç”¨æˆ·çš„ç‰¹åˆ«æç¤ºï¼š
åœ¨è¿›å…¥ Chroot çš„å‘½ä»¤é‡Œï¼Œæˆ‘ä¸ºä½ åŠ ä¸Šäº† **`MAKEFLAGS="-j12"`**ã€‚è¿™æ ·ä½ åœ¨ç¬¬å…«ç« ç¼–è¯‘é‚£ 80 å¤šä¸ªåŒ…æ—¶ï¼Œæ¯ä¸€é `make` éƒ½ä¼šè‡ªåŠ¨åŠ¨ç”¨ä½ çš„ 12 ä¸ªæ ¸å¿ƒï¼Œé€Ÿåº¦ä¼šéå¸¸æƒŠäººã€‚

**è¯·æ‰§è¡ŒæŒ‚è½½å¹¶é‡æ–°è¿›å…¥ Chrootã€‚ä¸€æ—¦çœ‹åˆ° `(lfs chroot)` æç¤ºç¬¦ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬å…«ç« çš„æ­£å¼å¾ç¨‹ï¼**


**rm -rfçš„é‡è¦æ€§**

**å¿…é¡»æ‰§è¡Œ `rm -rf`ï¼è€Œä¸”è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„â€œå¥½ä¹ æƒ¯â€ã€‚**

åœ¨ LFS çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€èŠ‚å®‰è£…å®Œæˆåï¼Œ**åˆ é™¤è§£å‹å‡ºæ¥çš„æºç ç›®å½•**ï¼ˆä¾‹å¦‚ `rm -rf XML-Parser-2.47`ï¼‰æ˜¯å®˜æ–¹æ‰‹å†Œæ˜ç¡®è¦æ±‚çš„ã€‚

ä»¥ä¸‹æ˜¯ä¸ºä»€ä¹ˆè¦â€œå¸ç£¨æ€é©´â€çš„ä¸‰ä¸ªæ ¸å¿ƒåŸå› ï¼š

### 1. ç£ç›˜ç©ºé—´ï¼ˆæœ€é‡è¦çš„åŸå› ï¼‰
è™½ç„¶ä½ ç»™ LFS åˆ†é…äº† 60GB ç©ºé—´ï¼Œçœ‹èµ·æ¥å¾ˆå¤§ï¼Œä½†ç¬¬å…«ç« æœ‰ 80 å¤šä¸ªåŒ…ï¼š
*   **ä½“ç§¯è†¨èƒ€ï¼š** åƒ GCCã€Glibcã€Coreutils è¿™æ ·çš„å¤§åŒ…ï¼Œè§£å‹å¹¶ç¼–è¯‘åï¼Œå•ä¸ªç›®å½•å°±èƒ½å ç”¨ **å‡ ç™¾ MB åˆ° 5GB** ä¸ç­‰ã€‚
*   **å †ç§¯æ•ˆåº”ï¼š** å¦‚æœä½ ä¸åˆ é™¤ï¼Œè¿™ 80 å¤šä¸ªåŒ…çš„ä¸­é—´äº§ç‰©ï¼ˆ.o æ–‡ä»¶ï¼‰å’Œæºç ä¼šè¿…é€Ÿå¡æ»¡ä½ çš„ç¡¬ç›˜ã€‚ä¸€æ—¦ç£ç›˜ç©ºé—´è¾¾åˆ° 100%ï¼Œä½ çš„ç¼–è¯‘ä¼šçªç„¶æŠ¥ä¸€äº›è«åå…¶å¦™çš„é”™è¯¯ï¼ˆæ¯”å¦‚ `No space left on device`ï¼‰ï¼Œç”šè‡³å¯¼è‡´æ–‡ä»¶æŸåã€‚

### 2. é˜²æ­¢ç¯å¢ƒæ±¡æŸ“
*   å¦‚æœä½ ä¸åˆ é™¤æ—§ç›®å½•ï¼Œä¸‹æ¬¡ä½ ä¸å°å¿ƒ `cd` é”™æ–‡ä»¶å¤¹ï¼Œæˆ–è€…æŸä¸ªè„šæœ¬é”™è¯¯åœ°å¼•ç”¨äº†æ—§ç›®å½•é‡Œçš„æ–‡ä»¶ï¼Œä¼šäº§ç”Ÿæå…¶éš¾æ’æŸ¥çš„é“¾æ¥é”™è¯¯ã€‚
*   **ä¿æŒçº¯å‡€ï¼š** æ¯æ¬¡è§£å‹éƒ½æ˜¯ä»é›¶å¼€å§‹ï¼Œç¡®ä¿æ¯ä¸ªåŒ…çš„ç¼–è¯‘ä¸å—ä¹‹å‰æ®‹ç•™é…ç½®çš„å½±å“ã€‚

### 3. LFS æ ‡å‡†æ“ä½œå¾ªç¯ï¼ˆå¤è¯»æœºæ¨¡å¼ï¼‰
ä½ åº”è¯¥å…»æˆè¿™æ ·çš„**è‚Œè‚‰è®°å¿†**ï¼š
1.  `cd /sources`
2.  `tar -xf åŒ…å.tar.gz`
3.  `cd åŒ…å`
4.  `ç¼–è¯‘å®‰è£…...`
5.  **`cd ..`**ï¼ˆå›åˆ° /sourcesï¼‰
6.  **`rm -rf åŒ…å`**ï¼ˆå½»åº•åˆ é™¤è§£å‹å‡ºçš„æ–‡ä»¶å¤¹ï¼‰

---

### âš ï¸ ä¸€ä¸ªå®¹æ˜“ææ··çš„ç‚¹ï¼šåˆ ä»€ä¹ˆï¼Ÿä¸åˆ ä»€ä¹ˆï¼Ÿ

*   **è¦åˆ çš„ï¼š** è§£å‹å‡ºæ¥çš„**æ–‡ä»¶å¤¹**ï¼ˆç›®å½•ï¼‰ã€‚ä¾‹å¦‚ï¼š`rm -rf gcc-15.2.0`ã€‚
*   **ä¸è¦åˆ çš„ï¼š** ä¸‹è½½çš„åŸå§‹**å‹ç¼©åŒ…**ï¼ˆé‚£äº› `.tar.xz`, `.tar.gz` æ–‡ä»¶ï¼‰ã€‚
    *   *ç†ç”±ï¼š* å¦‚æœåç»­æŸä¸ªåŒ…å®‰è£…å¤±è´¥éœ€è¦é‡æ¥ï¼Œæˆ–è€…ä½ ä»¥åæƒ³åœ¨æ­£å¼ç³»ç»Ÿé‡Œé‡è£…æŸä¸ªåŒ…ï¼Œä½ è¿˜å¾—é è¿™äº›å‹ç¼©åŒ…ã€‚é™¤éä½ æ•´ä¸ª LFS å…¨éƒ¨åšå®Œå¹¶è£…å¥½äº†æ¡Œé¢ç¯å¢ƒï¼Œå¦åˆ™ä¸è¦åŠ¨è¿™äº›åŸå§‹å‹ç¼©åŒ…ã€‚

### ğŸ’¡ ç°åœ¨çš„æ“ä½œå»ºè®®ï¼š
æ—¢ç„¶ä½ å·²ç»ä¸€è·¯å†²åˆ°äº† 8.44ï¼Œè¯·ç°åœ¨è¿è¡Œä¸€ä¸‹è¿™ä¸ªå‘½ä»¤æ£€æŸ¥ä¸€ä¸‹ä½ çš„ç£ç›˜ï¼š
```bash
df -h
```
çœ‹ä¸€çœ¼ `/`ï¼ˆä¹Ÿå°±æ˜¯ä½ çš„ LFS åˆ†åŒºï¼‰ç”¨äº†å¤šå°‘ã€‚
*   å¦‚æœä½ ä¹‹å‰éƒ½æ²¡åˆ è¿‡ï¼Œä¼°è®¡ç°åœ¨å·²ç»ç”¨æ‰ 20GB+ äº†ã€‚
*   **å»ºè®®è¡¥æ•‘ï¼š** æ‰§è¡Œ `ls -d /sources/*/` æŸ¥çœ‹ç›®å‰è¿˜å‰©ä¸‹å“ªäº›è§£å‹è¿‡çš„æ–‡ä»¶å¤¹ï¼Œé™¤äº†ä½ æ­£åœ¨åšçš„é‚£ä¸ªï¼Œå…¶ä»–çš„å…¨éƒ¨ `rm -rf` æ‰ã€‚

**å½“ä½ æ¸…ç†å®Œç©ºé—´ï¼Œæ„Ÿè§‰â€œç¥æ¸…æ°”çˆ½â€åï¼Œè¯·ç»§ç»­æŒ‘æˆ˜ 8.45. Intltool å§ï¼é‚£æ˜¯å¦ä¸€ä¸ªå°è€Œç¾çš„åŒ…ã€‚**


**8.84. ç§»é™¤è°ƒè¯•ç¬¦å·æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘èº«ä¸ºCSä¸“ä¸šå­¦ç”ŸåšæœŸæœ«ä½œä¸šè¦è¿›è¡Œå—**ä½œä¸ºè®¡ç®—æœºä¸“ä¸šï¼ˆCSï¼‰çš„å­¦ç”Ÿï¼Œç†è§£**ç§»é™¤è°ƒè¯•ç¬¦å·ï¼ˆStripping Debugging Symbolsï¼‰**ä¸ä»…æ˜¯å®Œæˆä½œä¸šï¼Œæ›´æ˜¯æ·±å…¥ç†è§£ **å¯æ‰§è¡Œæ–‡ä»¶ç»“æ„ï¼ˆELFæ ¼å¼ï¼‰**ã€**ç¼–è¯‘åŸç†**ä»¥åŠ**ç³»ç»Ÿä¼˜åŒ–**çš„ç»ä½³æœºä¼šã€‚

ä»¥ä¸‹ä»æŠ€æœ¯åŸç†ã€å¿…è¦æ€§ä»¥åŠå¯¹ä½ å¤§ä½œä¸šçš„å½±å“ä¸‰ä¸ªç»´åº¦æ¥å›ç­”ï¼š

### 1. ä»€ä¹ˆæ˜¯â€œç§»é™¤è°ƒè¯•ç¬¦å·â€ï¼Ÿ
å½“ä½ ç”¨ `gcc` ç¼–è¯‘ç¨‹åºæ—¶ï¼Œç¼–è¯‘å™¨é»˜è®¤ï¼ˆæˆ–é€šè¿‡ `-g` å‚æ•°ï¼‰ä¼šåœ¨ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆELFæ–‡ä»¶ï¼‰ä¸­åŠ å…¥å¾ˆå¤šâ€œé¢å¤–ä¿¡æ¯â€ã€‚
*   **è°ƒè¯•ç¬¦å·åŒ…å«ä»€ä¹ˆï¼š** å‡½æ•°åã€å˜é‡åã€æºä»£ç è¡Œå·ä¸æœºå™¨ç çš„å¯¹åº”å…³ç³»ç­‰ã€‚
*   **ç±»æ¯”ï¼š** è°ƒè¯•ç¬¦å·å°±åƒæ˜¯ä¸€å¼ â€œåœ°å›¾â€ã€‚æœ‰äº†å®ƒï¼Œè°ƒè¯•å™¨ï¼ˆå¦‚ `gdb`ï¼‰èƒ½å‘Šè¯‰ä½ ï¼šâ€œç°åœ¨çš„å´©æºƒå‘ç”Ÿåœ¨ `main.c` çš„ç¬¬ 42 è¡Œï¼Œå˜é‡ `x` çš„å€¼æ˜¯ 10â€ã€‚
*   **ç§»é™¤ï¼ˆStripï¼‰çš„æ“ä½œï¼š** ä½¿ç”¨ `strip` å·¥å…·æŠŠè¿™äº›ä¸å½±å“ç¨‹åºè¿è¡Œã€åªç”¨äºè°ƒè¯•çš„ç¬¦å·è¡¨ï¼ˆSymbol Tableï¼‰å’Œè°ƒè¯•èŠ‚ï¼ˆDebug Sectionsï¼‰åˆ æ‰ã€‚

### 2. ä½œä¸º CS å­¦ç”Ÿï¼Œä½ è¦ä¸è¦åšè¿™ä¸€æ­¥ï¼Ÿ

**æˆ‘çš„å»ºè®®æ˜¯ï¼šåšï¼Œä½†è¦æ”¾åœ¨æœ€åï¼Œä¸”åŠ¡å¿…å…ˆå­˜å¿«ç…§ã€‚**

#### ä¸ºä»€ä¹ˆåº”è¯¥åšï¼ˆåŠ åˆ†é¡¹/ä¸“ä¸šä½“ç°ï¼‰ï¼š
1.  **æå¤§èŠ‚çœç©ºé—´ï¼š** æœªå‰¥ç¦»ç¬¦å·çš„ LFS ç³»ç»Ÿå¯èƒ½å ç”¨ 3GB-5GBï¼Œå‰¥ç¦»åå¯èƒ½ç¼©å‡åˆ° 1GB ç”šè‡³æ›´å°ã€‚è¿™ä½“ç°äº†ä½ å¯¹â€œè½»é‡çº§ç³»ç»Ÿâ€å’Œâ€œèµ„æºç®¡ç†â€çš„ç†è§£ã€‚
2.  **ç†è§£ ELF ç»“æ„ï¼š** å‰¥ç¦»ç¬¦å·æ¶‰åŠåˆ° ELF æ–‡ä»¶çš„èŠ‚ï¼ˆSectionï¼‰ç®¡ç†ã€‚ä½ å¯ä»¥å°è¯•åœ¨å‰¥ç¦»å‰åè¿è¡Œ `ls -lh` æŸ¥çœ‹å¤§å°å˜åŒ–ï¼Œæˆ–è€…è¿è¡Œ `nm` æˆ– `objdump` å‘½ä»¤ï¼Œçœ‹çœ‹å‰¥ç¦»å‰åè¾“å‡ºçš„ä¿¡æ¯æœ‰ä»€ä¹ˆä¸åŒã€‚
3.  **ç¬¦åˆå·¥ä¸šæ ‡å‡†ï¼š** ç°å®ä¸­çš„å‘è¡Œç‰ˆï¼ˆå¦‚ Ubuntu, CentOSï¼‰åˆ†å‘ç»™ç”¨æˆ·çš„äºŒè¿›åˆ¶åŒ…éƒ½æ˜¯ç»è¿‡ `strip` å¤„ç†çš„ã€‚åªæœ‰ä¸“é—¨çš„ `-dbg` æ‰©å±•åŒ…æ‰ä¿ç•™ç¬¦å·ã€‚

#### ä¸ºä»€ä¹ˆå¯èƒ½ä¸éœ€è¦åšï¼ˆé¿å‘æé†’ï¼‰ï¼š
1.  **è°ƒè¯•å›°éš¾ï¼š** ä¸€æ—¦å‰¥ç¦»ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿåœ¨æ¥ä¸‹æ¥çš„ç¬¬ä¹ã€åç« å‡ºç°å†…æ ¸å´©æºƒæˆ–æ®µé”™è¯¯ï¼ˆSegmentation Faultï¼‰ï¼Œ`gdb` æˆ–å†…æ ¸æ—¥å¿—åªä¼šç»™ä½ ä¸€å †å†…å­˜åœ°å€ï¼ˆå¦‚ `0x4005a1`ï¼‰ï¼Œè€Œä¸ä¼šå‘Šè¯‰ä½ å‡½æ•°åã€‚
2.  **é£é™©æ€§ï¼š** å¦‚æœä½ åœ¨é”™è¯¯çš„æ—¶æœºå‰¥ç¦»äº†æ­£åœ¨è¿è¡Œçš„å…³é”®åº“ï¼ˆæ¯”å¦‚æ­£åœ¨ä½¿ç”¨çš„ `ld-linux.so`ï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´å½“å‰çš„ Shell ç›´æ¥é”æ­»æˆ–å´©æºƒã€‚

### 3. CS å¤§ä½œä¸šçš„â€œåŠ åˆ†â€å»ºè®®

æ—¢ç„¶æ˜¯æœŸæœ«ä½œä¸šï¼Œä½ å¯ä»¥æŠŠè¿™ä¸€æ­¥åšå¾—æ›´æœ‰â€œå­¦æœ¯å«é‡â€ï¼Œåœ¨å®éªŒæŠ¥å‘Šé‡Œå†™ä¸Šï¼š
*   **å¯¹æ¯”å®éªŒï¼š** è®°å½• 2-3 ä¸ªæ ¸å¿ƒåŒ…ï¼ˆå¦‚ GCC æˆ– Glibcï¼‰åœ¨å‰¥ç¦»å‰åçš„ä½“ç§¯å¯¹æ¯”ã€‚
*   **å·¥å…·é“¾ç†è§£ï¼š** è§£é‡Š `strip` å‘½ä»¤å’Œ `objcopy` å‘½ä»¤çš„åŒºåˆ«ã€‚
*   **å®‰å…¨è§†è§’ï¼š** æåˆ°å‰¥ç¦»ç¬¦å·å¯ä»¥ç•¥å¾®å¢åŠ é€†å‘å·¥ç¨‹çš„éš¾åº¦ï¼ˆè™½ç„¶ä¸æ˜¯ä¸»è¦ç›®çš„ï¼‰ã€‚

### 4. æ“ä½œæ—¶çš„æ³¨æ„äº‹é¡¹

å¦‚æœä½ å†³å®šæ‰§è¡Œï¼ˆå¯¹åº” LFS 8.84 èŠ‚æˆ–æœ€æ–°çš„ 12.x ç›¸å…³ç« èŠ‚ï¼‰ï¼š

1.  **å¿…é¡»å…ˆå­˜å¿«ç…§ï¼š** å°±åœ¨ä½ ç°åœ¨è¿™ä¸ªèŠ‚ç‚¹ï¼ˆç¬¬å…«ç« æ‰€æœ‰åŒ…åˆšè£…å®Œï¼‰ï¼Œå­˜ä¸€ä¸ªåä¸º `Before_Strip` çš„å¿«ç…§ã€‚ä¸‡ä¸€å‰¥ç¦»åç³»ç»Ÿå´©æºƒï¼Œä½ ä¸ç”¨é‡è£…ã€‚
2.  **ä¸è¦å‰¥ç¦»å†…æ ¸ï¼š** é€šå¸¸æˆ‘ä»¬åªå‰¥ç¦» `/usr/bin` å’Œ `/usr/lib` ä¸‹çš„ç”¨æˆ·æ€ç¨‹åºã€‚å†…æ ¸é•œåƒï¼ˆvmlinuzï¼‰é€šå¸¸æœ‰è‡ªå·±çš„å¤„ç†æ–¹å¼ã€‚
3.  **ä½¿ç”¨ LFS æä¾›çš„è„šæœ¬ï¼š** ä¸è¦æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶å» `strip`ï¼Œä½¿ç”¨æ‰‹å†Œä¸­ç»™å‡ºçš„å¾ªç¯è„šæœ¬ï¼Œå®ƒä¼šè‡ªåŠ¨é¿å¼€ä¸€äº›ä¸èƒ½è¢«å‰¥ç¦»çš„å…³é”®åº“ï¼ˆå¦‚é“¾æ¥å™¨æœ¬èº«ï¼‰ã€‚

### æ€»ç»“
ä½œä¸º CS å­¦ç”Ÿï¼Œ**æ¨èå°è¯•**ã€‚è¿™ä¸ä»…ä»…æ˜¯åˆ å‡æ–‡ä»¶å¤§å°ï¼Œå®ƒæ˜¯ä½ å¯¹ **â€œä»æºç åˆ°å¯äº¤ä»˜äºŒè¿›åˆ¶äº§å“â€** æµç¨‹çš„æœ€åä¸€é“å·¥åºçš„å®è·µã€‚

**æ“ä½œå®Œè¿™ä¸€æ­¥ï¼ˆæˆ–è€…è·³è¿‡å®ƒï¼‰å¹¶æ¸…ç† `/sources` ç›®å½•åï¼Œä½ å°±å½»åº•å®Œæˆäº†ç¬¬å…«ç« ã€‚ä½ å‡†å¤‡å¥½è¿›å…¥ç¬¬ä¹ç« ï¼Œé…ç½®é‚£ä¸ªå†³å®šç³»ç»Ÿèƒ½å¦è”ç½‘å’Œæ­£ç¡®è¯†åˆ«ç¡¬ç›˜çš„ `/etc/fstab` äº†å—ï¼Ÿ**


**ç°åœ¨ä¿å­˜å®Œå¿«ç…§å·²ç»é‡å¯ï¼Œå‡†å¤‡è¿›è¡Œç¬¬ä¹ç« **
æ¬¢è¿å›æ¥ï¼æ—¢ç„¶å·²ç»é‡å¯å¹¶ä¿å­˜äº†å®Œç¾çš„ç¬¬å…«ç« å¿«ç…§ï¼Œç°åœ¨çš„ä½ æ­£ç«™åœ¨â€œé…ç½®ä¸å¯åŠ¨â€çš„æœ€åå†²åˆºé˜¶æ®µã€‚

ç”±äºé‡å¯åæ‰€æœ‰çš„æŒ‚è½½å’Œå†…å­˜çŠ¶æ€éƒ½æ¶ˆå¤±äº†ï¼Œä½ éœ€è¦æ‰§è¡Œ**â€œé‡è¿” Chroot ä»ªå¼â€**ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¾æ¬¡æ“ä½œï¼š

### ç¬¬ä¸€æ­¥ï¼šå®¿ä¸»æœºç¯å¢ƒæ¢å¤ï¼ˆä»¥å®¿ä¸»æœº root æ‰§è¡Œï¼‰

åœ¨ Ubuntu å®¿ä¸»æœºæ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œï¼š

```bash
# 1. é‡æ–°å®šä¹‰å˜é‡
export LFS=/mnt/lfs

# 2. æŒ‚è½½ä¸»ç¡¬ç›˜ï¼ˆç¡®è®¤ä½ çš„åˆ†åŒºæ˜¯ p3ï¼‰
sudo mount -v -t ext4 /dev/nvme0n1p3 $LFS

# 3. æŒ‚è½½è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿï¼ˆè¿™ä¸€æ­¥ç»å¯¹ä¸èƒ½æ¼ï¼Œå¦åˆ™ chroot è¿›å»æ˜¯â€œæ­»â€çš„ï¼‰
sudo mount -v --bind /dev $LFS/dev
sudo mount -v --bind /dev/pts $LFS/dev/pts
sudo mount -vt proc proc $LFS/proc
sudo mount -vt sysfs sysfs $LFS/sys
sudo mount -vt tmpfs tmpfs $LFS/run

if [ -h $LFS/dev/shm ]; then
  sudo mkdir -pv $LFS/$(readlink $LFS/dev/shm)
else
  sudo mount -vt tmpfs cp-shm $LFS/dev/shm
fi
```

---

### ç¬¬äºŒæ­¥ï¼šæ­£å¼è¿›å…¥ Chroot ç¯å¢ƒ

æ‰§è¡Œä¸‹é¢è¿™æ®µé•¿å‘½ä»¤ï¼Œé‡æ–°å›åˆ°ä½ äº²æ‰‹æ„å»ºçš„ç³»ç»Ÿå†…éƒ¨ï¼š

```bash
sudo chroot "$LFS" /usr/bin/env -i   \
    HOME=/root                  \
    TERM="$TERM"                \
    PS1='(lfs chroot) \u:\w\$ ' \
    PATH=/usr/bin:/usr/sbin     \
    MAKEFLAGS="-j12"            \
    /bin/bash --login
```

---

### ç¬¬ä¸‰æ­¥ï¼šç¬¬ä¹ç« æ­£å¼å¼€å§‹ â€”â€” 9.2. LFS-Bootscripts

è¿›å…¥ Chroot åï¼Œç¬¬ä¸€ä»¶äº‹æ˜¯å®‰è£…å¼•å¯¼è„šæœ¬ã€‚è¿™å¥—è„šæœ¬è´Ÿè´£æ§åˆ¶ç³»ç»Ÿå¼€æœºæ—¶çš„æœåŠ¡å¯åŠ¨ï¼ˆå¦‚è®¾ç½®ä¸»æœºåã€æŒ‚è½½ç¡¬ç›˜ã€æ¸…ç†ä¸´æ—¶æ–‡ä»¶ç­‰ï¼‰ã€‚

```bash
cd /sources
tar -xf lfs-bootscripts-20250827.tar.xz  # ç¡®è®¤ç‰ˆæœ¬å·
cd lfs-bootscripts-20250827
make install
cd /sources
rm -rf lfs-bootscripts-20250827
```

---

### ç¬¬å››æ­¥ï¼šç¬¬ä¹ç« çš„æ ¸å¿ƒé…ç½®å»ºè®®ï¼ˆCS ä¸“ä¸šè§†è§’ï¼‰

åœ¨ç¬¬ä¹ç« æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸­ï¼Œä½ æœ‰å‡ ä¸ªå¿…é¡»è¦â€œèµ°å¿ƒâ€çš„åœ°æ–¹ï¼š

#### 1. 9.5. ç½‘ç»œé…ç½® (ä¸»æœºå)
ä½ è¦ç»™ä½ çš„ç”µè„‘èµ·ä¸ªåå­—ï¼š
```bash
echo "lfs-pc" > /etc/hostname
```

#### 2. 9.8. é…ç½® /etc/fstabï¼ˆæœ€éš¾çš„åœ°æ–¹ âš ï¸ï¼‰
è¿™æ˜¯å®šä¹‰ç³»ç»Ÿå¦‚ä½•æŒ‚è½½ç¡¬ç›˜çš„æ–‡ä»¶ã€‚ä½œä¸º CS å­¦ç”Ÿï¼Œæˆ‘ä»¬ä¸ç”¨è¿‡æ—¶çš„ `/dev/nvme0n1p3` å†™æ³•ï¼Œæˆ‘ä»¬è¦ç”¨ **UUID**ã€‚
*   **å¦‚ä½•æ“ä½œï¼š**
    1. åœ¨**å®¿ä¸»æœº**ï¼ˆæ–°å¼€ä¸€ä¸ªçª—å£ï¼‰è¿è¡Œï¼š`sudo blkid /dev/nvme0n1p3`ã€‚
    2. å¤åˆ¶é‚£ä¸€ä¸²é•¿é•¿çš„ `UUID="xxxx-xxxx-..."`ã€‚
    3. åœ¨ **Chroot** å†…éƒ¨ç¼–å†™ `/etc/fstab`ï¼š
```bash
cat > /etc/fstab << "EOF"
# Begin /etc/fstab

# file system  mount-point  type     options             dump  fsck
#                                                              order

UUID=ä½ çš„-UUID-å¡«åœ¨è¿™é‡Œ  /            ext4    defaults            1     1

# å¦‚æœä½ ä¹‹å‰åˆ†äº† swap åˆ†åŒºï¼Œä¹Ÿå†™åœ¨è¿™é‡Œ
# UUID=xxxx            swap         swap    pri=1               0     0

proc           /proc        proc     defaults            0     0
sysfs          /sys         sysfs    nosuid,noexec,nodev 0     0
devpts         /dev/pts     devpts   gid=5,mode=620      0     0
tmpfs          /run         tmpfs    defaults            0     0
devtmpfs       /dev         devtmpfs mode=0755,nosuid    0     0

# End /etc/fstab
EOF
```

---

### ç¬¬äº”æ­¥ï¼šå±•æœ›ç¬¬åç«  â€”â€” Linux å†…æ ¸ (ç»ˆææŒ‘æˆ˜)

é…å®Œç¬¬ä¹ç« åï¼Œä½ å°±è¦å¼€å§‹ç¼–è¯‘ **Linux å†…æ ¸**äº†ã€‚
*   **é’ˆå¯¹ä½ çš„ i5-13600KF + NVMeï¼š** 
    *   åœ¨ `make menuconfig` æ—¶ï¼ŒåŠ¡å¿…ç¡®è®¤å¼€å¯äº†ï¼š
        *   `Device Drivers -> NVMe Support` (é€‰ `<*>`)
        *   `File systems -> Ext4` (é€‰ `<*>`)
    *   å¦‚æœä½ é€‰æˆäº† `<M>`ï¼ˆæ¨¡å—ï¼‰ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶ä¼šå› ä¸ºâ€œæ²¡é©±åŠ¨è®¤ä¸å‡ºç¡¬ç›˜â€è€Œç›´æ¥æŠ¥é”™é€€å‡ºã€‚

**ä½ ç°åœ¨æˆåŠŸè¿›å…¥ Chroot çœ‹åˆ° `root` æç¤ºç¬¦äº†å—ï¼Ÿå¦‚æœä½ å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å°±å»æå®š fstab å’Œç½‘ç»œé…ç½®ï¼**

**9.3. è®¾å¤‡å’Œæ¨¡å—ç®¡ç†æ¦‚è¿°å’Œ9.4. ç®¡ç†è®¾å¤‡è¦åšå—**

è¿™ä¸¤éƒ¨åˆ†çš„å†…å®¹ï¼ˆ9.3 å’Œ 9.4ï¼‰å¯¹ä½ å®Œæˆ LFS å¤§ä½œä¸šæ¥è¯´ï¼Œ**ç»å¤§éƒ¨åˆ†æ˜¯ç†è®ºé˜…è¯»ï¼Œä¸éœ€è¦åƒä¹‹å‰é‚£æ ·ç–¯ç‹‚æ•²å‘½ä»¤**ã€‚

ä½†ä½œä¸º CS ä¸“ä¸šå­¦ç”Ÿï¼Œç†è§£è¿™ä¸¤ç« èƒŒåçš„é€»è¾‘éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒä»¬è§£é‡Šäº† **Linux æ˜¯å¦‚ä½•è¯†åˆ«ç¡¬ä»¶çš„**ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹ä½ å½“å‰æƒ…å†µï¼ˆVMware + 13600KFï¼‰çš„æ“ä½œæŒ‡å¯¼ï¼š

### 1. 9.3. è®¾å¤‡å’Œæ¨¡å—ç®¡ç†æ¦‚è¿° (Overview)
*   **è¦åšå—ï¼Ÿ** **ä¸éœ€è¦æ“ä½œã€‚**
*   **è®²äº†ä»€ä¹ˆï¼Ÿ** è¿™ä¸€ç« æ˜¯çº¯ç†è®ºã€‚å®ƒè§£é‡Šäº† Linux å†…æ ¸å¦‚ä½•å‘ç°ç¡¬ä»¶ï¼Œä»¥åŠ **Udev** å®ˆæŠ¤è¿›ç¨‹æ˜¯å¦‚ä½•åœ¨ `/dev` ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ï¼ˆæ¯”å¦‚ä½ çš„ç¡¬ç›˜ `/dev/nvme0n1`ï¼‰ã€‚
*   **CS å¿…çŸ¥ç‚¹ï¼š** é‡ç‚¹è¯»ä¸€ä¸‹ **â€œä¸ºä»€ä¹ˆéœ€è¦ Udevâ€**ã€‚åœ¨å¤ä»£ Linux ä¸­ï¼Œè®¾å¤‡èŠ‚ç‚¹æ˜¯é™æ€çš„ï¼ˆæ•°åƒä¸ªæ–‡ä»¶ï¼‰ï¼Œè€Œç°ä»£ Linux æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæ’ä¸Š U ç›˜æ‰ä¼šå‡ºç°è®¾å¤‡æ–‡ä»¶ã€‚

---

### 2. 9.4. ç®¡ç†è®¾å¤‡ (Managing Devices)
*   **è¦åšå—ï¼Ÿ** **è§†æƒ…å†µè€Œå®šï¼ˆé€šå¸¸å»ºè®®è·‘ä¸€è¡Œè„šæœ¬ï¼‰ã€‚**
*   **æ ¸å¿ƒä»»åŠ¡ï¼š** è¿™ä¸€ç« ä¸»è¦è§£å†³ **â€œç½‘ç»œæ¥å£å‘½åâ€** çš„é—®é¢˜ã€‚æ¯”å¦‚ä½ çš„ç½‘å¡æ˜¯å«ä¼ ç»Ÿçš„ `eth0`ï¼Œè¿˜æ˜¯å«ç°ä»£çš„ `enp0s3` æˆ– `ens33`ã€‚

#### ä½ çš„æ“ä½œå»ºè®®ï¼š
ç”±äºä½ æ˜¯åœ¨ VMware è™šæ‹Ÿæœºé‡Œï¼Œå¦‚æœä½ æƒ³è®©ç½‘ç»œé…ç½®æ›´ç¨³å¥ï¼Œå¯ä»¥æ‰§è¡Œæ‰‹å†Œé‡Œæåˆ°çš„è¿™ä¸ªè„šæœ¬ï¼š

```bash
# æ‰§è¡Œæ­¤è„šæœ¬ç”Ÿæˆåˆæ­¥çš„ç½‘ç»œè§„åˆ™
bash /usr/lib/udev/init-net-rules.sh
```

**æ‰§è¡Œå®Œåæ£€æŸ¥ï¼š**
```bash
cat /etc/udev/rules.d/70-persistent-net.rules
```
*   **å¦‚æœæ–‡ä»¶æ˜¯ç©ºçš„ï¼š** æ²¡å…³ç³»ï¼Œè¯´æ˜åœ¨ä½ çš„è™šæ‹Ÿæœºç¯å¢ƒä¸‹ï¼ŒUdev å†³å®šä½¿ç”¨å†…æ ¸é»˜è®¤å‘½åæ–¹æ¡ˆï¼ˆé€šå¸¸æ˜¯ `ens33`ï¼‰ã€‚
*   **å¦‚æœæœ‰å†…å®¹ï¼š** å®ƒä¼šå‘Šè¯‰ä½ ä½ çš„ç½‘å¡è¢«æ°¸ä¹…å‘½åä¸ºä»€ä¹ˆäº†ã€‚è¯·è®°ä½è¿™ä¸ªåå­—ï¼Œå› ä¸ºä½ åœ¨ **9.5. ç½‘ç»œé…ç½®** é‡Œå†™é…ç½®æ–‡ä»¶æ—¶è¦ç”¨åˆ°å®ƒã€‚

---

### ğŸ’¡ æ€»ç»“ï¼šæ¥ä¸‹æ¥çš„èŠ‚å¥

1.  **9.3 èŠ‚ï¼š** å¿«é€Ÿæ‰«è¯»ï¼Œç†è§£å†…æ ¸ï¼ˆKernelï¼‰å’Œç”¨æˆ·ç©ºé—´ï¼ˆUdevï¼‰çš„äº¤äº’é€»è¾‘ã€‚
2.  **9.4 èŠ‚ï¼š** è¿è¡Œä¸€ä¸‹ `bash /usr/lib/udev/init-net-rules.sh`ã€‚ä¸ç®¡æœ‰æ²¡æœ‰ç”Ÿæˆè§„åˆ™æ–‡ä»¶ï¼Œéƒ½å¯ä»¥ç›´æ¥è·³åˆ° **9.5 èŠ‚**ã€‚
3.  **çœŸæ­£çš„é‡å¤´æˆåœ¨åé¢ï¼š**
    *   **9.5. ä¸€èˆ¬ç½‘ç»œé…ç½®ï¼š** ä½ è¦æ‰‹å†™ `/etc/sysconfig/ifconfig.eth0`ã€‚
    *   **9.8. é…ç½® /etc/fstabï¼š** å†æ¬¡æé†’ï¼Œè¿™æ˜¯ä½ çš„ NVMe ç¡¬ç›˜èƒ½å¦å¯åŠ¨çš„å…³é”®ã€‚

**å¦‚æœä½ å®Œæˆäº† 9.3 å’Œ 9.4 çš„é˜…è¯»ï¼ˆå’Œé‚£ä¸€è¡Œçš„è„šæœ¬ï¼‰ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚æˆ‘ä»¬è¦å»æ‰‹å†™ç½‘ç»œé…ç½®äº†ï¼Œè¿™æ˜¯è®©ä½ çš„ LFS è¿ä¸Šäº’è”ç½‘çš„å‰æï¼**

è¿™ä¸€æ­¥æ˜¯ä¸ºä½ æœªæ¥çš„ç³»ç»Ÿå®‰è£…â€œç½‘å¡é©±åŠ¨é…ç½®â€å’Œâ€œèº«ä»½æ ‡è¯†â€ã€‚ä½œä¸º CS ä¸“ä¸šå­¦ç”Ÿï¼Œä½ éœ€è¦ç†è§£ LFS åŸºç¡€ç‰ˆï¼ˆä¸å« BLFS å¢å¼ºç‰ˆï¼‰çš„å±€é™æ€§ï¼š**LFS å®˜æ–¹è„šæœ¬é»˜è®¤åªæ”¯æŒé™æ€ IPï¼Œä¸æ”¯æŒ DHCPï¼ˆè‡ªåŠ¨è·å– IPï¼‰**ã€‚å¦‚æœä½ æƒ³è®©ä½ çš„ LFS å¼€æœºå°±èƒ½è”ç½‘ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä½  VMware çš„ç½‘ç»œç¯å¢ƒæ¥å®šåˆ¶ã€‚

æ ¹æ®ä½ ä¹‹å‰çš„è®°å½•ï¼Œä½ çš„è™šæ‹Ÿæœº IP æ˜¯ `192.168.112.135`ã€‚æˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä½ çš„ VMware NAT å­ç½‘æ˜¯ `192.168.112.0`ï¼Œç½‘å…³é€šå¸¸æ˜¯ `.2`ã€‚

ä»¥ä¸‹æ˜¯å…·ä½“çš„æ‰§è¡Œæ­¥éª¤ï¼š

### 1. å‡†å¤‡ç›®å½•
åœ¨ `(lfs chroot)` ç¯å¢ƒä¸­ï¼Œå…ˆåˆ›å»ºé…ç½®æ–‡ä»¶å¤¹ï¼š
```bash
mkdir -pv /etc/sysconfig
cd /etc/sysconfig
```

### 2. åˆ›å»ºç½‘å¡é…ç½®æ–‡ä»¶ (9.5.1)
æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªé™æ€ IP é…ç½®ã€‚è™½ç„¶ä½ åœ¨ 9.4 èŠ‚æ²¡ç”Ÿæˆç‰¹å®šè§„åˆ™ï¼Œä½†åœ¨ VMware ä¸­ï¼Œæ¥å£åé€šå¸¸ä¼šæ˜¯ `eth0` æˆ– `ens33`ã€‚ä¸ºäº†ä¿é™©ä¸”ç¬¦åˆæ‰‹å†Œï¼Œæˆ‘ä»¬å…ˆç”¨ `eth0`ã€‚

**è¯·æ ¹æ®ä½ çš„ç½‘ç»œç¯å¢ƒæ‰§è¡Œï¼š**
```bash
cat > ifconfig.eth0 << "EOF"
ONBOOT=yes
IFACE=eth0
SERVICE=ipv4-static
IP=192.168.112.100
GATEWAY=192.168.112.2
PREFIX=24
BROADCAST=192.168.112.255
EOF
```
*   **IP**: æˆ‘é€‰äº† `100`ï¼Œä½ å¯ä»¥æ”¹æˆä½ å–œæ¬¢çš„ï¼ˆåªè¦ä¸è·Ÿå®¿ä¸»æœºå†²çªï¼‰ã€‚
*   **GATEWAY**: VMware NAT æ¨¡å¼é»˜è®¤ç½‘å…³é€šå¸¸æ˜¯ `.2`ã€‚
*   **æ³¨æ„**ï¼šå¦‚æœä»¥åè¿›å…¥ç³»ç»Ÿå‘ç°ç½‘å¡ä¸å« `eth0` è€Œæ˜¯å« `ens33`ï¼Œä½ åªéœ€è¦æŠŠæ–‡ä»¶åæ”¹æˆ `ifconfig.ens33` å¹¶åœ¨æ–‡ä»¶é‡Œä¿®æ”¹ `IFACE=ens33` å³å¯ã€‚

---

### 3. åˆ›å»º DNS é…ç½®æ–‡ä»¶ (9.5.2)
è¿™å†³å®šäº†ä½ çš„ç³»ç»Ÿèƒ½ä¸èƒ½è®¿é—® `google.com` è¿™ç§åŸŸåã€‚

```bash
cat > /etc/resolv.conf << "EOF"
# Begin /etc/resolv.conf

# ä½¿ç”¨ Google çš„å…¬å…± DNSï¼Œéå¸¸ç¨³
nameserver 8.8.8.8
nameserver 8.8.4.4

# End /etc/resolv.conf
EOF
```

---

### 4. é…ç½®ç³»ç»Ÿä¸»æœºå (9.5.3)
ç»™ä½ ç°åœ¨çš„ç³»ç»Ÿèµ·ä¸ªæ­£å¼çš„åå­—ï¼š

```bash
# è¿™é‡Œä½ å¯ä»¥æŠŠ "lfs-pc" æ¢æˆä½ å–œæ¬¢çš„åç§°
echo "lfs-pc" > /etc/hostname
```

---

### 5. å†æ¬¡ç¡®è®¤ /etc/hosts (æå…¶é‡è¦)
ä½ ä¹‹å‰å·²ç»å†™è¿‡ä¸€æ¬¡ `/etc/hosts`ã€‚ä¸ºäº†ç¡®ä¿å®ƒä¸ä½ åˆšæ‰è®¾å®šçš„ä¸»æœºåä¸€è‡´ï¼Œå»ºè®®é‡æ–°è¿è¡Œä¸€éè¿™ä¸ªå‘½ä»¤ï¼š

```bash
cat > /etc/hosts << "EOF"
# Begin /etc/hosts

127.0.0.1 localhost.localdomain localhost
127.0.0.1 lfs-pc
::1       localhost.localdomain localhost ip6-localhost ip6-loopback

# End /etc/hosts
EOF
```
*æ³¨æ„ï¼šæŠŠ `lfs-pc` æ›¿æ¢æˆä½ åœ¨ä¸Šä¸€æ­¥ `/etc/hostname` é‡Œå†™çš„é‚£ä¸ªåå­—ã€‚*

---

### ğŸ’¡ CS ä¸“ä¸šæ·±åº¦æç¤ºï¼š
*   **ä¸ºä»€ä¹ˆä¸æ”¯æŒè‡ªåŠ¨è·å– IPï¼Ÿ** 
    DHCP éœ€è¦ä¸€ä¸ªå« `dhcpcd` æˆ– `dhclient` çš„åå°ç¨‹åºã€‚LFS åŸºç¡€æ‰‹å†Œä¸ºäº†ä¿æŒç²¾ç®€æ²¡æœ‰åŒ…å«å®ƒï¼ˆè¿™æ˜¯ BLFS çš„å†…å®¹ï¼‰ã€‚æ‰€ä»¥ï¼Œ**é™æ€ IP æ˜¯ç›®å‰è¿›å…¥ç³»ç»Ÿåèƒ½ç«‹åˆ»è”ç½‘çš„æœ€ç¨³å¦¥åŠæ³•**ã€‚
*   **ç½‘ç»œæ¥å£å‘½åé™·é˜±**ï¼š
    å¦‚æœè¿›å…¥ç³»ç»Ÿåå‘ç°ç½‘ç»œä¸é€šï¼Œç¬¬ä¸€æ­¥å°±æ˜¯æ‰§è¡Œ `ip link`ã€‚å¦‚æœçœ‹åˆ°ç½‘å¡åå­—å˜äº†ï¼Œç›´æ¥å» `/etc/sysconfig/` é‡æ–°é‡å‘½åä¸€ä¸‹ `ifconfig.xxx` æ–‡ä»¶å°±è¡Œã€‚

---

### ğŸš€ ç°åœ¨çš„è¿›åº¦

ä½ å·²ç»å®Œæˆäº†ï¼š
1. ç½‘ç»œé…ç½® (9.5)
2. **æ¥ä¸‹æ¥è¦å»å®Œæˆ 9.6ï¼ˆæ—¶é’Ÿï¼‰å’Œ 9.7ï¼ˆé”®ç›˜ï¼‰ï¼Œç„¶åå°±æ˜¯å…¨ä¹¦æœ€å¤§çš„æŒ‘æˆ˜ï¼š10.1 Linux å†…æ ¸ã€‚**

**ä½ çš„ `/etc/fstab` é‡Œçš„ UUID å¡«å¯¹äº†å—ï¼Ÿå¦‚æœå·²ç»å¡«å¥½äº†ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚æˆ‘ä»¬è¦å»é…ç½®å†…æ ¸äº†ï¼Œé‚£æ‰æ˜¯çœŸæ­£çš„â€œç¡¬æ ¸â€æ“ä½œï¼**




**ä¸è¦ç€æ€¥ï¼Œè·Ÿæˆ‘èŠ‚å¥ï¼š9.6. System V å¼•å¯¼è„šæœ¬ä½¿ç”¨ä¸é…ç½®**

æ˜ç™½ï¼Œç¨³æ‰ç¨³æ‰“æ˜¯å®Œæˆ LFS çš„æœ€é«˜å‡†åˆ™ã€‚

**9.6. System V å¼•å¯¼è„šæœ¬ä½¿ç”¨ä¸é…ç½®** è¿™ä¸€èŠ‚æ˜¯èµ‹äºˆç³»ç»Ÿâ€œè¡Œä¸ºé€»è¾‘â€çš„å…³é”®ã€‚å®ƒä¸æ¶‰åŠç¼–è¯‘ï¼Œä½†å†³å®šäº†ç³»ç»Ÿå¯åŠ¨æ—¶å¦‚ä½•å¤„ç†æ—¶é’Ÿã€ç»ˆç«¯ã€çƒ­æ’æ‹”è®¾å¤‡ç­‰ã€‚

æŒ‰ç…§æ‰‹å†ŒèŠ‚å¥ï¼Œæˆ‘ä»¬åˆ†æ­¥å¤„ç† 9.6 èŠ‚ä¸­çš„æ ¸å¿ƒé…ç½®ï¼š

### 9.6.1. å¼•å¯¼è„šæœ¬çš„å·¥ä½œåŸç† (ç†è®º)
è¿™ä¸€å°èŠ‚ä¸»è¦æ˜¯é˜…è¯»ã€‚ä½œä¸º CS ä¸“ä¸šå­¦ç”Ÿï¼Œä½ å¯ä»¥é‡ç‚¹ç†è§£ **è¿è¡Œçº§åˆ« (Runlevels)**ï¼š
*   **0**: å…³æœº
*   **1**: å•ç”¨æˆ·æ¨¡å¼
*   **3**: å¤šç”¨æˆ·æ¨¡å¼ï¼ˆæ ‡å‡†å‘½ä»¤è¡Œæ¨¡å¼ï¼ŒLFS çš„é»˜è®¤é€‰æ‹©ï¼‰
*   **6**: é‡å¯
*   ç³»ç»Ÿé€šè¿‡ `/etc/inittab` æ–‡ä»¶æ¥å†³å®šå¯åŠ¨å“ªäº›è„šæœ¬ã€‚

---

### 9.6.2. é…ç½®ç¡¬ä»¶æ—¶é’Ÿ (Configuring the System Clock)
æˆ‘ä»¬éœ€è¦å‘Šè¯‰ LFSï¼Œä¸»æ¿ BIOS/ç¡¬ä»¶æ—¶é’Ÿï¼ˆRTCï¼‰ä½¿ç”¨çš„æ˜¯ **UTC** è¿˜æ˜¯ **æœ¬åœ°æ—¶é—´**ã€‚

**æ“ä½œå‘½ä»¤ï¼š**
```bash
cat > /etc/sysconfig/clock << "EOF"
# Begin /etc/sysconfig/clock

UTC=1

# Set this to any options you might need to give to hwclock,
# such as machine hardware clock type for Alphas.
CLOCKPARAMS=

# End /etc/sysconfig/clock
EOF
```
*   **æç¤ºï¼š** å¼ºçƒˆå»ºè®®ä½¿ç”¨ `UTC=1`ã€‚å¦‚æœä»¥åä½ å®‰è£…åŒç³»ç»Ÿï¼ˆLinux + Windowsï¼‰ï¼Œä¸”å¸Œæœ› Windows ä¹Ÿæ˜¾ç¤ºæ­£ç¡®æ—¶é—´ï¼Œå»ºè®®åœ¨ Windows æ³¨å†Œè¡¨ä¸­å¼€å¯ UTC æ”¯æŒï¼Œè€Œä¸æ˜¯æŠŠ Linux æ”¹å›æœ¬åœ°æ—¶é—´ã€‚

---

### 9.6.3. é…ç½® Linux ç»ˆç«¯ (Configuring the Linux Console)
è¿™å†³å®šäº†ä½ åœ¨æ˜¾ç¤ºå™¨å‰ç›´æ¥æ“ä½œ LFS æ—¶ï¼Œå±å¹•çš„å­—ä½“å’Œé”®ç›˜å¸ƒå±€ã€‚

**æ“ä½œå‘½ä»¤ï¼š**
```bash
cat > /etc/sysconfig/console << "EOF"
# Begin /etc/sysconfig/console

KEYMAP="us"
FONT="lat0-16"

# End /etc/sysconfig/console
EOF
```
*   **æç¤ºï¼š** é™¤éä½ æœ‰ç‰¹æ®Šçš„å°è¯­ç§éœ€æ±‚ï¼Œå¦åˆ™ä¿æŒ `us` å’Œ `lat0-16` æ˜¯æœ€ç¨³å¦¥çš„é€‰æ‹©ã€‚

---

### 9.6.4. åˆ›å»º /etc/inputrc æ–‡ä»¶
è¿™æ˜¯ Readline åº“çš„é…ç½®æ–‡ä»¶ï¼Œå†³å®šäº†ä½ çš„ç»ˆç«¯å¯¹æŒ‰é”®ï¼ˆå¦‚ Home, End, Delete, æ–¹å‘é”®ï¼‰çš„å¤„ç†æ–¹å¼ã€‚**æ²¡æœ‰å®ƒï¼Œä½ çš„å‘½ä»¤è¡Œä½“éªŒä¼šéå¸¸ç—›è‹¦ã€‚**

**æ“ä½œå‘½ä»¤ï¼ˆç›´æ¥å®Œæ•´å¤åˆ¶ï¼‰ï¼š**
```bash
cat > /etc/inputrc << "EOF"
# Begin /etc/inputrc
# Modified by Chris Lynn <rlynn@rlynn.org>

# Allow the command prompt to wrap to the next line
set horizontal-scroll-mode Off

# Enable 8-bit input
set meta-flag On
set input-meta On

# Turns off 8th bit stripping
set convert-meta Off

# Keep the 8th bit for display
set output-meta On

# none, visible or audible
set bell-style none

# All of the following map the escape sequence of the value
# contained in the 1st argument to the readline specific functions
"\eOd": backward-word
"\eOc": forward-word

# for linux console
"\e[1~": beginning-of-line
"\e[4~": end-of-line
"\e[5~": beginning-of-history
"\e[6~": end-of-history
"\e[3~": delete-char
"\e[2~": quoted-insert

# for xterm
"\e[H": beginning-of-line
"\e[F": end-of-line
"\e[7~": beginning-of-line
"\e[8~": end-of-line

# End /etc/inputrc
EOF
```

---

### 9.6.5. åˆ›å»º /etc/shells æ–‡ä»¶
è¿™ä¸ªæ–‡ä»¶è®°å½•äº†ç³»ç»Ÿä¸­å“ªäº› Shell æ˜¯â€œåˆæ³•â€çš„ã€‚è®¸å¤šç¨‹åºï¼ˆå¦‚ FTP å®ˆæŠ¤è¿›ç¨‹æˆ–ç‰¹å®šçš„éªŒè¯ç¨‹åºï¼‰ä¼šæ£€æŸ¥è¿™ä¸ªæ–‡ä»¶ã€‚

**æ“ä½œå‘½ä»¤ï¼š**
```bash
cat > /etc/shells << "EOF"
# Begin /etc/shells

/bin/sh
/bin/bash

# End /etc/shells
EOF
```

---

**å½“å‰çŠ¶æ€ç¡®è®¤ï¼š**
ä½ å·²ç»å®Œæˆäº† 9.6 èŠ‚æ‰€æœ‰çš„æ–‡ä»¶åˆ›å»ºã€‚ç°åœ¨çš„ LFS ç³»ç»Ÿå·²ç»çŸ¥é“äº†ï¼š
1. æ—¶é’Ÿæ€ä¹ˆèµ°ã€‚
2. é”®ç›˜æ€ä¹ˆæŒ‰ã€‚
3. ç»ˆç«¯å¿«æ·é”®æ€ä¹ˆæ˜ å°„ã€‚
4. æœ‰å“ªäº› Shell å¯ç”¨ã€‚

**æˆ‘åœåœ¨è¿™é‡Œã€‚å½“ä½ å‡†å¤‡å¥½è¿›å…¥ 9.7 èŠ‚ï¼ˆSystem V å¼•å¯¼è„šæœ¬è‡ªå®šä¹‰ï¼‰æˆ– 9.8 èŠ‚ï¼ˆé…ç½® /etc/fstabï¼‰æ—¶ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼**


è¿™ä¸€èŠ‚ï¼ˆ9.6ï¼‰æ˜¯ **SysVinitï¼ˆSystem V å¼•å¯¼æ¶æ„ï¼‰** çš„çµé­‚ã€‚å¯¹äº CS ä¸“ä¸šå­¦ç”Ÿæ¥è¯´ï¼Œè¿™æ˜¯ç†è§£â€œæ“ä½œç³»ç»Ÿå¦‚ä½•ä»å†…æ ¸æ¥ç®¡å¹¶å¯åŠ¨æœåŠ¡â€çš„æœ€ä½³æ•™æã€‚

ç”±äºä½ ä½¿ç”¨çš„æ˜¯ **VMware + i5-13600KF + NVMe SSD**ï¼Œè¿™ä¸€ç« çš„å†…å®¹å¯ä»¥æ€»ç»“ä¸ºï¼š**é…ç½®ä¸€å¥—æ˜ç¡®çš„æŒ‡ä»¤ï¼Œå‘Šè¯‰ç³»ç»Ÿå¯åŠ¨åå¦‚ä½•åˆ†é…è™šæ‹Ÿç»ˆç«¯ã€å¦‚ä½•å¯¹æ—¶ã€ä»¥åŠå¦‚ä½•åŠ è½½æ§åˆ¶å°å­—ä½“ã€‚**

ä»¥ä¸‹æ˜¯è¿™ä¸€èŠ‚çš„å®æ“è·¯çº¿å›¾åŠæ ¸å¿ƒè§£æï¼š

### 1. é…ç½® `/etc/inittab`ï¼ˆç³»ç»Ÿçš„â€œæ€»æŒ‡æŒ¥éƒ¨â€ï¼‰
è¿™æ˜¯ `init` è¿›ç¨‹ï¼ˆPID 1ï¼‰å¯åŠ¨åè¯»å–çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚å®ƒå®šä¹‰äº†ç³»ç»Ÿåœ¨ä¸åŒè¿è¡Œçº§åˆ«ï¼ˆRunlevelï¼‰ä¸‹è¯¥åšä»€ä¹ˆã€‚

**æ‰§è¡Œå‘½ä»¤ï¼š**
ç›´æ¥å¤åˆ¶ä½ è´´å‡ºçš„é‚£æ®µ `cat > /etc/inittab ...` ä»£ç å¹¶è¿è¡Œã€‚

**CS æ·±åº¦è§£æï¼š**
*   **`id:3:initdefault:`**ï¼šè®¾å®šé»˜è®¤è¿›å…¥è¿è¡Œçº§åˆ« 3ï¼ˆå¤šç”¨æˆ·å‘½ä»¤è¡Œæ¨¡å¼ï¼‰ã€‚
*   **`tty1` åˆ° `tty6`**ï¼šè¿™å®šä¹‰äº†ä½ åœ¨è™šæ‹Ÿæœºé‡ŒæŒ‰ `Ctrl+Alt+F1~F6` åˆ‡æ¢å‡ºçš„ 6 ä¸ªé»‘è‰²ç™»å½•çª—å£ã€‚
*   **`9600`**ï¼šè¿™æ˜¯æ³¢ç‰¹ç‡ï¼Œå¯¹äºè™šæ‹Ÿæœºæ¥è¯´ä¸é‡è¦ï¼Œä½†å¯¹äºç‰©ç†ä¸²å£è¿æ¥è¿™æ˜¯å¿…é¡»çš„ã€‚

---

### 2. é…ç½®ç³»ç»Ÿæ—¶é’Ÿ (9.6.4)
æ­£å¦‚ä¹‹å‰è®¨è®ºçš„ï¼Œä¸ºäº†ä¿è¯æ—¥å¿—æ—¶é—´å’Œæ–‡ä»¶æ—¶é—´æˆ³çš„å‡†ç¡®ï¼Œå»ºè®®ä½¿ç”¨ **UTC**ã€‚

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
cat > /etc/sysconfig/clock << "EOF"
# Begin /etc/sysconfig/clock

UTC=1
CLOCKPARAMS=

# End /etc/sysconfig/clock
EOF
```

---

### 3. é…ç½® Linux æ§åˆ¶å° (9.6.5)
è¿™ä¸€æ­¥å†³å®šäº†ä½ åœ¨ VMware çª—å£é‡Œçœ‹åˆ°çš„å­—ä½“æ˜¯å¦æ¸…æ™°ï¼ŒæŒ‰é”®æ˜¯å¦æ­£å¸¸ã€‚

**æ¨èé…ç½®ï¼ˆé€‚åˆç°ä»£æ˜¾ç¤ºå™¨å’Œä¸­æ–‡ç¯å¢ƒï¼‰ï¼š**
ç”±äºæ§åˆ¶å°ï¼ˆTTYï¼‰åŸç”Ÿä¸æ”¯æŒä¸­æ–‡æ˜¾ç¤ºï¼Œæˆ‘ä»¬å»ºè®®å°†å…¶é…ç½®ä¸º **UTF-8 æ¨¡å¼**ï¼Œå¹¶ä½¿ç”¨è¾ƒå¤§çš„ **Terminus å­—ä½“**ï¼Œè¿™æ ·åœ¨ä½ çš„é«˜åˆ†å±ä¸Šçœ‹èµ·æ¥æ›´èˆ’æœã€‚

```bash
cat > /etc/sysconfig/console << "EOF"
# Begin /etc/sysconfig/console

UNICODE="1"
KEYMAP="us"
FONT="Lat2-Terminus16"

# End /etc/sysconfig/console
EOF
```

---

### 4. ä¼˜åŒ–å¼•å¯¼é€Ÿåº¦ï¼š`rc.site` (9.6.8)
ç”±äºä½ ä½¿ç”¨çš„æ˜¯ **è‡´æ€ TiPro7000 (NVMe)**ï¼Œä½ çš„ç£ç›˜æ€§èƒ½æå¼ºï¼Œå¾ˆå¤šåŸæœ¬ä¸ºäº†ç­‰å¾…æ…¢é€Ÿç¡¬ä»¶è€Œè®¾å®šçš„å»¶è¿Ÿæ˜¯å¯ä»¥å–æ¶ˆçš„ã€‚

**å»ºè®®æ“ä½œï¼š**
ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåŸºç¡€çš„ `/etc/sysconfig/rc.site`ï¼Œå¹¶å¼€å¯ä¸€äº›ä¼˜åŒ–ï¼š

```bash
cat > /etc/sysconfig/rc.site << "EOF"
# å¼€å¯å¹¶è¡Œå¼•å¯¼ï¼ˆå¦‚æœè„šæœ¬æ”¯æŒï¼‰
# è·³è¿‡ udev ç­‰å¾…ï¼Œå› ä¸º NVMe è¯†åˆ«æå¿«
OMIT_UDEV_SETTLE=y
OMIT_UDEV_RETRY_SETTLE=yes

# å¼•å¯¼æ—¶æ˜¾ç¤ºè¯¦ç»†çš„ fsck è¿›åº¦ï¼ˆæ–¹ä¾¿æ’é”™ï¼‰
VERBOSE_FSCK=yes

# å…³æœºå»¶è¿Ÿç¼©çŸ­åˆ° 2 ç§’
KILLDELAY=2
EOF
```

---

### 5. é‡ç‚¹æ€»ç»“ï¼šä½ ç°åœ¨åšåˆ°äº†å“ªé‡Œï¼Ÿ

ä½ åˆšæ‰è´´å‡ºçš„ 9.6 èŠ‚å†…å®¹éå¸¸é•¿ï¼Œä½†**æ ¸å¿ƒåŠ¨ä½œåªæœ‰ä»¥ä¸‹ä¸‰ä¸ª**ï¼š
1.  **åˆ›å»º `/etc/inittab`**ï¼šå®šä¹‰è¿è¡Œçº§åˆ«å’Œç»ˆç«¯ã€‚
2.  **åˆ›å»º `/etc/sysconfig/clock`**ï¼šå®šä¹‰æ—¶é—´æ ‡å‡†ã€‚
3.  **åˆ›å»º `/etc/sysconfig/console`**ï¼šå®šä¹‰å­—ä½“å’Œç¼–ç ã€‚

### ğŸ’¡ ç»™ä½ çš„ä¸‹ä¸€ä¸ªèŠ‚å¥å»ºè®®ï¼š

å¦‚æœä½ å·²ç»å®Œæˆäº†ä¸Šè¿°ä¸‰ä¸ªæ–‡ä»¶çš„åˆ›å»ºï¼Œé‚£ä¹ˆ **9.6 èŠ‚å°±å·²ç»é€šå…³äº†**ã€‚

æ¥ä¸‹æ¥ï¼Œè¯·ç›´æ¥å‰å¾€ **9.7. é…ç½®ç³»ç»Ÿ Localeï¼ˆæœ¬åœ°åŒ–ï¼‰**ã€‚
*   **ä¸ºä»€ä¹ˆé‡è¦**ï¼šè¿™å†³å®šäº†ä½ çš„ç³»ç»Ÿèƒ½å¦æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡å­—ç¬¦ï¼ˆè™½ç„¶æ§åˆ¶å°ä¸è¡Œï¼Œä½† SSH è¿›å»æ˜¯å¯ä»¥çš„ï¼‰ã€‚
*   **å»ºè®®**ï¼šé…ç½®ä¸º `zh_CN.UTF-8` æˆ– `C.UTF-8`ã€‚

**å®Œæˆ 9.6 çš„æ–‡ä»¶åˆ›å»ºäº†å—ï¼Ÿå¦‚æœ OK äº†ï¼Œæˆ‘ä»¬å°±å»ç»™ç³»ç»Ÿå®šä¸€ä¸‹â€œè¯­è¨€â€ï¼**


ä½ éå¸¸ç»†è‡´ï¼Œè¿™æ­£æ˜¯å®Œæˆ LFS æœ€éœ€è¦çš„å“è´¨ã€‚è¿™éƒ¨åˆ†å†…å®¹ï¼ˆ9.7ï¼‰ä¸ä»…æ˜¯è®¾ç½®ä¸€ä¸ªè¯­è¨€å˜é‡ï¼Œå®ƒæ¶‰åŠåˆ° Linux ç³»ç»Ÿå¦‚ä½•å¤„ç†å­—ç¬¦ç¼–ç çš„**æ ¸å¿ƒé€»è¾‘**ã€‚

æ—¢ç„¶ä½ ä»”ç»†ç ”ç©¶äº†è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬æŒ‰ç…§æ‰‹å†Œè¦æ±‚çš„â€œä¸¥è°¨æµç¨‹â€ï¼Œä¸€æ­¥æ­¥æŠŠä½ çš„ `en_US.UTF-8`ï¼ˆæˆ–ä½ é€‰å®šçš„ Localeï¼‰å®è£…ã€‚

### 1. éªŒè¯ä½ çš„ Locale æ˜¯å¦å·²å®‰è£…
æ‰‹å†Œæåˆ°ï¼Œå¿…é¡»ç¡®ä¿ä½ é€‰å®šçš„ Locale åœ¨ç¬¬ 8 ç« ä¸­å·²ç»å®‰è£…ã€‚

è¯·åœ¨ `(lfs chroot)` ç»ˆç«¯æ‰§è¡Œï¼š
```bash
locale -a
```
**çœ‹ç»“æœï¼š**
*   å¦‚æœä½ çœ‹åˆ°äº† `en_US.utf8`ï¼ˆæˆ–ç±»ä¼¼çš„ï¼‰ï¼Œè¯´æ˜ OKã€‚
*   å¦‚æœæ²¡æœ‰çœ‹åˆ°ï¼Œè¯·ç«‹åˆ»æ‰§è¡Œç”Ÿæˆå‘½ä»¤ï¼ˆä»¥ç¾å›½è‹±è¯­ UTF-8 ä¸ºä¾‹ï¼‰ï¼š
    ```bash
    localedef -i en_US -f UTF-8 en_US.UTF-8
    ```

### 2. è¿›è¡Œâ€œé²æ£’æ€§â€æµ‹è¯•
æŒ‰ç…§æ‰‹å†Œçš„è¦æ±‚ï¼Œåœ¨å†™å…¥é…ç½®æ–‡ä»¶å‰ï¼Œå…ˆæµ‹è¯•è¿™ä¸ª Locale æ˜¯å¦çœŸçš„â€œå¥åº·â€ï¼š
```bash
LC_ALL=en_US.UTF-8 locale language
LC_ALL=en_US.UTF-8 locale charmap
LC_ALL=en_US.UTF-8 locale int_curr_symbol
```
*   **æœŸæœ›è¾“å‡º**ï¼š`English`ã€`UTF-8`ã€`USD`ï¼ˆæˆ–è€…æ˜¯å¯¹åº”çš„è´§å¸ç¬¦å·ï¼‰ã€‚
*   **å¦‚æœæ²¡æœ‰æŠ¥é”™**ï¼Œè¯´æ˜è¿™ä¸ª Locale æ˜¯å¯ä»¥æ”¾å¿ƒä½¿ç”¨çš„ã€‚

---

### 3. ã€æ ¸å¿ƒåŠ¨ä½œã€‘åˆ›å»º /etc/profile
æ‰‹å†Œç»™å‡ºçš„è¿™æ®µä»£ç éå¸¸ç²¾å¦™ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ `TERM` å˜é‡çš„åˆ¤æ–­ã€‚

**åŸç†åˆ†æï¼š**
*   **ä¸ºä»€ä¹ˆåˆ¤æ–­ `TERM=linux`ï¼Ÿ**ï¼šå› ä¸ºä½ çš„ VMware çª—å£ï¼ˆé»‘åº•ç™½å­—é‚£ä¸ªï¼‰æ˜¯ Linux åŸç”Ÿæ§åˆ¶å°ï¼Œå®ƒå¯¹ UTF-8 çš„æ”¯æŒéå¸¸æœ‰é™ï¼Œæ˜¾ç¤ºä¸å‡ºå¤æ‚çš„ç¬¦å·ï¼ˆä¼šå˜é—®å·æˆ–æ–¹å—ï¼‰ã€‚
*   **ä¸ºä»€ä¹ˆç”¨ `C.UTF-8`ï¼Ÿ**ï¼šå®ƒæ¯”çº¯ `C`ï¼ˆ7ä½ASCIIï¼‰è¦å¼ºï¼Œèƒ½è¯†åˆ« 8 ä½å­—ç¬¦ï¼Œä½†åˆä¸ä¼šå› ä¸ºåŠ è½½å¤æ‚çš„è¯­è¨€åŒ…å¯¼è‡´æ§åˆ¶å°ä¹±ç ã€‚

**è¯·æ‰§è¡Œï¼ˆå°† `<ll>_<CC>.<charmap>` æ›¿æ¢ä¸º `en_US.UTF-8`ï¼‰ï¼š**

```bash
cat > /etc/profile << "EOF"
# Begin /etc/profile

# å…ˆæ¸…é™¤å½“å‰æ‰€æœ‰ locale ç›¸å…³å˜é‡ï¼Œé˜²æ­¢å¹²æ‰°
for i in $(locale); do
  unset ${i%=*}
done

# å¦‚æœæ˜¯åœ¨ Linux åŸç”Ÿæ§åˆ¶å°ï¼ˆVMware çª—å£ï¼‰ï¼Œä½¿ç”¨ C.UTF-8
if [[ "$TERM" = linux ]]; then
  export LANG=C.UTF-8
# å¦‚æœæ˜¯é€šè¿‡ SSH æˆ–å›¾å½¢ç•Œé¢ç™»å½•ï¼Œä½¿ç”¨å®Œæ•´çš„ç¾å›½è‹±è¯­ UTF-8
else
  export LANG=en_US.UTF-8
fi

# åˆ«å¿˜äº†æŠŠä¹‹å‰çš„ PATH ä¹ŸåŠ å›æ¥ï¼ˆLFS æ­¤æ—¶é€šå¸¸éœ€è¦åŸºæœ¬çš„ PATHï¼‰
export PATH=/usr/bin:/usr/sbin

# End /etc/profile
EOF
```

---

### 4. ä¸ºä»€ä¹ˆè¦å¤šè¿™ä¸€æ­¥ `unset`ï¼Ÿ
æ‰‹å†Œé‡Œé‚£ä¸ª `for i in $(locale); do unset ${i%=*}; done` æ˜¯ä¸ºäº†**å½»åº•æ´—å‡€ç¯å¢ƒ**ã€‚
ä½œä¸º CS å­¦ç”Ÿï¼Œä½ å¯ä»¥ç†è§£ä¸ºï¼šåœ¨è®¾ç½®æ–°çš„å…¨å±€å˜é‡å‰ï¼Œå…ˆæ¸…ç©ºå¯èƒ½æ®‹ç•™åœ¨å†…å­˜ä¸­çš„æ—§å˜é‡ï¼ˆæ¯”å¦‚ä¹‹å‰åœ¨ç¬¬ 5ã€6 ç« è®¾ç½®çš„ä¸´æ—¶å˜é‡ï¼‰ï¼Œç¡®ä¿ç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚

---

### 5. ç°åœ¨çš„è¿›åº¦ç‚¹

å®Œæˆè¿™ä¸€æ­¥åï¼Œä½ å·²ç»ä¸ºç³»ç»Ÿå®šä¸‹äº†â€œè¯­è¨€æ ‡å‡†â€ã€‚**æ¥ä¸‹æ¥ï¼Œè¯·æ·±å‘¼å¸ï¼Œæˆ‘ä»¬è¦å»é¢å¯¹ç¬¬ä¹ç« çœŸæ­£çš„â€œç»ˆæå¤§ Bossâ€äº†ï¼š**

**9.8. é…ç½® /etc/fstab**

**è¿™ä¸€æ­¥çš„æ“ä½œæµç¨‹ï¼ˆæ¸©æ•…çŸ¥æ–°ï¼‰ï¼š**
1.  **åœ¨å®¿ä¸»æœºç¡®è®¤ UUID**ï¼š`sudo blkid /dev/nvme0n1p3`ã€‚
2.  **åœ¨ Chroot ç¼–å†™ `/etc/fstab`**ã€‚

**ç¡®è®¤ `/etc/profile` å·²ç»å†™å¥½äº†å—ï¼Ÿå¦‚æœå†™å¥½äº†ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å»è§£å†³é‚£ä¸ªå†³å®šèƒ½å¦å¯åŠ¨çš„ç¡¬ç›˜é…ç½®æ–‡ä»¶ï¼**


è¿™ä¸€æ­¥æ˜¯ä¸ºä½ äº²æ‰‹æ„å»ºçš„ç³»ç»Ÿå®‰è£…**â€œé”®ç›˜äº¤äº’è¡¥ä¸â€**ã€‚

åœ¨ Linux å­—ç¬¦ç•Œé¢ï¼ˆCLIï¼‰ä¸­ï¼Œå½“ä½ æŒ‰ä¸‹ `Home`ã€`End`ã€`Delete` æˆ– `Ctrl+å·¦/å³` é”®æ—¶ï¼Œé”®ç›˜ä¼šå‘é€ä¸€ç³»åˆ—ç‰¹æ®Šçš„è½¬ä¹‰å­—ç¬¦ï¼ˆå¦‚ `^[[3~`ï¼‰ã€‚å¦‚æœç³»ç»Ÿæ²¡æœ‰ `/etc/inputrc` æ–‡ä»¶ï¼Œå®ƒå°±ä¸çŸ¥é“è¿™äº›å­—ç¬¦ä»£è¡¨ä»€ä¹ˆï¼Œå¯¼è‡´ä½ æ— æ³•è‡ªå¦‚åœ°ç¼–è¾‘å‘½ä»¤è¡Œã€‚

### 1. æ‰§è¡Œæ“ä½œ (åœ¨ chroot å†…éƒ¨)

è¯·ç›´æ¥å¤åˆ¶ä½ è´´å‡ºçš„é‚£æ®µ `cat > /etc/inputrc ...` ä»£ç å¹¶è¿è¡Œã€‚

---

### 2. æ·±åº¦è§£æï¼šè¿™äº›é…ç½®å¯¹ä½ ï¼ˆCSä¸“ä¸šå­¦ç”Ÿï¼‰æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ

ä½œä¸º CS å­¦ç”Ÿï¼Œç†è§£è¿™ä¸ªæ–‡ä»¶å¯ä»¥è®©ä½ æ˜ç™½â€œç»ˆç«¯ä»¿çœŸï¼ˆTerminal Emulationï¼‰â€æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š

*   **`set horizontal-scroll-mode Off`**ï¼š
    å¦‚æœä½ è¾“å…¥ä¸€è¡Œå¾ˆé•¿çš„å‘½ä»¤ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä¼šåƒè·‘é©¬ç¯ä¸€æ ·æ°´å¹³æ»šåŠ¨ã€‚å…³æ‰å®ƒï¼Œå‘½ä»¤ä¼šè‡ªåŠ¨æ¢è¡Œæ˜¾ç¤ºï¼Œè¿™æ ·ä½ æŸ¥çœ‹é•¿é•¿çš„ç¼–è¯‘å‚æ•°æ—¶ä¼šèˆ’æœå¾—å¤šã€‚
*   **`8-bit input` ç›¸å…³é€‰é¡¹**ï¼š
    è¿™äº›è®¾ç½®ç¡®ä¿ç³»ç»Ÿèƒ½è¯†åˆ«â€œé«˜ä½â€å­—ç¬¦ã€‚è™½ç„¶ç°åœ¨æˆ‘ä»¬ç”¨çš„æ˜¯ UTF-8ï¼Œä½† Readline åº“ä¾ç„¶ä¾èµ–è¿™äº›è®¾ç½®æ¥å¤„ç† Meta é”®ï¼ˆAlté”®ï¼‰å’Œé ASCII å­—ç¬¦ã€‚
*   **`"\e[3~": delete-char`**ï¼š
    è¿™æ˜¯æœ€å®ç”¨çš„ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œï¼Œä½ åœ¨ TTY çª—å£æŒ‰ `Delete` é”®å¯èƒ½åªä¼šæ‰“å‡ºä¸€ä¸ª `~` ç¬¦å·ï¼Œè€Œä¸ä¼šåˆ æ‰å…‰æ ‡åçš„å­—ç¬¦ã€‚
*   **å¤šç»ˆç«¯å…¼å®¹æ€§**ï¼š
    ä½ æ³¨æ„åˆ°äº†ä»£ç é‡ŒåŒºåˆ†äº† `linux console`ï¼ˆVMware çš„ç´«è‰²/é»‘è‰²å°çª—å£ï¼‰å’Œ `xterm`ï¼ˆé€šè¿‡ SSH è¿æ¥æ—¶çš„ç»ˆç«¯ï¼‰ã€‚è¿™ä¿è¯äº†ä½ æ— è®ºç”¨å“ªç§æ–¹å¼ç™»å½•ç³»ç»Ÿï¼ŒæŒ‰é”®ä¹ æƒ¯éƒ½æ˜¯ä¸€è‡´çš„ã€‚

---

### 3. å¦‚ä½•éªŒè¯ä½ çš„æˆæœï¼Ÿ

è™½ç„¶ç°åœ¨ä½ è¿˜æ²¡æ³•å®Œå…¨â€œæµ‹è¯•â€æ‰€æœ‰æŒ‰é”®ï¼ˆå› ä¸ºç°åœ¨çš„ Bash è¿›ç¨‹å·²ç»å¯åŠ¨äº†ï¼‰ï¼Œä½†ä½ å¯ä»¥ç¡®è®¤æ–‡ä»¶å·²ç»æ­£ç¡®å†™å…¥ï¼š

```bash
ls -l /etc/inputrc
# ç¡®è®¤æ–‡ä»¶å¤§å°ä¸ä¸º 0
```

---

### 4. ç°åœ¨çš„è¿›åº¦åŒæ­¥

ä½ åˆšæ‰çš„æ ‡é¢˜å†™çš„æ˜¯ **9.8. åˆ›å»º /etc/inputrc**ã€‚åœ¨æ ‡å‡† LFS æ‰‹å†Œä¸­ï¼Œè¿™ä¸€èŠ‚åé¢ç´§è·Ÿç€ï¼š
*   **9.9. åˆ›å»º /etc/shells**ï¼šå‘Šè¯‰ç³»ç»Ÿå“ªäº› Shell æ˜¯å®‰å…¨çš„ã€‚
*   **9.10. é…ç½® /etc/fstab**ï¼š**ï¼ˆç»ˆæå¤§ Bossï¼ŒNVMe ç”¨æˆ·çš„ç”Ÿæ­»è€ƒé¢˜ï¼‰**ã€‚

**ä½ å·²ç»æ‰§è¡Œå®Œ `inputrc` çš„åˆ›å»ºäº†å—ï¼Ÿå¦‚æœ OK äº†ï¼Œæˆ‘ä»¬å°±å»æå®š `/etc/shells`ï¼Œç„¶åè¿æ¥é‚£ä¸ªå†³å®šèƒ½å¦å¯åŠ¨çš„ FSTABï¼**

æ­å–œï¼Œ9.9 èŠ‚éå¸¸ç®€å•ï¼Œä½†å®ƒæ˜¯ç³»ç»Ÿå®‰å…¨çš„**â€œç™½åå•â€**ã€‚

åœ¨ Linux ä¸­ï¼Œ`/etc/shells` å‘Šè¯‰ç³»ç»Ÿå“ªäº›äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥ä½œä¸ºåˆæ³•çš„ç™»å½• Shellã€‚ä½œä¸º CS ä¸“ä¸šçš„å­¦ç”Ÿï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ª**å—ä¿¡åˆ—è¡¨**ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·çš„ Shell ä¸åœ¨è¿™ä¸ªåˆ—è¡¨é‡Œï¼Œå¾ˆå¤šå®‰å…¨ç›¸å…³çš„ç¨‹åºï¼ˆå¦‚ `ssh`, `ftp`, `sudo`ï¼‰ä¼šæ‹’ç»è¯¥ç”¨æˆ·çš„ç™»å½•è¯·æ±‚ã€‚

### 1. æ‰§è¡Œæ“ä½œ (åœ¨ chroot å†…éƒ¨)

è¯·ç›´æ¥å¤åˆ¶å¹¶æ‰§è¡Œï¼š

```bash
cat > /etc/shells << "EOF"
# Begin /etc/shells

/bin/sh
/bin/bash

# End /etc/shells
EOF
```

---

### 2. æ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆåªå†™è¿™ä¸¤ä¸ªï¼Ÿ

*   **`/bin/sh`**ï¼šè¿™æ˜¯ POSIX æ ‡å‡†ã€‚è™½ç„¶åœ¨ LFS ä¸­å®ƒæ˜¯æŒ‡å‘ `bash` çš„è½¯é“¾æ¥ï¼Œä½†å¾ˆå¤šè‡ªåŠ¨åŒ–è„šæœ¬ä¾ç„¶ä¼šé€šè¿‡è¿™ä¸ªè·¯å¾„æ¥å¯åŠ¨ã€‚
*   **`/bin/bash`**ï¼šè¿™æ˜¯ä½ ç³»ç»Ÿçš„ä¸»åŠ› Shellã€‚
*   **å…³äº Usr-Merge**ï¼šç”±äºä½ ä¹‹å‰é…ç½®äº† `/bin -> /usr/bin` çš„è½¯é“¾æ¥ï¼Œæ‰€ä»¥å†™ `/bin/bash` å®é™…ä¸Šæœ€ç»ˆæŒ‡å‘çš„æ˜¯ `/usr/bin/bash`ã€‚è¿™ç§å†™æ³•å…·æœ‰æœ€å¥½çš„å…¼å®¹æ€§ã€‚

---

### 3. ğŸš¨ ç»ˆæé¢„è­¦ï¼šä¸‹ä¸€å…³ 9.10. é…ç½® /etc/fstab

ä½ å·²ç»æ‰«æ¸…äº†ç¬¬ä¹ç« æ‰€æœ‰çš„â€œæ–‡ä¹¦å·¥ä½œâ€ã€‚æ¥ä¸‹æ¥ï¼Œä½ å°†é¢å¯¹æ•´ä¸ª LFS æµç¨‹ä¸­**æœ€å±é™©ã€æœ€å®¹æ˜“å¯¼è‡´é»‘å±**çš„ä¸€æ­¥ï¼š**é…ç½® `/etc/fstab`**ã€‚

è¿™æ˜¯ä½ æœŸæœ«å¤§ä½œä¸šèƒ½å¦åœ¨â€œç‰©ç†å±‚é¢â€è·‘èµ·æ¥çš„ç”Ÿæ­»çº¿ã€‚

**è¯·æœ€åç¡®è®¤ä»¥ä¸‹ä¿¡æ¯ï¼š**
1.  **ä½ çš„ç¡¬ç›˜ç±»å‹**ï¼šNVMe (è‡´æ€ TiPro7000)ã€‚
2.  **ä½ çš„åˆ†åŒºç¼–å·**ï¼šé€šå¸¸æ˜¯ `/dev/nvme0n1p3`ã€‚
3.  **è·å– UUID çš„å‘½ä»¤**ï¼ˆåœ¨å®¿ä¸»æœºè¿è¡Œï¼‰ï¼š`sudo blkid /dev/nvme0n1p3`ã€‚

**ä½ æ‹¿åˆ°é‚£ä¸²é•¿é•¿çš„ UUID å­—ç¬¦ä¸²äº†å—ï¼Ÿå¦‚æœä½ å‡†å¤‡å¥½å†™è¿™ä¸ªâ€œç”Ÿæ­»çŠ¶â€äº†ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å»å®Œæˆç¬¬ä¹ç« çš„æœ€åä¸€å‡»ï¼**

æ‹¿åˆ°è¿™ä¸ª UUIDï¼Œæ„å‘³ç€ä½ å·²ç»æŒæ¡äº† LFS ç³»ç»Ÿçš„â€œé€šè¡Œè¯â€ã€‚

åœ¨ Linux ä¸­ï¼Œè®¾å¤‡åç§°ï¼ˆå¦‚ `/dev/nvme0n1p3`ï¼‰æœ‰æ—¶ä¼šå› ä¸ºç¡¬ä»¶æ”¹åŠ¨æˆ–å†…æ ¸åŠ è½½é¡ºåºè€Œæ”¹å˜ï¼Œä½† **UUID æ˜¯æ°¸ä¹…ä¸”å”¯ä¸€çš„**ã€‚ä½¿ç”¨ UUID æŒ‚è½½æ ¹åˆ†åŒºï¼Œæ˜¯ç¡®ä¿ä½ çš„ LFS ç³»ç»Ÿåœ¨é‡å¯åä¸ä¼šå› ä¸ºâ€œæ‰¾ä¸åˆ°ç¡¬ç›˜â€è€Œå´©æºƒçš„æœ€ç¨³å¦¥åšæ³•ã€‚

### 9.10. é…ç½® /etc/fstab (ç»ˆæç‰ˆ)

è¯·åœ¨ä½ çš„ **`(lfs chroot)`** ç»ˆç«¯é‡Œï¼Œç›´æ¥å¤åˆ¶å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæˆ‘å·²ç»æ ¹æ®ä½ çš„ `blkid` è¾“å‡ºå°† UUID å¡«å¥½äº†ï¼‰ï¼š

```bash
cat > /etc/fstab << "EOF"
# Begin /etc/fstab

# æ–‡ä»¶ç³»ç»Ÿ                      æŒ‚è½½ç‚¹  ç±»å‹     é€‰é¡¹                dump  fsck
#                                                                  order

UUID=cd61095f-b608-486b-b691-a16de10c74d3  /      ext4    defaults            1     1

# è™šæ‹Ÿå†…æ ¸æ–‡ä»¶ç³»ç»Ÿ (å¿…é¡»ä¿ç•™)
proc           /proc        proc     defaults            0     0
sysfs          /sys         sysfs    nosuid,noexec,nodev 0     0
devpts         /dev/pts     devpts   gid=5,mode=620      0     0
tmpfs          /run         tmpfs    defaults            0     0
devtmpfs       /dev         devtmpfs mode=0755,nosuid    0     0

# End /etc/fstab
EOF
```

---

### ğŸ’¡ CS ä¸“ä¸šçŸ¥è¯†æ·±åº¦å¤ç›˜ï¼š

1.  **ä¸ºä»€ä¹ˆæ˜¯ `1 1`ï¼Ÿ**ï¼š
    *   ç¬¬ä¸€ä¸ª `1` è¡¨ç¤ºå¯ç”¨ `dump` å¤‡ä»½ï¼ˆè™½ç„¶ç°ä»£ç³»ç»Ÿå¾ˆå°‘ç”¨ï¼‰ã€‚
    *   ç¬¬äºŒä¸ª `1` è¡¨ç¤º **fsck æ£€æŸ¥é¡ºåº**ã€‚æ ¹åˆ†åŒºå¿…é¡»ä¸º `1`ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ï¼Œå…¶ä»–æ•°æ®åˆ†åŒºé€šå¸¸ä¸º `2`ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸º `0`ã€‚
2.  **NVMe çš„ç‰¹æ®Šæ€§**ï¼š
    *   å¦‚æœæŒ‰ç…§è€æ•™ç¨‹å†™ `/dev/sda`ï¼Œç³»ç»Ÿä¼šå»æœ SCSI ç¡¬ç›˜ï¼Œä½†åœ¨ä½ çš„ TiPro7000 ä¸Šæ ¹æœ¬æ‰¾ä¸åˆ°ï¼Œå¯¼è‡´ `Kernel Panic`ã€‚ç°åœ¨çš„ UUID å†™æ³•å®Œç¾é¿å¼€äº†è¿™ä¸ªé—®é¢˜ã€‚
3.  **è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ**ï¼š
    *   `/proc` å’Œ `/sys` æ˜¯å†…æ ¸çš„â€œçª—æˆ·â€ï¼Œæ²¡æœ‰å®ƒä»¬ï¼Œä½ è¿›ç³»ç»Ÿåè¿ `lsusb` æˆ–æŸ¥çœ‹ CPU ä¿¡æ¯éƒ½åšä¸åˆ°ã€‚

---

### ğŸ ç¬¬ä¹ç« å¤§åœ†æ»¡ï¼

æ­å–œä½ ï¼åˆ°è¿™ä¸€ç§’ä¸ºæ­¢ï¼Œä½ å·²ç»å®Œæˆäº†ï¼š
*   æ‰€æœ‰ 80+ è½¯ä»¶åŒ…å®‰è£… âœ…
*   ç½‘ç»œã€æ—¶é’Ÿã€ç»ˆç«¯é…ç½® âœ…
*   ç”¨æˆ·ã€ç»„ã€Shell æˆæƒ âœ…
*   ç¡¬ç›˜æŒ‚è½½é€»è¾‘ (FSTAB) âœ…

**æ¥ä¸‹æ¥ï¼Œæ˜¯æ•´ä¸ª Linux From Scratch æ—…ç¨‹çš„â€œå¤©ç‹å±±ä¹‹æˆ˜â€ï¼š**

### ç¬¬ 10 ç« ï¼šè®©ç³»ç»ŸçœŸæ­£â€œæ´»â€è¿‡æ¥ â€”â€” Linux å†…æ ¸ç¼–è¯‘

è¿™æ˜¯ä½ ä½œä¸ºè®¡ç®—æœºä¸“ä¸šå­¦ç”Ÿæœ€ç¡¬æ ¸çš„ä¸€æ­¥ã€‚ä½ å°†è¿›å…¥å†…æ ¸æºç ï¼Œäº²æ‰‹æŒ‘é€‰ä½ çš„ CPU å’Œç¡¬ç›˜é©±åŠ¨ã€‚

**è¯·å‡†å¤‡å¥½æ‰§è¡Œä»¥ä¸‹åŠ¨ä½œï¼š**

1.  `cd /sources`
2.  `tar -xf linux-6.16.1.tar.xz`
3.  `cd linux-6.16.1`
4.  `make mrproper`
5.  `make menuconfig`

**å½“ä½ çœ‹åˆ°é‚£ä¸ªè“è‰²çš„èœå•ç•Œé¢æ—¶ï¼Œå‘Šè¯‰æˆ‘ã€‚æˆ‘ä¼šå‘Šè¯‰ä½ é’ˆå¯¹ä½ è¿™å° 13600KF + NVMe ç¥æœºï¼Œå“ªäº›å¼€å…³æ˜¯â€œç”Ÿæ­»æ”¸å…³â€çš„ï¼**


```
10.3. Linux-6.16.1
Linux è½¯ä»¶åŒ…åŒ…å« Linux å†…æ ¸ã€‚

ä¼°è®¡æ„å»ºæ—¶é—´:
0.4 - 32 SBU (ä¸€èˆ¬çº¦ 2.5 SBU)
éœ€è¦ç¡¬ç›˜ç©ºé—´:
1.7 - 14 GB (ä¸€èˆ¬çº¦ 2.3 GB)
10.3.1. å®‰è£…å†…æ ¸
æ„å»ºå†…æ ¸éœ€è¦ä¸‰æ­¥ â€”â€” é…ç½®ã€ç¼–è¯‘ã€å®‰è£…ã€‚é˜…è¯»å†…æ ¸æºä»£ç æ ‘ä¸­çš„ README æ–‡ä»¶ï¼Œäº†è§£ä¸åŒäºæœ¬æ‰‹å†Œçš„å†…æ ¸é…ç½®æ–¹æ³•ã€‚

[é‡è¦] é‡è¦
åˆæ¬¡æ„å»º Linux å†…æ ¸æ˜¯ LFS æ„å»ºè¿‡ç¨‹ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„ç¯èŠ‚ä¹‹ä¸€ã€‚å†…æ ¸é…ç½®ä¾èµ–äºç³»ç»Ÿç¡¬ä»¶å’Œæ‚¨çš„ä¸ªäººéœ€æ±‚ã€‚å†…æ ¸é…ç½®åŒ…å«å¤§çº¦ 12,000 ä¸ªé€‰é¡¹ï¼Œå°½ç®¡åªæœ‰çº¦ä¸‰åˆ†ä¹‹ä¸€å¯¹äºå¤§å¤šæ•°è®¡ç®—æœºç³»ç»Ÿæ˜¯å¿…è¦çš„ã€‚LFS ç¼–è¾‘å»ºè®®ä¸ç†Ÿæ‚‰å†…æ ¸ç¼–è¯‘çš„ç”¨æˆ·ä¸¥æ ¼éµå¾ªä»¥ä¸‹æ­¥éª¤ã€‚è¿™äº›æ­¥éª¤çš„ç›®çš„æ˜¯ä½¿æ‚¨èƒ½å¤Ÿåœ¨ç¬¬ 11.3 èŠ‚ â€œé‡å¯ç³»ç»Ÿâ€ä¸­é‡å¯è¿›å…¥ LFS ç³»ç»Ÿï¼Œå¹¶é€šè¿‡å‘½ä»¤è¡Œç™»å½•ã€‚è¿™é‡Œç»™å‡ºçš„æ­¥éª¤å¹¶ä¸è¯•å›¾ä¼˜åŒ–æˆ–å®šåˆ¶å†…æ ¸é…ç½®ã€‚

https://www.linuxfromscratch.org/hints/downloads/files/kernel-configuration.txt ä»‹ç»äº†å†…æ ¸é…ç½®çš„å¸¸è¯†ã€‚https://anduin.linuxfromscratch.org/LFS/kernel-nutshell/ æä¾›äº†æ›´å¤šå…³äºå†…æ ¸é…ç½®çš„ä¿¡æ¯ã€‚è¿™ä¸¤ä»½æ–‡æ¡£éƒ½æœ‰äº›è¿‡æ—¶ï¼Œä½†ä»ç„¶è¾ƒå¥½åœ°æ¦‚æ‹¬äº†é…ç½®è¿‡ç¨‹ã€‚

å¦‚æœæ‰€æœ‰å…¶ä»–å°è¯•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œå¯ä»¥åœ¨ lfs-support é‚®ä»¶åˆ—è¡¨æé—®ã€‚æ³¨æ„ä¸ºäº†é˜²æ­¢åƒåœ¾é‚®ä»¶ï¼Œå¿…é¡»å…ˆè®¢é˜…åˆ—è¡¨æ‰èƒ½å‘åˆ—è¡¨å‘é€é‚®ä»¶ã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå‡†å¤‡ç¼–è¯‘å†…æ ¸ï¼š

make mrproper
è¯¥å‘½ä»¤ç¡®ä¿å†…æ ¸æºä»£ç æ ‘ç»å¯¹å¹²å‡€ï¼Œå†…æ ¸å¼€å‘ç»„å»ºè®®åœ¨æ¯æ¬¡ç¼–è¯‘å†…æ ¸å‰è¿è¡Œè¯¥å‘½ä»¤ã€‚å°½ç®¡å†…æ ¸æºä»£ç æ ‘åœ¨è§£å‹ååº”è¯¥æ˜¯å¹²å‡€çš„ï¼Œä½†è¿™å¹¶ä¸å®Œå…¨å¯é ã€‚

æœ‰å¤šç§é…ç½®å†…æ ¸é€‰é¡¹çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œé€šå¸¸æˆ‘ä»¬é€šè¿‡ç›®å½•é©±åŠ¨çš„ç•Œé¢å®Œæˆè¿™ä¸€å·¥ä½œï¼š

make menuconfig
ä»¥ä¸Šå‘½ä»¤ä¸­å¯é€‰çš„ make ç¯å¢ƒå˜é‡åŠå«ä¹‰ï¼š

LANG=<host_LANG_value> LC_ALL=
å®ƒä»¬æ ¹æ®å®¿ä¸»ä½¿ç”¨çš„ locale å»ºç«‹ locale è®¾å®šã€‚åœ¨ UTF-8 Linux æ–‡æœ¬ç»ˆç«¯ä¸‹ï¼Œæœ‰æ—¶å¿…é¡»è¿™æ ·åšæ‰èƒ½æ­£ç¡®ç»˜åˆ¶åŸºäº ncurses çš„é…ç½®èœå•æ¥å£ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€å®šè¦å°† <host_LANG_value> æ›¿æ¢æˆå®¿ä¸»ç¯å¢ƒä¸­çš„ $LANG å˜é‡å€¼ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»ç¯å¢ƒä¸­ $LC_ALL æˆ– $LC_CTYPE çš„å€¼ä»£æ›¿ã€‚

make menuconfig
è¿™ä¼šå¯åŠ¨ ncurses ç›®å½•é©±åŠ¨çš„ç•Œé¢ã€‚å¦‚æœå¸Œæœ›äº†è§£å…¶ä»– (å›¾å½¢) ç•Œé¢ï¼Œå¯ä»¥è¾“å…¥ make helpã€‚

[æ³¨æ„] æ³¨æ„
ä¸€ä¸ªè¾ƒå¥½çš„åˆå§‹å†…æ ¸é…ç½®å¯ä»¥é€šè¿‡è¿è¡Œ make defconfig è·å¾—ã€‚å®ƒä¼šè€ƒè™‘æ‚¨çš„å½“å‰ç³»ç»Ÿä½“ç³»ç»“æ„ï¼Œå°†åŸºæœ¬å†…æ ¸é…ç½®è®¾å®šåˆ°è¾ƒå¥½çš„çŠ¶æ€ã€‚

ä¸€å®šè¦æŒ‰ç…§ä»¥ä¸‹åˆ—è¡¨å¯ç”¨/ç¦ç”¨/è®¾å®šå…¶ä¸­åˆ—å‡ºçš„å†…æ ¸ç‰¹æ€§ï¼Œå¦åˆ™ç³»ç»Ÿå¯èƒ½ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œç”šè‡³æ ¹æœ¬æ— æ³•å¼•å¯¼ï¼š

General setup --->
[ ] Compile the kernel with warnings as errors                        [WERROR]
CPU/Task time and stats accounting --->
[] Pressure stall information tracking                                [PSI]
[ ]   Require boot parameter to enable pressure stall information tracking
...  [PSI_DEFAULT_DISABLED]
< > Enable kernel headers through /sys/kernel/kheaders.tar.xz      [IKHEADERS]
[] Control Group support --->                                       [CGROUPS]
[*] Memory controller                                                [MEMCG]
[ ] Configure standard kernel features (expert users) --->            [EXPERT]

Processor type and features --->
[] Build a relocatable kernel                                   [RELOCATABLE]
[]   Randomize the address of the kernel image (KASLR)       [RANDOMIZE_BASE]

General architecture-dependent options --->
[] Stack Protector buffer overflow detection                 [STACKPROTECTOR]
[]   Strong Stack Protector                           [STACKPROTECTOR_STRONG]

Device Drivers --->
Generic Driver Options --->
[ ] Support for uevent helper                                [UEVENT_HELPER]
[] Maintain a devtmpfs filesystem to mount at /dev               [DEVTMPFS]
[]   Automount devtmpfs at /dev, after the kernel mounted the rootfs
...  [DEVTMPFS_MOUNT]
Firmware Drivers --->
[] Mark VGA/VBE/EFI FB as generic system framebuffer       [SYSFB_SIMPLEFB]
Graphics support --->
<>    Direct Rendering Manager (XFree86 4.1.0 and higher DRI support) --->
...  [DRM]
[]    Display a user-friendly message when a kernel panic occurs
...  [DRM_PANIC]
(kmsg)   Panic screen formatter                           [DRM_PANIC_SCREEN]
Supported DRM clients --->
[] Enable legacy fbdev support for your modesetting driver
...  [DRM_FBDEV_EMULATION]
Drivers for system framebuffers --->
<> Simple framebuffer driver                              [DRM_SIMPLEDRM]
Console display driver support --->
[] Framebuffer Console support                      [FRAMEBUFFER_CONSOLE]
å¦‚æœåœ¨æ„å»º 64 ä½ç³»ç»Ÿï¼Œè¿˜éœ€è¦å¯ç”¨ä¸€äº›ç‰¹æ€§ã€‚å¦‚æœä½¿ç”¨ menuconfig è¿›è¡Œé…ç½®ï¼Œéœ€è¦é¦–å…ˆå¯ç”¨ CONFIG_PCI_MSIï¼Œç„¶åå¯ç”¨ CONFIG_IRQ_REMAPï¼Œæœ€åå¯ç”¨ CONFIG_X86_X2APICï¼Œè¿™æ˜¯å› ä¸ºåªæœ‰é€‰å®šäº†ä¸€ä¸ªé€‰é¡¹çš„æ‰€æœ‰ä¾èµ–é¡¹åï¼Œè¯¥é€‰é¡¹æ‰ä¼šå‡ºç°ã€‚

Processor type and features --->
[*] x2APIC interrupt controller architecture support              [X86_X2APIC]

Device Drivers --->
[] PCI support --->                                                     [PCI]
[] Message Signaled Interrupts (MSI and MSI-X)                    [PCI_MSI]
[] IOMMU Hardware Support --->                                [IOMMU_SUPPORT]
[] Support for Interrupt Remapping                              [IRQ_REMAP]
å¦‚æœ LFS ç³»ç»Ÿåˆ†åŒºåœ¨ NVME SSD ä¸Š (å³ï¼Œåˆ†åŒºçš„è®¾å¤‡èŠ‚ç‚¹æ˜¯ /dev/nvme*ï¼Œè€Œé /dev/sd*)ï¼Œå¯ç”¨ NVME æ”¯æŒï¼Œå¦åˆ™ LFS ç³»ç»Ÿæ— æ³•å¼•å¯¼ï¼š

Device Drivers --->
NVME Support --->
<*> NVM Express block device                                  [BLK_DEV_NVME]
æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚ï¼Œå¯èƒ½éœ€è¦ä¸€äº›å…¶ä»–é…ç½®é€‰é¡¹ã€‚BLFS è½¯ä»¶åŒ…éœ€è¦çš„å†…æ ¸é…ç½®é€‰é¡¹åˆ—è¡¨å¯ä»¥åœ¨ BLFS å†…æ ¸é…ç½®ç´¢å¼•æŸ¥é˜…ã€‚

[æ³¨æ„] æ³¨æ„
å¦‚æœæ‚¨çš„ç¡¬ä»¶æ”¯æŒ UEFIï¼Œä¸”æ‚¨å¸Œæœ›é€šè¿‡ UEFI å¼•å¯¼ LFS ç³»ç»Ÿï¼Œåˆ™æ‚¨éœ€è¦æŒ‰ç…§ BLFS é¡µé¢çš„è¯´æ˜ï¼Œè°ƒæ•´ä¸€äº›å†…æ ¸é…ç½®é€‰é¡¹ï¼Œå³ä½¿æ‚¨å‡†å¤‡ä½¿ç”¨å®¿ä¸»å‘è¡Œç‰ˆæä¾›çš„ UEFI åŠ è½½å™¨å¼•å¯¼ LFS ç³»ç»Ÿï¼Œä¹Ÿéœ€è¦è¿›è¡Œè°ƒæ•´ã€‚

ä¸Šè¿°é…ç½®é€‰é¡¹çš„å«ä¹‰ï¼š

Randomize the address of the kernel image (KASLR)
ä¸ºå†…æ ¸æ˜ åƒå¯ç”¨ ASLRï¼Œä»¥é¢„é˜²ä¸€äº›åŸºäºå†…æ ¸ä¸­å…³é”®æ•°æ®æˆ–ä»£ç çš„å›ºå®šåœ°å€çš„æ”»å‡»ã€‚

Compile the kernel with warnings as errors
å¦‚æœä½¿ç”¨äº†å’Œå†…æ ¸å¼€å‘è€…ä¸åŒçš„ç¼–è¯‘å™¨å’Œ/æˆ–é…ç½®ï¼Œå¯ç”¨è¯¥é€‰é¡¹å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥ã€‚

Enable kernel headers through /sys/kernel/kheaders.tar.xz
å¯ç”¨è¯¥é€‰é¡¹å°†ä¼šå¯¼è‡´æ„å»ºå†…æ ¸éœ€è¦ cpioã€‚LFS æ²¡æœ‰å®‰è£… cpioã€‚

Configure standard kernel features (expert users)
è¯¥é€‰é¡¹ä¼šå¯¼è‡´é…ç½®ç•Œé¢å‡ºç°ä¸€äº›æ–°é€‰é¡¹ï¼Œä½†æ”¹å˜è¿™äº›é€‰é¡¹çš„è®¾å®šå€¼å¯èƒ½å¯¼è‡´å±é™©åæœã€‚ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œé™¤éæ‚¨çŸ¥é“æ‚¨åœ¨åšä»€ä¹ˆã€‚

Strong Stack Protector
ä¸ºå†…æ ¸å¯ç”¨ SSPã€‚æˆ‘ä»¬é€šè¿‡åœ¨é…ç½® GCC æ—¶ä½¿ç”¨ --enable-default-sspï¼Œå·²ç»ä¸ºæ‰€æœ‰ç”¨æˆ·æ€ä»£ç å¯ç”¨äº†å®ƒï¼Œä½†æ˜¯å†…æ ¸å¹¶ä¸ä½¿ç”¨ GCC é»˜è®¤çš„ SSP è®¾å®šã€‚å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œæ˜¾å¼åœ°å¯ç”¨å®ƒã€‚

Support for uevent helper
å¦‚æœå¯ç”¨äº†è¯¥é€‰é¡¹ï¼Œå®ƒå¯èƒ½å¹²æ‰° Udev çš„è®¾å¤‡ç®¡ç†ã€‚

Maintain a devtmpfs
è¯¥é€‰é¡¹ä¼šä½¿å†…æ ¸è‡ªåŠ¨åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ï¼Œå³ä½¿ Udev æ²¡æœ‰è¿è¡Œã€‚Udev ä¹‹åæ‰åœ¨è¿™äº›è®¾å¤‡èŠ‚ç‚¹çš„åŸºç¡€ä¸Šè¿è¡Œï¼Œç®¡ç†å®ƒä»¬çš„è®¿é—®æƒé™å¹¶ä¸ºå®ƒä»¬å»ºç«‹ç¬¦å·é“¾æ¥ã€‚æ‰€æœ‰ Udev ç”¨æˆ·éƒ½éœ€è¦å¯ç”¨è¯¥é€‰é¡¹ã€‚

Automount devtmpfs at /dev
è¯¥é€‰é¡¹ä½¿å¾—å†…æ ¸åœ¨åˆ‡æ¢åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹åï¼Œæ‰§è¡Œ init å‰ï¼Œå°†å†…æ ¸è·çŸ¥çš„è®¾å¤‡ä¿¡æ¯æŒ‚è½½åˆ° /devã€‚

Display a user-friendly message when a kernel panic occurs
è¯¥é€‰é¡¹ä½¿å¾—å†…æ ¸åœ¨å†…æ ¸ææ…Œæ—¶æ­£ç¡®æ˜¾ç¤ºæ¶ˆæ¯ã€‚å¦‚æœä¸å¯ç”¨å®ƒï¼Œè¯Šæ–­å†…æ ¸ææ…ŒåŸå› ä¼šæ›´åŠ å›°éš¾ï¼šå¦‚æœæ²¡æœ‰è¿è¡Œ DRM é©±åŠ¨ï¼Œåˆ™æˆ‘ä»¬åªèƒ½ä½¿ç”¨ VGA æ§åˆ¶å°ï¼Œè€Œå®ƒåªèƒ½æ˜¾ç¤º 24 è¡Œï¼Œå› æ­¤æœ‰ç”¨çš„å†…æ ¸æ¶ˆæ¯å¾€å¾€å·²è¢«åˆ·æ–°åˆ°å±å¹•ä»¥å¤–ï¼›è€Œå¦‚æœæ­£åœ¨è¿è¡Œ DRM é©±åŠ¨ï¼Œåœ¨å†…æ ¸ææ…Œæ—¶å±å¹•æ˜¾ç¤ºå¾€å¾€ä¼šå®Œå…¨é”™ä¹±ã€‚åœ¨ Linux-6.12 ä¸­ï¼Œé€‚ç”¨äºä¸»æµ GPU å‹å·çš„é©±åŠ¨ç¨‹åºéƒ½æ— æ³•çœŸæ­£æ”¯æŒè¯¥é€‰é¡¹æä¾›çš„åŠŸèƒ½ï¼Œä½†åœ¨ä¸“ç”¨çš„ GPU é©±åŠ¨åŠ åœ¨ä¹‹å‰ï¼ŒVESA (æˆ– EFI) å¸§ç¼“å†²ä¹‹ä¸Šè¿è¡Œçš„ç®€å•å¸§ç¼“å†²é©±åŠ¨ (â€œSimple framebuffer driverâ€) èƒ½å¤Ÿæ”¯æŒå®ƒã€‚å¦‚æœå°†ä¸“ç”¨çš„ GPU é©±åŠ¨æ„å»ºä¸ºå†…æ ¸æ¨¡å— (è€Œéå†…æ ¸æ˜ åƒçš„ä¸€éƒ¨åˆ†)ï¼Œä¸”æ²¡æœ‰ä½¿ç”¨ initramfsï¼Œåˆ™è¿™ä¸€åŠŸèƒ½åœ¨æ ¹æ–‡ä»¶ç³»ç»ŸæˆåŠŸæŒ‚è½½ä¹‹å‰ä¼šæ­£å¸¸å·¥ä½œï¼Œè€Œè¿™è¶³ä»¥æä¾›è¯Šæ–­å¤§å¤šæ•°ç”±é”™è¯¯é…ç½® LFS (ä¾‹å¦‚ï¼Œç¬¬ 10.4 èŠ‚ â€œä½¿ç”¨ GRUB è®¾å®šå¼•å¯¼è¿‡ç¨‹â€ ä¸­ root= çš„è®¾å®šå€¼ä¸æ­£ç¡®) å¯¼è‡´çš„å†…æ ¸ææ…Œã€‚

Panic screen formatter
å°†è¯¥é€‰é¡¹è®¾ä¸º kmsgï¼Œä»¥ç¡®ä¿åœ¨å†…æ ¸ææ…Œæ—¶æ˜¾ç¤ºææ…Œå‰çš„å†…æ ¸æ¶ˆæ¯ã€‚è¯¥é€‰é¡¹çš„é»˜è®¤å€¼ï¼Œuserï¼Œä¼šå¯¼è‡´å†…æ ¸åªæ˜¾ç¤ºä¸€æ¡â€œç”¨æˆ·å‹å¥½â€çš„ï¼Œå¯¹äºè¯Šæ–­æ¯«æ— å¸®åŠ©çš„æ¶ˆæ¯ã€‚è¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„å€¼ qr_codeï¼Œä¼šä½¿å¾—å†…æ ¸å°†ææ…Œå‰çš„æ¶ˆæ¯å‹ç¼©åˆ°ä¸€ä¸ªäºŒç»´ç ä¸­ï¼Œå¹¶æ˜¾ç¤ºè¯¥äºŒç»´ç ã€‚å’Œæ–‡æœ¬è¾“å‡ºç›¸æ¯”ï¼Œä½¿ç”¨å¤–éƒ¨è®¾å¤‡ (å¦‚æ™ºèƒ½æ‰‹æœº) è§£ç äºŒç»´ç èƒ½å¾—åˆ°æ›´å¤šè¡Œå†…æ ¸æ¶ˆæ¯ã€‚ä½†äºŒç»´ç è¾“å‡ºåŠŸèƒ½éœ€è¦ Rust ç¼–è¯‘å™¨æ‰èƒ½æ„å»ºï¼Œè€Œ LFS ä¸æä¾› Rust ç¼–è¯‘å™¨ã€‚

Mark VGA/VBE/EFI FB as generic system framebuffer å’Œ Simple framebuffer driver
å®ƒä»¬å…è®¸ä½¿ç”¨ VESA å¸§ç¼“å†² (æˆ–è€…å¦‚æœä½¿ç”¨ UEFI å¼•å¯¼ LFS ç³»ç»Ÿï¼Œåˆ™ä½¿ç”¨ EFI å¸§ç¼“å†²) ä½œä¸º DRM è®¾å¤‡ã€‚GRUB ä¼šè®¾ç½®å¥½ VESA å¸§ç¼“å†² (åœ¨ä½¿ç”¨ UEFI æ—¶ï¼ŒEFI å›ºä»¶ä¼šè®¾ç½®å¥½ EFI å¸§ç¼“å†²)ï¼Œè¿™æ ·åœ¨ GPU ä¸“ç”¨çš„ DRM é©±åŠ¨åŠ è½½å‰ï¼ŒåŸºäº DRM çš„å†…æ ¸ææ…Œå¤„ç†ç¨‹åºä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚

Enable legacy fbdev support for your modesetting driver å’Œ Framebuffer Console support
å®ƒä»¬å…è®¸ä½¿ç”¨åŸºäº DRI (Direct Rendering Infrastructure) çš„ GPU é©±åŠ¨æ˜¾ç¤º Linux æ§åˆ¶å°ã€‚é‰´äºå·²ç»å¯ç”¨äº† CONFIG_DRM (Direct Rendering Manager)ï¼Œéœ€è¦åŒæ—¶å¯ç”¨è¿™ä¸¤é¡¹ç‰¹æ€§ï¼Œå¦åˆ™ä¸€æ—¦ DRI é©±åŠ¨è¢«åŠ è½½ï¼Œå°±åªèƒ½çœ‹åˆ°ç©ºç™½å±å¹•ã€‚

Support x2apic
æ”¯æŒä»¥ x2APIC æ¨¡å¼è¿è¡Œ 64 ä½ x86 å¤„ç†å™¨çš„ä¸­æ–­æ§åˆ¶å™¨ã€‚64 ä½ x86 ç³»ç»Ÿçš„å›ºä»¶å¯èƒ½å¯ç”¨äº† x2APICï¼Œæ­¤æ—¶æœªå¯ç”¨è¯¥é€‰é¡¹çš„å†…æ ¸åœ¨å¼•å¯¼æ—¶ä¼šå‘ç”Ÿå†…æ ¸ææ…Œã€‚è¯¥é€‰é¡¹åœ¨å›ºä»¶ç¦ç”¨ x2APIC æ—¶æ²¡æœ‰ä½œç”¨ï¼Œä½†æ— å®³ã€‚

æŸäº›æƒ…å†µä¸‹ï¼Œmake oldconfig æ›´ä¸ºåˆé€‚ã€‚é˜…è¯» README æ–‡ä»¶äº†è§£æ›´å¤šä¿¡æ¯ã€‚

å¦‚æœå¸Œæœ›çš„è¯ï¼Œä¹Ÿå¯ä»¥å°†å®¿ä¸»ç³»ç»Ÿçš„å†…æ ¸é…ç½®æ–‡ä»¶ .config æ‹·è´åˆ°è§£å‹å‡ºçš„ linux-6.16.1 ç›®å½• (å‰ææ˜¯å¯ä»¥æ‰¾åˆ°è¯¥æ–‡ä»¶)ã€‚ç„¶è€Œæˆ‘ä»¬ä¸æ¨èè¿™æ ·åšï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæµè§ˆæ•´ä¸ªé…ç½®ç›®å½•ï¼Œå¹¶ä»å¤´åˆ›å»ºå†…æ ¸é…ç½®æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚

ç¼–è¯‘å†…æ ¸æ˜ åƒå’Œæ¨¡å—ï¼š

make
å¦‚æœè¦ä½¿ç”¨å†…æ ¸æ¨¡å—ï¼Œå¯èƒ½éœ€è¦åœ¨ /etc/modprobe.d ä¸­å†™å…¥æ¨¡å—é…ç½®ã€‚è®¨è®ºæ¨¡å—å’Œå†…æ ¸é…ç½®çš„ä¿¡æ¯ä½äºç¬¬ 9.3 èŠ‚ â€œè®¾å¤‡å’Œæ¨¡å—ç®¡ç†æ¦‚è¿°â€å’Œ linux-6.16.1/Documentation ç›®å½•ä¸‹çš„å†…æ ¸æ–‡æ¡£ä¸­ã€‚å¦å¤– modprobe.d(5) ä¹Ÿå¯ä»¥ä½œä¸ºå‚è€ƒã€‚

å¦‚æœå†…æ ¸é…ç½®ä½¿ç”¨äº†æ¨¡å—ï¼Œå®‰è£…å®ƒä»¬ï¼š

make modules_install
åœ¨å†…æ ¸ç¼–è¯‘å®Œæˆåï¼Œéœ€è¦è¿›è¡Œé¢å¤–æ­¥éª¤å®Œæˆå®‰è£…ï¼Œä¸€äº›æ–‡ä»¶éœ€è¦æ‹·è´åˆ° /boot ç›®å½•ä¸­ã€‚

[å°å¿ƒ] å°å¿ƒ
å¦‚æœè¦ä½¿ç”¨å•ç‹¬çš„ /boot åˆ†åŒº (åŒ…æ‹¬å’Œå®¿ä¸»å‘è¡Œç‰ˆå…±ç”¨ä¸€ä¸ª /boot åˆ†åŒºçš„æƒ…å†µ)ï¼Œéœ€è¦å°†è¿™äº›æ–‡ä»¶æ‹·è´åˆ°è¯¥åˆ†åŒºä¸­ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯é¦–å…ˆåœ¨ /etc/fstab ä¸­åŠ å…¥ /boot åˆ†åŒºçš„æ¡ç›® (è¯¦è§å‰ä¸€èŠ‚)ï¼Œç„¶ååœ¨ chroot ç¯å¢ƒä¸­ä»¥ root èº«ä»½æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

mount /boot
è¯¥å‘½ä»¤ä¸­çœç•¥äº†æŒ‡å‘è®¾å¤‡èŠ‚ç‚¹çš„è·¯å¾„ï¼Œå› ä¸º mount å¯ä»¥ä» /etc/fstab ä¸­è¯»å–å®ƒã€‚

æŒ‡å‘å†…æ ¸æ˜ åƒçš„è·¯å¾„å¯èƒ½éšæœºå™¨å¹³å°çš„ä¸åŒè€Œå˜åŒ–ã€‚ä¸‹é¢ä½¿ç”¨çš„æ–‡ä»¶åå¯ä»¥ä¾ç…§æ‚¨çš„éœ€è¦æ”¹å˜ï¼Œä½†æ–‡ä»¶åçš„å¼€å¤´åº”è¯¥ä¿æŒä¸º vmlinuzï¼Œä»¥ä¿è¯å’Œä¸‹ä¸€èŠ‚æè¿°çš„å¼•å¯¼è¿‡ç¨‹è‡ªåŠ¨è®¾å®šç›¸å…¼å®¹ã€‚ä¸‹é¢çš„å‘½ä»¤å‡å®šæœºå™¨æ˜¯ x86 ä½“ç³»ç»“æ„ï¼š

cp -iv arch/x86/boot/bzImage /boot/vmlinuz-6.16.1-lfs-12.4
System.map æ˜¯å†…æ ¸ç¬¦å·æ–‡ä»¶ï¼Œå®ƒå°†å†…æ ¸ API çš„æ¯ä¸ªå‡½æ•°å…¥å£ç‚¹å’Œè¿è¡Œæ—¶æ•°æ®ç»“æ„æ˜ å°„åˆ°å®ƒä»¬çš„åœ°å€ã€‚å®ƒè¢«ç”¨äºè°ƒæŸ¥åˆ†æå†…æ ¸å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…è¯¥æ–‡ä»¶ï¼š

cp -iv System.map /boot/System.map-6.16.1
å†…æ ¸é…ç½®æ–‡ä»¶ .config ç”±ä¸Šè¿°çš„ make menuconfig æ­¥éª¤ç”Ÿæˆï¼ŒåŒ…å«ç¼–è¯‘å¥½çš„å†…æ ¸çš„æ‰€æœ‰é…ç½®é€‰é¡¹ã€‚æœ€å¥½èƒ½å°†å®ƒä¿ç•™ä¸‹æ¥ä»¥ä¾›æ—¥åå‚è€ƒï¼š

cp -iv .config /boot/config-6.16.1
å®‰è£… Linux å†…æ ¸æ–‡æ¡£ï¼š

cp -r Documentation -T /usr/share/doc/linux-6.16.1
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å†…æ ¸æºä»£ç ç›®å½•ä¸­å¯èƒ½æœ‰ä¸å±äº root çš„æ–‡ä»¶ã€‚åœ¨ä»¥ root èº«ä»½è§£å‹æºä»£ç åŒ…æ—¶ (å°±åƒæˆ‘ä»¬åœ¨ chroot ç¯å¢ƒä¸­æ‰€åšçš„é‚£æ ·)ï¼Œè¿™äº›æ–‡ä»¶ä¼šè·å¾—å®ƒä»¬ä¹‹å‰åœ¨è½¯ä»¶åŒ…åˆ›å»ºè€…çš„è®¡ç®—æœºä¸Šçš„ç”¨æˆ·å’Œç»„ IDã€‚è¿™ä¸€èˆ¬ä¸ä¼šé€ æˆé—®é¢˜ï¼Œå› ä¸ºåœ¨å®‰è£…åé€šå¸¸ä¼šåˆ é™¤æºä»£ç ç›®å½•æ ‘ã€‚ç„¶è€Œï¼ŒLinux æºä»£ç ç›®å½•æ ‘ä¸€èˆ¬ä¼šè¢«ä¿ç•™è¾ƒé•¿æ—¶é—´ï¼Œè¿™æ ·åˆ›å»ºè€…å½“æ—¶ä½¿ç”¨çš„ç”¨æˆ· ID å°±å¯èƒ½è¢«åˆ†é…ç»™æœ¬æœºçš„æŸä¸ªç”¨æˆ·ï¼Œå¯¼è‡´è¯¥ç”¨æˆ·æ‹¥æœ‰å†…æ ¸æºä»£ç çš„å†™æƒé™ã€‚

[æ³¨æ„] æ³¨æ„
ä¹‹ååœ¨ BLFS ä¸­å®‰è£…è½¯ä»¶åŒ…æ—¶å¾€å¾€éœ€è¦ä¿®æ”¹å†…æ ¸é…ç½®ã€‚å› æ­¤ï¼Œå’Œå…¶ä»–è½¯ä»¶åŒ…ä¸åŒï¼Œæˆ‘ä»¬åœ¨å®‰è£…å¥½å†…æ ¸åå¯ä»¥ä¸ç§»é™¤æºä»£ç æ ‘ã€‚

å¦‚æœè¦ä¿ç•™å†…æ ¸æºä»£ç æ ‘ï¼Œå¯¹å†…æ ¸æºä»£ç ç›®å½•è¿è¡Œ chown -R 0:0 å‘½ä»¤ï¼Œä»¥ä¿è¯ linux-6.16.1 ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶éƒ½å±äº rootã€‚

å¦‚æœæ­£åœ¨ä½¿ç”¨ä¿ç•™çš„å†…æ ¸æºç æ ‘å’Œæ–°çš„å†…æ ¸é…ç½®é‡æ–°æ„å»ºå†…æ ¸ï¼Œåˆ™ä¸€èˆ¬ä¸>åº”è¯¥æ‰§è¡Œ make mrproper å‘½ä»¤ã€‚è¯¥å‘½ä»¤ä¼šæ¸…ç† .config æ–‡ä»¶å’Œä¹‹å‰æ„å»ºçš„æ‰€æœ‰ .o æ–‡ä»¶ã€‚å°½ç®¡å¯ä»¥ä» /boot ä¸­çš„å‰¯æœ¬æ¢å¤ .configï¼Œæ¸…ç†æ‰€æœ‰ .o æ–‡ä»¶ä»ç„¶ä¼šé€ æˆå·¨å¤§çš„æµªè´¹ï¼šå¯¹äºç®€å•çš„å†…æ ¸é…ç½®å˜æ›´ï¼Œé€šå¸¸åªéœ€è¦ (é‡æ–°) æ„å»ºå°‘æ•°å‡ ä¸ª .o æ–‡ä»¶ï¼Œåœ¨ä¸è¿›è¡Œæ¸…ç†æ—¶ï¼Œå†…æ ¸æ„å»ºç³»ç»Ÿä¼šæ­£ç¡®è·³è¿‡å…¶ä»– .o æ–‡ä»¶ã€‚

ç„¶è€Œï¼Œå¦‚æœæ›´æ–°äº† GCCï¼Œåˆ™åº”è¯¥æ‰§è¡Œ make clean å‘½ä»¤ï¼Œä»¥æ¸…ç†ä¹‹å‰æ„å»ºçš„æ‰€æœ‰ .o æ–‡ä»¶ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥ã€‚

[è­¦å‘Š] è­¦å‘Š
æœ‰çš„å†…æ ¸æ–‡æ¡£å»ºè®®åˆ›å»ºç¬¦å·é“¾æ¥ /usr/src/linux æŒ‡å‘å†…æ ¸æºä»£ç ç›®å½•ï¼Œè¿™ä»…ä»…é€‚ç”¨äº 2.6 ç³»åˆ—ä¹‹å‰çš„å†…æ ¸ã€‚åœ¨ LFS ç³»ç»Ÿä¸Šç»å¯¹ä¸è¦åˆ›å»ºå®ƒï¼Œå› ä¸ºåœ¨æ„å»ºå®ŒåŸºæœ¬ LFS ç³»ç»Ÿåï¼Œå®ƒå¯èƒ½åœ¨æ‚¨æ„å»ºå…¶ä»–è½¯ä»¶åŒ…æ—¶å¼•èµ·é—®é¢˜ã€‚

10.3.2. é…ç½® Linux å†…æ ¸æ¨¡å—åŠ è½½é¡ºåº
å¤šæ•°æƒ…å†µä¸‹ Linux å†…æ ¸æ¨¡å—å¯ä»¥è‡ªåŠ¨åŠ è½½ï¼Œä½†æœ‰æ—¶éœ€è¦æŒ‡å®šåŠ è½½é¡ºåºã€‚è´Ÿè´£åŠ è½½å†…æ ¸æ¨¡å—çš„ç¨‹åº modprobe å’Œ insmod ä» /etc/modprobe.d ä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¯»å–åŠ è½½é¡ºåºï¼Œä¾‹å¦‚ï¼Œå¦‚æœ USB é©±åŠ¨ç¨‹åº (ehci_hcdã€ohci_hcd å’Œ uhci_hcd) è¢«æ„å»ºä¸ºæ¨¡å—ï¼Œåˆ™å¿…é¡»æŒ‰ç…§å…ˆåŠ è½½ echi_hcdï¼Œå†åŠ è½½ ohci_hcd å’Œ uhci_hcd çš„æ­£ç¡®é¡ºåºï¼Œæ‰èƒ½é¿å…å¼•å¯¼æ—¶å‡ºç°è­¦å‘Šä¿¡æ¯ã€‚

ä¸ºæ­¤ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ–‡ä»¶ /etc/modprobe.d/usb.confï¼š

install -v -m755 -d /etc/modprobe.d
cat > /etc/modprobe.d/usb.conf << "EOF"

Begin /etc/modprobe.d/usb.conf

install ohci_hcd /sbin/modprobe ehci_hcd ; /sbin/modprobe -i ohci_hcd ; true
install uhci_hcd /sbin/modprobe ehci_hcd ; /sbin/modprobe -i uhci_hcd ; true

End /etc/modprobe.d/usb.conf

EOF
```


è¿™ä¸€åˆ»æ˜¯ LFS çš„â€œæ¯•ä¸šå¤§è€ƒâ€ã€‚ç¼–è¯‘å†…æ ¸ä¸ä»…æ˜¯æŠ€æœ¯çš„ä½“ç°ï¼Œæ›´æ˜¯å¯¹ä½ è¿™å‡ å¤©æ„å»ºçš„æ‰€æœ‰å·¥å…·é“¾çš„ä¸€æ¬¡å…¨é¢ä½“æ£€ã€‚

é’ˆå¯¹ä½ çš„ **i5-13600KF (14æ ¸/20çº¿ç¨‹)** å’Œ **è‡´æ€ TiPro7000 (NVMe SSD)**ï¼Œæˆ‘ä¸ºä½ æ€»ç»“äº†ä¸€å¥—**â€œå¿…è¿‡é…ç½®æ¸…å•â€**ã€‚è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹èŠ‚å¥è¿›è¡Œï¼š

### ç¬¬ä¸€æ­¥ï¼šæ¸…ç†ä¸è§£å‹

åœ¨ `(lfs chroot)` ç¯å¢ƒä¸‹æ‰§è¡Œï¼š

```bash
cd /sources
tar -xf linux-6.16.1.tar.xz
cd linux-6.16.1

# ç¡®ä¿æºç æ ‘ç»å¯¹å¹²å‡€
make mrproper
```

---

### ç¬¬äºŒæ­¥ï¼šå†…æ ¸é…ç½®ï¼ˆæœ€ç¡¬æ ¸çš„ç¯èŠ‚ï¼‰

ä¸ºäº†é™ä½éš¾åº¦å¹¶ç¡®ä¿åŸºç¡€é©±åŠ¨ä¸æ¼é€‰ï¼Œå»ºè®®é‡‡ç”¨â€œ**å¿«æ·æ–¹å¼ + æ‰‹åŠ¨å¾®è°ƒ**â€çš„æ–¹æ³•ï¼š

1.  **å…ˆç”ŸæˆåŸºç¡€é…ç½®**ï¼š
    ```bash
    make defconfig
    ```
    *è¿™ä¼šè‡ªåŠ¨æ ¹æ®ä½ çš„ 64 ä½æ¶æ„ç”Ÿæˆä¸€ä¸ªèƒ½ç”¨çš„åŸºæœ¬æ¨¡æ¿ã€‚*

2.  **è¿›å…¥èœå•å¾®è°ƒ**ï¼š
    ```bash
    make menuconfig
    ```

#### âš ï¸ é’ˆå¯¹ä½ çš„ç¡¬ä»¶ï¼Œå¿…é¡»æ‰‹åŠ¨æ£€æŸ¥å¹¶å¼€å¯ä»¥ä¸‹é€‰é¡¹ï¼š
åœ¨è“è‰²çš„èœå•ç•Œé¢ä¸­ï¼Œä½¿ç”¨ç©ºæ ¼é”®åˆ‡æ¢ï¼Œç¡®ä¿æ‹¬å·é‡Œæ˜¯æ˜Ÿå· **`[*]`** æˆ– **`<*>`**ï¼ˆè¡¨ç¤ºç¼–è¯‘è¿›å†…æ ¸ï¼‰ï¼Œ**ä¸è¦é€‰æˆ `<M>`**ï¼ˆæ¨¡å—ï¼‰ï¼Œå› ä¸º LFS é»˜è®¤ä¸å¸¦ `initramfs`ï¼Œé€‰æˆæ¨¡å—ä¼šå¯¼è‡´å¼€æœºæ‰¾ä¸åˆ°ç¡¬ç›˜ã€‚

1.  **NVMe ç¡¬ç›˜é©±åŠ¨ (é‡ä¸­ä¹‹é‡ï¼)**
    `Device Drivers`  --->
      `NVME Support`  --->
        `<*> NVM Express block device`

2.  **Ext4 æ–‡ä»¶ç³»ç»Ÿ (æ ¹ç›®å½•æ‰€åœ¨)**
    `File systems`  --->
      `<*> The Extended 4 (ext4) filesystem`

3.  **VMware è™šæ‹Ÿæœºä¸“ç”¨é©±åŠ¨ (ä¿è¯æ€§èƒ½å’Œå…¼å®¹æ€§)**
    `Device Drivers`  --->
      `SCSI device support`  --->  `<*> SCSI disk support`
      `Network device support` ---> `Ethernet driver support` ---> `<*> VMware VMXNET3 ethernet control`
      `Graphics support` ---> `<*> DRM support for VMware Virtual GPU`
      `Guest-host messaging` ---> `<*> VMware Guest Infrastructure`

4.  **CPU ä¼˜åŒ– (é€‚é… 13600KF)**
    `Processor type and features` --->
      `Processor family` ---> `(Core i7/newer Xeon)`
      `[*] SMT (Symmetric multi-threading) support` (å¯¹åº”ä½ çš„ 20 çº¿ç¨‹)

5.  **LFS æ‰‹å†Œè¦æ±‚çš„å¿…è¦é¡¹**ï¼ˆè§ä½ è´´å‡ºçš„å†…å®¹ï¼‰ï¼š
    *   `General setup` -> `[*] Control Group support`
    *   `General setup` -> `[*] Pressure stall information tracking` (PSI)
    *   `Device Drivers` -> `Generic Driver Options` -> `[*] Maintain a devtmpfs...` å’Œ `[*] Automount devtmpfs at /dev`

---

### ç¬¬ä¸‰æ­¥ï¼šå…¨æ ¸ç¼–è¯‘ (13600KF å±•ç°çœŸæ­£å®åŠ›)

ä¿å­˜å¹¶é€€å‡º `menuconfig` åï¼Œå¼€å¯ä½ çš„ 12 æ ¸é©¬åŠ›ï¼š

```bash
# ä½ çš„ CPU å¾ˆå¼ºï¼Œè¿™é‡Œç›´æ¥ä¸Š -j12
time make -j12
```
*   **é¢„è®¡è€—æ—¶**ï¼šåœ¨ä½ çš„æœºå™¨ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹é€šå¸¸åªéœ€ **2-5 åˆ†é’Ÿ**ã€‚
*   **SBU å‚è€ƒ**ï¼šå¦‚æœä½ ä¹‹å‰ Binutils æ˜¯ 1 åˆ†é’Ÿï¼Œé‚£ä¹ˆå†…æ ¸å¤§çº¦æ˜¯ 2-3 ä¸ª SBUã€‚

---

### ç¬¬å››æ­¥ï¼šå®‰è£…å†…æ ¸ä¸æ¨¡å—

```bash
# 1. å®‰è£…æ¨¡å—
make modules_install

# 2. æŒ‚è½½ /boot (å¦‚æœä½ æ˜¯ç‹¬ç«‹åˆ†åŒºï¼Œè¯·æŒ‚è½½ï¼›å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è¿è¡Œä¸‹è¡Œ)
# 3. æ‹·è´å†…æ ¸é•œåƒï¼ˆæ³¨æ„æ–‡ä»¶åè¦å’Œåé¢ GRUB é…ç½®ä¸€è‡´ï¼‰
cp -iv arch/x86/boot/bzImage /boot/vmlinuz-6.16.1-lfs-12.4

# 4. æ‹·è´ç¬¦å·è¡¨å’Œé…ç½®æ–‡ä»¶ï¼ˆæ–¹ä¾¿ä»¥åæ’é”™å’Œå‚è€ƒï¼‰
cp -iv System.map /boot/System.map-6.16.1
cp -iv .config /boot/config-6.16.1

# 5. å®‰è£…æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰
cp -r Documentation -T /usr/share/doc/linux-6.16.1
```

---

### ç¬¬äº”æ­¥ï¼šæƒé™ä¿®æ­£ (é˜²æ­¢ä»¥åè¯¯æ“ä½œ)

```bash
chown -R 0:0 .
```

---

### ğŸ’¡ é¿å‘æŒ‡å—ï¼š
*   **å…³äº `initramfs`**ï¼šLFS æ‰‹å†Œé»˜è®¤ä¸æ•™å¦‚ä½•åˆ¶ä½œ initramfsã€‚è¿™æ„å‘³ç€ä½ çš„ **NVMe é©±åŠ¨** å’Œ **Ext4 é©±åŠ¨** å¿…é¡»æ˜¯ **`<*>`**ï¼ˆé™æ€ç¼–è¯‘ï¼‰ï¼Œç»å¯¹ä¸èƒ½æ˜¯ **`<M>`**ã€‚
*   **å…³äº 64 ä½**ï¼šç¡®è®¤ç¬¬ä¸€è¡Œ `64-bit kernel` æ˜¯é€‰ä¸­çš„ã€‚

### ğŸš€ ä¸‹ä¸€ç«™ï¼š10.4. ä½¿ç”¨ GRUB è®¾å®šå¼•å¯¼è¿‡ç¨‹

å½“ä½ å®Œæˆå†…æ ¸ç¼–è¯‘å¹¶æŠŠ `vmlinuz` æ‹·è´åˆ° `/boot` åï¼Œä½ å°±åªå‰©ä¸‹æœ€åä¸€æ­¥äº†ï¼š**å‘Šè¯‰ GRUB å¦‚ä½•å¯åŠ¨è¿™ä¸ªå†…æ ¸ã€‚**

**ä½ ç°åœ¨è¿›å…¥é‚£ä¸ªè“è‰²çš„ `menuconfig` ç•Œé¢äº†å—ï¼Ÿå¦‚æœå‹¾é€‰å®Œäº†ï¼Œè¯·æ‰§è¡Œ `make -j12`ã€‚ç¼–è¯‘æˆåŠŸåå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬è¦å»å†™æœ€åä¸€ä»½é…ç½®æ–‡ä»¶â€”â€”GRUB èœå•ï¼**


è¿™ä¸€æ­¥æ˜¯â€œå¤§å¦è½æˆâ€å‰çš„æœ€åä¸€é“å·¥åºã€‚é’ˆå¯¹ä½ çš„ **NVMe SSD (è‡´æ€ TiPro7000)** å’Œ **BIOS (Legacy) å¼•å¯¼æ¨¡å¼**ï¼Œæ‰‹å†Œä¸­çš„èŒƒä¾‹ä¸èƒ½ç›´æ¥ç…§æŠ„ã€‚

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ç²¾å‡†æ‰§è¡Œï¼š

### ç¬¬ä¸€æ­¥ï¼šå°† GRUB å®‰è£…åˆ° NVMe ç¡¬ç›˜

åœ¨ `(lfs chroot)` ç¯å¢ƒä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚æ³¨æ„ï¼ŒGRUB å®‰è£…çš„ç›®æ ‡æ˜¯**æ•´ä¸ªç£ç›˜**ï¼ˆ`/dev/nvme0n1`ï¼‰ï¼Œè€Œä¸æ˜¯å…·ä½“çš„æŸä¸ªåˆ†åŒºã€‚

```bash
# é’ˆå¯¹ BIOS å¼•å¯¼å®‰è£… GRUB æ ¸å¿ƒ
grub-install /dev/nvme0n1
```
*   **é¢„æœŸè¾“å‡º**ï¼š`Installation finished. No error reported.`
*   **æ³¨æ„**ï¼šå¦‚æœä½ çœ‹åˆ°å…³äº EFI çš„è­¦å‘Šï¼Œè¯·æ”¹ç”¨ `grub-install --target i386-pc /dev/nvme0n1`ã€‚

---

### ç¬¬äºŒæ­¥ï¼šè·å–å…³é”®çš„ UUID å’Œ PARTUUID

åœ¨ç¼–å†™ `grub.cfg` ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸²ä»£ç ï¼ˆåˆšæ‰ä½ è¿è¡Œ `blkid` æ—¶å·²ç»çœ‹åˆ°äº†ï¼‰ï¼š
1.  **UUID**ï¼šæ–‡ä»¶ç³»ç»Ÿçš„å”¯ä¸€æ ‡è¯†ï¼Œç”¨äº GRUB å¯»æ‰¾ç¡¬ç›˜ã€‚
2.  **PARTUUID**ï¼šåˆ†åŒºçš„å”¯ä¸€æ ‡è¯†ã€‚**æ‰‹å†Œç‰¹åˆ«å¼ºè°ƒ**ï¼šåœ¨æ²¡æœ‰ `initramfs` çš„ LFS ç³»ç»Ÿä¸­ï¼Œå†…æ ¸è¯†åˆ«ç¡¬ç›˜æœ€ç¨³å¦¥çš„æ–¹å¼æ˜¯ä½¿ç”¨ `root=PARTUUID=<åˆ†åŒºUUID>`ã€‚

**æ ¹æ®ä½ ä¹‹å‰çš„ `blkid` è¾“å‡ºï¼š**
*   **UUID**: `cd61095f-b608-486b-b691-a16de10c74d3`
*   **PARTUUID**: `02089743-d337-422a-8a27-21d07f438c10`

---

### ç¬¬ä¸‰æ­¥ï¼šç¼–å†™å®šåˆ¶åŒ–çš„ `grub.cfg`

ç›´æ¥åœ¨ `(lfs chroot)` ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæˆ‘å·²ç»æ ¹æ®ä½ çš„ç¡¬ä»¶å‚æ•°ä¸ºä½ å¡«å¥½äº†ï¼š

```bash
cat > /boot/grub/grub.cfg << "EOF"
# Begin /boot/grub/grub.cfg
set default=0
set timeout=5

insmod part_gpt
insmod ext2
# å‘Šè¯‰ GRUB å»å“ªæ‰¾å†…æ ¸ï¼šæ ¹æ®æ–‡ä»¶ç³»ç»Ÿ UUID æœç´¢å¹¶è®¾ä¸º root
search --set=root --fs-uuid cd61095f-b608-486b-b691-a16de10c74d3

# è®¾ç½®æ˜¾ç¤ºåˆ†è¾¨ç‡ï¼ˆé€‚ç”¨äº VMwareï¼‰
set gfxpayload=1024x768x32

menuentry "Linux From Scratch, Linux 6.16.1-lfs-12.4" {
    linux  /boot/vmlinuz-6.16.1-lfs-12.4 root=PARTUUID=02089743-d337-422a-8a27-21d07f438c10 ro quiet
}
EOF
```

---

### ğŸ’¡ ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ï¼Ÿï¼ˆCS ä¸“ä¸šæ·±åº¦è§£æï¼‰

1.  **`search --fs-uuid`**ï¼šè¿™æ˜¯æœ€ç¨³å¦¥çš„ã€‚å³ä½¿ä½ ä»¥ååˆæ’äº†ä¸€å—æ–°ç¡¬ç›˜ï¼Œå¯¼è‡´ `(hd0,3)` å˜æˆäº† `(hd1,3)`ï¼ŒGRUB ä¾ç„¶èƒ½é€šè¿‡ UUID å‡†ç¡®æ‰¾åˆ°è¿™å—ç¡¬ç›˜ã€‚
2.  **`root=PARTUUID=...`**ï¼šè¿™æ˜¯ä½ ç³»ç»Ÿèƒ½å¯åŠ¨çš„æ ¸å¿ƒã€‚å› ä¸ºä½ çš„å†…æ ¸é‡Œç¼–è¯‘äº† NVMe é©±åŠ¨ï¼Œä½†æ²¡æœ‰ `initramfs` è„šæœ¬å»è§£ææ–‡ä»¶ç³»ç»Ÿçš„ UUIDï¼Œæ‰€ä»¥å¿…é¡»ç”¨åˆ†åŒºè¡¨çš„ PARTUUID æŒ‡å‘æ ¹ç›®å½•ï¼Œå†…æ ¸æ‰èƒ½ç›´æ¥æŒ‚è½½å®ƒã€‚

---

### ç¬¬å››æ­¥ï¼šæ¯•ä¸šä»ªå¼ â€”â€” é€€å‡ºå¹¶é‡å¯ï¼

ä¸€æ—¦æ–‡ä»¶å†™å®Œä¸”æ²¡æœ‰æŠ¥é”™ï¼Œä½ çš„ LFS æ„å»ºä¹‹æ—…åœ¨é€»è¾‘ä¸Šå·²ç»**åœ†æ»¡ç»“æŸ**ã€‚ç°åœ¨æˆ‘ä»¬è¦è¿›è¡Œç‰©ç†é‡å¯ï¼š

1.  **é€€å‡ºéš”ç¦»ç¯å¢ƒ**ï¼š
    ```bash
    exit
    ```
2.  **ä¼˜é›…å¸è½½æ‰€æœ‰æŒ‚è½½ç‚¹ï¼ˆåœ¨å®¿ä¸»æœº root ä¸‹æ‰§è¡Œï¼‰**ï¼š
    ```bash
    export LFS=/mnt/lfs
    # æŒ‰é¡ºåºå¸è½½
    mountpoint -q $LFS/dev/shm && umount $LFS/dev/shm
    umount -v $LFS/dev/pts
    umount -v $LFS/proc
    umount -v $LFS/sys
    umount -v $LFS/run
    umount -v $LFS/dev
    cd /
    umount -v $LFS
    ```
3.  **æœ€åç¡®è®¤ï¼š** åœ¨ VMware çª—å£é‡Œï¼Œç‚¹å¼€â€œè™šæ‹Ÿæœºè®¾ç½®â€ï¼Œåœ¨â€œCD/DVDâ€é‡Œ**å–æ¶ˆå‹¾é€‰**â€œå¯åŠ¨æ—¶è¿æ¥â€ï¼Œç¡®ä¿ä¸ä¼šå†æ¬¡è¿›å…¥ Ubuntu å®‰è£…é•œåƒã€‚

4.  **æŒ‰ä¸‹é‡å¯é”®ï¼š**
    ```bash
    reboot
    ```

---

### ğŸš€ è§è¯å¥‡è¿¹çš„æ—¶åˆ»

å½“ä½ é‡å¯è™šæ‹Ÿæœºåï¼š
1.  ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªè“è‰²çš„ **GRUB èœå•**ã€‚
2.  æŒ‰ä¸‹å›è½¦ï¼Œä½ ä¼šçœ‹åˆ°å†…æ ¸è§£å‹çš„æç¤ºã€‚
3.  æˆåƒä¸Šä¸‡è¡Œå¯åŠ¨æ—¥å¿—ä¼šé£é€Ÿæ»šè¿‡ä½ çš„ **i5-13600KF**ã€‚
4.  æœ€åï¼Œå±å¹•ä¼šåœåœ¨ï¼š
    **`lfs-pc login:`**

**ç™»å½•åæ˜¯ `root`ï¼Œå¯†ç æ˜¯ä½ ä¹‹å‰åœ¨ 8.28 èŠ‚è®¾å®šçš„é‚£ä¸ªã€‚**

**æ­å–œä½ ï¼å®Œæˆè¿™ä¸€æ­¥ï¼Œä½ å°±æ­£å¼é€šå…³äº†ã€ŠLinux From Scratchã€‹ã€‚å»æŒ‰ä¸‹ `reboot` å§ï¼ŒæœŸå¾…ä½ çœ‹åˆ°ç™»å½•æç¤ºç¬¦çš„å¥½æ¶ˆæ¯ï¼**


<img width="1286" height="997" alt="image" src="https://github.com/user-attachments/assets/22c25c58-b0bc-47d6-99a5-bdfbd9972e0e" />



**æ­å–œé€šå…³ï¼ï¼ä½ æˆåŠŸäº†ï¼** 

çœ‹åˆ°å±å¹•æœ€åé‚£ä¸€è¡Œ **`lfs-pc login:`** äº†å—ï¼Ÿè¿™å°±æ˜¯æ•´ä¸ª Linux From Scratch æ—…ç¨‹çš„ç»ˆç‚¹çº¿ã€‚ä½œä¸ºä¸€åè®¡ç®—æœºä¸“ä¸šçš„å­¦ç”Ÿï¼Œä½ å·²ç»äº²æ‰‹ä»é›¶æºç æ„å»ºå‡ºäº†ä¸€ä¸ªå®Œæ•´çš„ã€å¯è¿è¡Œçš„æ“ä½œç³»ç»Ÿã€‚

ä»ä½ çš„æˆªå›¾ä¸­ï¼Œæˆ‘çœ‹åˆ°äº†éå¸¸å®Œç¾çš„å¯åŠ¨æ—¥å¿—ï¼Œä½†ä¹Ÿå‘ç°äº†ä¸€ä¸ªæœ€åçš„å°ç‘•ç–µï¼ˆç”±äºç½‘å¡å‘½åè§„åˆ™å¯¼è‡´çš„ï¼‰ï¼Œæˆ‘ä»¬ç°åœ¨ç™»å½•è¿›å»æŠŠå®ƒä¿®å¥½ã€‚

### 1. ç¬¬ä¸€æ¬¡ç™»å½•
1.  åœ¨ `login:` åé¢è¾“å…¥ï¼š**`root`**
2.  è¾“å…¥ä½ è®¾å®šçš„å¯†ç ï¼ˆè¾“å…¥æ—¶å±å¹•ä¸æ˜¾ç¤ºï¼‰ã€‚

---

### 2. ä¿®å¤ç½‘ç»œæŠ¥é”™ï¼ˆInterface eth0 doesn't existï¼‰
ä½ åœ¨æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸€è¡Œï¼š`e1000 ... ens33: renamed from eth0`ã€‚è¿™è¯´æ˜å†…æ ¸æŒ‰ç…§ç°ä»£è§„åˆ™æŠŠç½‘å¡æ”¹åä¸º **`ens33`** äº†ï¼Œè€Œä½ çš„é…ç½®æ–‡ä»¶è¿˜å« `eth0`ã€‚

**ä¿®å¤æ­¥éª¤ï¼š**
```bash
# 1. é‡æ–°å‘½åé…ç½®æ–‡ä»¶
cd /etc/sysconfig/
mv ifconfig.eth0 ifconfig.ens33

# 2. ä¿®æ”¹æ–‡ä»¶å†…å®¹
vi ifconfig.ens33
# å°†å…¶ä¸­çš„ IFACE=eth0 æ”¹ä¸º IFACE=ens33
# æŒ‰ Esc, è¾“å…¥ :wq ä¿å­˜é€€å‡º

# 3. æ‰‹åŠ¨å¯åŠ¨ç½‘ç»œè¯•è¯•
/etc/rc.d/init.d/network start
```

---

### 3. éªŒæ”¶ä½ çš„æˆæœ
ç™»å½•æˆåŠŸåï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ„Ÿå—ä½œä¸ºâ€œé€ ç‰©ä¸»â€çš„æˆå°±æ„Ÿï¼š

*   **ç¡®è®¤ä½ çš„ä»£å·ç­¾åï¼š**
    ```bash
    cat /etc/os-release
    ```
    ä½ åº”è¯¥èƒ½çœ‹åˆ°ä½ äº²æ‰‹å†™çš„ `VERSION_CODENAME="zhuyukun"`ã€‚

*   **ç¡®è®¤å†…æ ¸ï¼š**
    ```bash
    uname -a
    ```
    æ˜¾ç¤ºçš„æ˜¯ä½ åˆšåˆšç¼–è¯‘çš„ `6.16.1` å†…æ ¸ã€‚

*   **æŸ¥çœ‹ CPU ç«åŠ›ï¼š**
    ```bash
    cat /proc/cpuinfo | grep "model name" | head -n 1
    ```
    ç¡®è®¤ä½ çš„ **i5-13600KF** æ­£åœ¨ä¸ºè¿™ä¸ªæ–°ç”Ÿçš„ç³»ç»Ÿæä¾›åŠ¨åŠ›ã€‚

---

### ğŸ æœ€ç»ˆç»“æ¡ˆé™ˆè¯
è¿™ä¸ªé¡¹ç›®æœ€éš¾çš„éƒ¨åˆ†ï¼ˆäº¤å‰ç¼–è¯‘ã€å†…æ ¸é…ç½®ã€å¼•å¯¼åŠ è½½ï¼‰ä½ å·²ç»å…¨éƒ¨æ”»å…‹ã€‚

**ç°åœ¨çš„å»ºè®®ï¼š**
1.  **ä¿å­˜ä¸€ä¸ªâ€œé€šå…³å¿«ç…§â€**ï¼šå…³é—­è™šæ‹Ÿæœºï¼Œå­˜ä¸€ä¸ªåä¸º `zhuyukun_OS_Final_V1.0` çš„å¿«ç…§ã€‚è¿™æ˜¯ä½ çš„å¤§ä½œä¸šæœ€ç»ˆæˆæœã€‚
2.  **å¯¼å‡ºå®éªŒæŠ¥å‘Š**ï¼šä½ å¯ä»¥æŠŠåˆšæ‰çœ‹åˆ°çš„å¯åŠ¨æµç¨‹æˆªå›¾æ”¾è¿›æŠ¥å‘Šé‡Œï¼Œè¿™ç»å¯¹æ˜¯æ»¡åˆ†æ°´å¹³çš„ä½œä¸šã€‚

**ä½ ç°åœ¨çš„å¿ƒæƒ…å¦‚ä½•ï¼Ÿç™»å½•è¿›å»çœ‹åˆ°è‡ªå·±çš„ä»£å·äº†å—ï¼Ÿå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œè¿™å°±æ˜¯ LFS æ—…ç¨‹çš„å®Œç¾è°¢å¹•ï¼** ğŸš€ğŸ¦¾




**é™„åŠ **

**æˆ‘è¿™ä¸ªæ–°ç³»ç»Ÿå¤åˆ¶ç²˜è´´ä¸äº†å¥½éš¾å—**

ç†è§£ä½ çš„ç—›è‹¦ï¼åœ¨ **LFSï¼ˆæˆ–è€…ä»»ä½•çº¯å‡€çš„ TTY ç»ˆç«¯ï¼‰**é‡Œï¼Œä¼ ç»Ÿçš„ `Ctrl+C` å’Œ `Ctrl+V` æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚è¿™æ˜¯å› ä¸ºä½ ç°åœ¨çš„ç³»ç»Ÿåªæ˜¯ä¸€ä¸ªæœ€åŸå§‹çš„å­—ç¬¦ç•Œé¢ï¼Œå®ƒæ—¢æ²¡æœ‰å®‰è£… **VMware Tools**ï¼Œä¹Ÿæ²¡æœ‰è¿è¡Œå›¾å½¢åŒ–çš„å‰ªè´´æ¿æœåŠ¡ã€‚

ä½œä¸º CS ä¸“ä¸šå­¦ç”Ÿï¼Œä½ éœ€è¦çŸ¥é“ï¼š**çœŸæ­£çš„ Linux å¤§ç‰›å‡ ä¹ä»ä¸ç›´æ¥åœ¨ VMware çš„å°é»‘çª—é‡Œæ“ä½œã€‚**

ä¸ºäº†è®©ä½ ç”¨ä¸Šä¸æ»‘çš„å¤åˆ¶ç²˜è´´ï¼Œæˆ‘æœ‰ä¸‰ä¸ªæ–¹æ¡ˆï¼ŒæŒ‰**æ¨èç¨‹åº¦**æ’åºï¼š

---

### æ–¹æ¡ˆä¸€ï¼šç»ˆææ–¹æ¡ˆâ€”â€”é…ç½® SSHï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ä¿®ç½‘å¡ï¼‰

åœ¨çœŸå®çš„æœåŠ¡å™¨è¿ç»´ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ SSH å®¢æˆ·ç«¯ï¼ˆå¦‚ Windows Terminal, Tabby, MobaXtermï¼‰è¿è¿›å»çš„ã€‚è¿™äº›è½¯ä»¶æ”¯æŒåŸç”Ÿçš„å¤åˆ¶ç²˜è´´ã€‚

**ä½†æ˜¯ï¼š** LFS åŸºç¡€ç‰ˆ**é»˜è®¤æ²¡æœ‰å®‰è£… OpenSSH**ã€‚
*   **ä½ éœ€è¦ï¼š** æŒ‰ç…§ [BLFS (Beyond LFS)](https://www.linuxfromscratch.org/blfs/view/stable/postlfs/openssh.html) æ‰‹å†Œï¼Œç»§ç»­åœ¨ä½ çš„æ–°ç³»ç»Ÿé‡Œç¼–è¯‘å®‰è£… `openssh`ã€‚
*   **ç°çŠ¶ï¼š** å¦‚æœä½ ç°åœ¨åªæ˜¯ä¸ºäº†äº¤ä½œä¸šï¼Œå¯èƒ½ä¸æƒ³å†æŠ˜è…¾å‡ å°æ—¶å»è£… SSHã€‚

---

### æ–¹æ¡ˆäºŒï¼šåˆ©ç”¨ VMware çš„â€œå‘é€å‰ªè´´æ¿å†…å®¹â€åŠŸèƒ½

å…¶å® VMware èœå•é‡Œéšè—äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥å¼ºè¡ŒæŠŠå®¿ä¸»æœºçš„æ–‡å­—â€œæ‰“â€è¿›è™šæ‹Ÿæœºé‡Œã€‚

1.  åœ¨ Windows å®¿ä¸»æœºå¤åˆ¶ä½ æƒ³è¾“å…¥çš„å‘½ä»¤ã€‚
2.  ç‚¹å‡» VMware èœå•æ ï¼š**è™šæ‹Ÿæœº (VM) -> å‘é€é”®å€¼ (Send Key) -> ç²˜è´´ (Paste)**ã€‚
3.  *æˆ–è€…ï¼š* è¾ƒæ–°ç‰ˆæœ¬çš„ VMware åªè¦ä½ å®‰è£…äº†è¾…åŠ©é©±åŠ¨ï¼Œå¯ä»¥ç›´æ¥å°è¯• `Ctrl+V`ã€‚
4.  **æ³¨æ„ï¼š** å¦‚æœæ²¡æœ‰å®‰è£… VMware Toolsï¼Œè¿™ä¸ªåŠŸèƒ½å¯èƒ½å¤±æ•ˆã€‚

---

### æ–¹æ¡ˆä¸‰ï¼šæœ€åŠ¡å®çš„â€œä½œå¼Šâ€æ³•â€”â€”åœ¨å®¿ä¸»æœº Ubuntu ä¸‹æ“ä½œ

æ—¢ç„¶ä½ è¿˜åœ¨åšä½œä¸šï¼Œéœ€è¦å†™å¤§é‡çš„é…ç½®æ–‡ä»¶ï¼Œ**æœ€å¿«çš„æ–¹æ³•æ˜¯å›åˆ°ä½ ç†Ÿæ‚‰çš„ Ubuntu ç¯å¢ƒå»æ”¹æ–‡ä»¶ã€‚**

1.  åœ¨ LFS é‡Œè¾“å…¥ `poweroff` å…³æœºã€‚
2.  å›åˆ°ä½ çš„ **Ubuntu å®¿ä¸»æœº** å¼€æœºã€‚
3.  æŒ‚è½½ LFS ç¡¬ç›˜ï¼š
    ```bash
    sudo mount /dev/nvme0n1p3 /mnt/lfs
    ```
4.  **åœ¨ Ubuntu çš„ç»ˆç«¯é‡Œ**ï¼Œä½ å¯ä»¥éšæ„ä½¿ç”¨å¤åˆ¶ç²˜è´´ã€ç”šè‡³ç”¨å›¾å½¢åŒ–çš„ç¼–è¾‘å™¨ï¼ˆæ¯”å¦‚ Gedit æˆ– VS Codeï¼‰å»ä¿®æ”¹ `/mnt/lfs/etc/` ä¸‹çš„ä»»ä½•æ–‡ä»¶ã€‚
    *   æ¯”å¦‚åˆšæ‰é‚£ä¸ªç½‘å¡é…ç½®ï¼š`sudo gedit /mnt/lfs/etc/sysconfig/ifconfig.ens33`ã€‚
5.  ä¿®æ”¹å®Œåï¼Œ`sudo umount /mnt/lfs`ï¼Œç„¶åé‡å¯è¿›å…¥ LFSã€‚

---

### æ–¹æ¡ˆå››ï¼šå®‰è£… GPMï¼ˆé¼ æ ‡æ”¯æŒï¼‰

å¦‚æœä½ æƒ³åœ¨é»‘è‰²çš„ TTY å±å¹•ä¸Šå®ç°â€œç”¨é¼ æ ‡é€‰ä¸­å·¦è¾¹ï¼Œç‚¹å³é”®ç²˜è´´åˆ°å³è¾¹â€ï¼Œä½ éœ€è¦å®‰è£… **GPM (General Purpose Mouse)**ã€‚
*   è¿™åŒæ ·å±äº BLFS çš„å†…å®¹ã€‚å®‰è£…åï¼Œä½ çš„é»‘è‰²å±å¹•ä¸Šä¼šå‡ºç°ä¸€ä¸ªç™½è‰²çš„æ–¹å—å…‰æ ‡ï¼Œå…è®¸ä½ åœ¨æ§åˆ¶å°å†…éƒ¨è¿›è¡Œç®€å•çš„å¤åˆ¶ç²˜è´´ã€‚

---

### ğŸ’¡ ç°åœ¨çš„é€šå…³å»ºè®®ï¼š

ä½ åˆšæ‰ä¸æ˜¯è¯´ `cat /etc/os-release` æç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶å—ï¼Ÿ
1.  **åˆ«æ‰‹æ•²äº†**ï¼Œç›´æ¥ç”¨ **æ–¹æ¡ˆä¸‰**ï¼š
    *   å…³æ‰ LFSï¼Œå¯åŠ¨ Ubuntuã€‚
    *   åœ¨ Ubuntu é‡ŒæŠŠæ–‡ä»¶å†™å¥½ã€‚
    *   é‡å¯å› LFS ç›´æ¥éªŒæ”¶ã€‚
2.  **ç½‘å¡æ”¹åï¼š** åŒæ ·åœ¨ Ubuntu é‡ŒæŠŠ `ifconfig.eth0` æ”¹åä¸º `ifconfig.ens33`ã€‚

**å®Œæˆè¿™äº›åï¼Œä½ çš„ LFS ç³»ç»Ÿå°±å®Œç¾äº†ï¼ä½ å·²ç»è·¨è¿‡äº†æœ€éš¾çš„ä¸€å…³ã€‚ç°åœ¨çš„è¿™äº›â€œä¸æ–¹ä¾¿â€å…¶å®å°±æ˜¯ LFS æ•™å­¦çš„ä¸€éƒ¨åˆ†ï¼šè®©ä½ æ˜ç™½ä¸€ä¸ªç°ä»£æ“ä½œç³»ç»Ÿä¸ºäº†â€œå¥½ç”¨â€ï¼ŒèƒŒåè¿˜è¦é¢å¤–å®‰è£…å¤šå°‘é©±åŠ¨å’ŒæœåŠ¡ã€‚**

<img width="1328" height="357" alt="image (1)" src="https://github.com/user-attachments/assets/c31352c9-6a2e-47a7-bc33-35341f909577" />


**ä¸ºä»€ä¹ˆLinuxä»–ä¸€ç›´åœ¨ping**


**å¤ªæ£’äº†ï¼ç½‘ç»œå½»åº•é€šäº†ï¼** çœ‹åˆ°é‚£ä¸€è¡Œè¡Œ `64 bytes from 8.8.8.8...`ï¼Œè¯´æ˜ä½ çš„ LFS ç³»ç»Ÿå·²ç»æˆåŠŸä¸äº’è”ç½‘æ¡æ‰‹ã€‚

### 1. ä¸ºä»€ä¹ˆå®ƒä¸€ç›´åœ¨ Pingï¼Ÿ
è¿™æ˜¯ **Linux å’Œ Windows çš„ä¸€ä¸ªç»å…¸åŒºåˆ«**ï¼š
*   **åœ¨ Windows ä¸­**ï¼š`ping` é»˜è®¤åªå‘ 4 ä¸ªåŒ…å°±è‡ªåŠ¨åœæ­¢ã€‚
*   **åœ¨ Linux ä¸­**ï¼š`ping` é»˜è®¤æ˜¯**æ— é™å¾ªç¯**çš„ï¼Œå®ƒä¼šä¸€ç›´è·‘ä¸‹å»ï¼Œç›´åˆ°ä½ æ‰‹åŠ¨å«åœã€‚

### 2. å¦‚ä½•åœæ­¢å®ƒï¼Ÿ
æŒ‰ä¸‹é”®ç›˜ç»„åˆé”®ï¼š**`Ctrl + C`**ã€‚
è¿™ä¼šå‘è¿›ç¨‹å‘é€ä¸€ä¸ªä¸­æ–­ä¿¡å·ï¼Œå®ƒä¼šåœæ­¢å¹¶å¼¹å‡ºä¸€ä¸ªç»Ÿè®¡æ±‡æ€»ï¼ˆå‘Šè¯‰ä½ ä¸¢åŒ…ç‡å’Œå»¶è¿Ÿæƒ…å†µï¼‰ã€‚

---

### 3. CS ä¸“ä¸šå°çŸ¥è¯†ï¼šå¦‚ä½•è®©å®ƒåªå‘ 4 ä¸ªåŒ…ï¼Ÿ
ä»¥åå¦‚æœä½ æƒ³è®©å®ƒåƒ Windows ä¸€æ ·å‘å®Œå³æ­¢ï¼Œéœ€è¦åŠ ä¸Š `-c` (count) å‚æ•°ï¼š
```bash
ping -c 4 8.8.8.8
```

---

### ğŸ ç»ˆæéªŒæ”¶ï¼šä½ çš„ LFS å·²ç»â€œå®Œå…¨ä½“â€äº†ï¼

æ—¢ç„¶ç½‘ç»œé€šäº†ï¼Œä½ ç°åœ¨çš„ç³»ç»Ÿå·²ç»å…·å¤‡äº†**â€œè¿›åŒ–â€**çš„åŸºç¡€ï¼š
1.  **è¯æ˜äº†å†…æ ¸é©±åŠ¨æ­£ç¡®**ï¼š`ens33` ç½‘å¡é©±åŠ¨ï¼ˆVMXNET3ï¼‰å·¥ä½œå®Œç¾ã€‚
2.  **è¯æ˜äº†ç³»ç»Ÿé€»è¾‘æ­£ç¡®**ï¼šä½ çš„ `/etc/sysconfig/ifconfig.ens33` é…ç½®æ–‡ä»¶è¢«æˆåŠŸè¯»å–ã€‚
3.  **è¯æ˜äº†ç½‘ç»œåè®®æ ˆæ­£å¸¸**ï¼šä½ äº²æ‰‹ç¼–è¯‘çš„ Glibc å’Œ Linux å†…æ ¸å·²ç»å¯ä»¥å¤„ç†å¤æ‚çš„ç½‘ç»œå°åŒ…ã€‚

### ğŸ’¡ ç°åœ¨çš„å»ºè®®ï¼š
1.  **æŒ‰ä¸‹ `Ctrl + C`** åœæ­¢ Pingã€‚
2.  **æœ€åå°è¯•ä¸€æ¬¡**ï¼š`cat /etc/os-release`ï¼ˆè®°å¾—å¸¦ç©ºæ ¼ï¼‰ã€‚
    *   *å¦‚æœåˆšæ‰åœ¨å®¿ä¸»æœºé‡Œå†™äº†æ–‡ä»¶ï¼Œç°åœ¨åº”è¯¥èƒ½çœ‹åˆ°äº†ã€‚*
3.  **å¤§åŠŸå‘Šæˆï¼Œå­˜å¿«ç…§ï¼**
    *   æ—¢ç„¶ç½‘ç»œéƒ½ä¿®å¥½äº†ï¼Œç°åœ¨è¿™ä¸ªçŠ¶æ€å°±æ˜¯æœ€å®Œç¾çš„â€œé€šå…³å­˜æ¡£â€ã€‚å…³æœºï¼Œå­˜ä¸€ä¸ªåä¸º `LFS_Finished_Network_OK` çš„å¿«ç…§ã€‚

**å†æ¬¡ç¥è´ºä½ ï¼Œzhuyukunï¼ä½ ä¸ä»…é€ å‡ºäº†ç³»ç»Ÿï¼Œè¿˜ä¿®å¥½äº†å®ƒçš„ç½‘ç»œã€‚è¿™ä½œä¸šäº¤ä¸Šå»ï¼Œç»å¯¹æ˜¯æ•™ç§‘ä¹¦çº§åˆ«çš„æ¼”ç¤ºï¼** ğŸ†ğŸš€

<img width="1260" height="822" alt="image (2)" src="https://github.com/user-attachments/assets/d4354f35-7e79-41d5-a73b-daa46d85ba93" />



**æ­å–œä½ ï¼ŒZhu Yukunï¼é€šå…³æˆåŠŸï¼** ğŸ†

çœ‹åˆ°å±å¹•ä¸Šæ˜¾ç¤ºçš„ `VERSION_CODENAME="Zhu Yukun"`ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªæ“ä½œç³»ç»Ÿå·²ç»æ­£å¼æ‰“ä¸Šäº†ä½ çš„ä¸ªäººçƒ™å°ã€‚åœ¨è®¡ç®—æœºç§‘å­¦çš„å­¦ä¹ ç”Ÿæ¶¯ä¸­ï¼Œèƒ½ä»é›¶ä»£ç å¼€å§‹ï¼Œäº²æ‰‹ç¼–è¯‘å¹¶é…ç½®å‡ºä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„ Linux ç³»ç»Ÿï¼Œæ˜¯ä¸€é¡¹æå…·å«é‡‘é‡çš„æˆå°±ã€‚

### 1. æˆæœéªŒæ”¶
ä»ä½ çš„æœ€åä¸€å¼ æˆªå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæå…¶å®Œç¾çš„â€œå¥åº·æŠ¥å‘Šâ€ï¼š
*   **Init è¿›ç¨‹**ï¼š`INIT: version 3.14 booting` æ­£å¸¸å¯åŠ¨ã€‚
*   **æ–‡ä»¶ç³»ç»Ÿ**ï¼š`Remounting root file system in read-write mode... [ OK ]` ä½ çš„ NVMe ç¡¬ç›˜æŒ‚è½½è¯»å†™å®Œå…¨æ­£å¸¸ã€‚
*   **ç½‘ç»œ**ï¼š`Bringing up the ens33 interface... [ OK ]` ä½ çš„ç½‘å¡å·²ç»å®Œç¾å·¥ä½œå¹¶æ‹¿åˆ°äº†ä½ è®¾å®šçš„é™æ€ IPã€‚
*   **ç³»ç»Ÿèº«ä»½**ï¼š`cat /etc/os-release` çš„è¾“å‡ºç»“æœå‡†ç¡®æ— è¯¯ã€‚

### 2. æœ€åçš„â€œé€€åœºä»ªå¼â€
æ—¢ç„¶ç³»ç»Ÿå·²ç»è¾¾åˆ°æœ€å®Œç¾çš„çŠ¶æ€ï¼Œä½œä¸ºä¸€åä¸“ä¸šçš„ CS å­¦ç”Ÿï¼Œå»ºè®®ä½ å®Œæˆæœ€åçš„â€œå·¥ç¨‹å½’æ¡£â€ï¼š

1.  **ä¼˜é›…å…³æœº**ï¼š
    åœ¨ç»ˆç«¯è¾“å…¥ï¼š
    ```bash
    poweroff
    ```
    *ï¼ˆæ³¨æ„ï¼šLinux ä¹ æƒ¯ç”¨è¿™ä¸ªå‘½ä»¤æ¥å®‰å…¨åœæ­¢æ‰€æœ‰æœåŠ¡å¹¶åˆ‡æ–­ç”µæºã€‚ï¼‰*

2.  **å»ºç«‹â€œé»„é‡‘å¿«ç…§â€ï¼ˆGold Masterï¼‰**ï¼š
    åœ¨è™šæ‹Ÿæœºå½»åº•å…³é—­åï¼Œåœ¨ VMware ä¸­æ‹æ‘„ä¸€ä¸ªåä¸º **`LFS_12.4_ZhuYukun_Final_Stable`** çš„å¿«ç…§ã€‚
    *   **å¤‡æ³¨å†™ä¸Š**ï¼šç³»ç»Ÿå®‰è£…å®Œæˆï¼Œå†…æ ¸ 6.16.1ï¼Œç½‘ç»œ ens33 å·²è°ƒé€šï¼ŒåŒ…å« root è´¦å·å’Œä¸ªäººç­¾åã€‚

### 3. æ¥ä¸‹æ¥ä½ å¯ä»¥åšä»€ä¹ˆï¼Ÿ
å¦‚æœä½ å¯¹è¿™ä¸ªç³»ç»Ÿè¿˜æœ‰å…´è¶£ï¼Œå¤§ä½œä¸šä¹‹åä½ å¯ä»¥å°è¯•ï¼š
*   **Beyond LFS (BLFS)**ï¼šè¿™æ˜¯ä¸‹ä¸€é˜¶æ®µã€‚åœ¨è¿™ä¸ªåªæœ‰é»‘æ¡†æ¡†çš„ç³»ç»Ÿé‡Œï¼Œå°è¯•ç¼–è¯‘å®‰è£… `OpenSSH`ï¼ˆè®©ä½ èƒ½åœ¨ Windows ä¸‹ç›´æ¥è¿è¿›å»ï¼‰ã€`Wget`ã€ç”šè‡³æ˜¯å›¾å½¢ç•Œé¢ `Xorg`ã€‚
*   **æ€§èƒ½æµ‹è¯•**ï¼šç”¨è¿™ä¸ªçº¯å‡€çš„ç³»ç»Ÿè·‘ä¸€ä¸‹ç®—æ³•ï¼Œå¯¹æ¯”ä¸€ä¸‹å®ƒå’Œ Ubuntu çš„æ€§èƒ½å·®å¼‚ï¼Œä½ çš„ 13600KF åœ¨è¿™ä¸ªæ— å†—ä½™çš„ç¯å¢ƒä¸‹æ•ˆç‡ä¼šéå¸¸ææ€–ã€‚

---

**ç»“æ¡ˆé™ˆè¯ï¼š**
ä½ è¿™ä¸€è·¯ä¸Šè§£å†³äº†**å·¥å…·é“¾ç¼–è¯‘ã€å†…æ ¸é»‘å±ã€ç½‘å¡å‘½åå†²çªã€æ–‡ä»¶ç³»ç»ŸæŒ‚è½½**ç­‰ä¸€ç³»åˆ—æ“ä½œç³»ç»Ÿåº•å±‚æœ€æ ¸å¿ƒçš„ Bugã€‚è¿™äº›ç»éªŒæ¯”ä½œä¸šæœ¬èº«æ›´æœ‰ä»·å€¼ã€‚

**å†æ¬¡ç¥è´ºä½ åœ†æ»¡å®Œæˆä»»åŠ¡ï¼ä»Šæ™šä½ å¯ä»¥å¸¦ç€â€œå†™è¿‡æ“ä½œç³»ç»Ÿâ€çš„è‡ªè±ªæ„Ÿå¥½å¥½ä¼‘æ¯äº†ï¼** ğŸš€ğŸ¦¾ğŸ®

